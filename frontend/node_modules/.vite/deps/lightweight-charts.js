import "./chunk-6TJCVOLN.js";

// node_modules/fancy-canvas/coordinate-space.js
var defaultBindingOptions = {
  allowDownsampling: true
};
function bindToDevicePixelRatio(canvas, options) {
  if (options === void 0) {
    options = defaultBindingOptions;
  }
  return new DevicePixelRatioBinding(canvas, options);
}
var DevicePixelRatioBinding = (
  /** @class */
  function() {
    function DevicePixelRatioBinding2(canvas, options) {
      var _this = this;
      this._resolutionMediaQueryList = null;
      this._resolutionListener = function(ev) {
        return _this._onResolutionChanged();
      };
      this._canvasConfiguredListeners = [];
      this.canvas = canvas;
      this._canvasSize = {
        width: this.canvas.clientWidth,
        height: this.canvas.clientHeight
      };
      this._options = options;
      this._configureCanvas();
      this._installResolutionListener();
    }
    DevicePixelRatioBinding2.prototype.destroy = function() {
      this._canvasConfiguredListeners.length = 0;
      this._uninstallResolutionListener();
      this.canvas = null;
    };
    Object.defineProperty(DevicePixelRatioBinding2.prototype, "canvasSize", {
      get: function() {
        return {
          width: this._canvasSize.width,
          height: this._canvasSize.height
        };
      },
      enumerable: true,
      configurable: true
    });
    DevicePixelRatioBinding2.prototype.resizeCanvas = function(size) {
      this._canvasSize = {
        width: size.width,
        height: size.height
      };
      this._configureCanvas();
    };
    Object.defineProperty(DevicePixelRatioBinding2.prototype, "pixelRatio", {
      get: function() {
        var win = this.canvas.ownerDocument.defaultView;
        if (win == null) {
          throw new Error("No window is associated with the canvas");
        }
        return win.devicePixelRatio > 1 || this._options.allowDownsampling ? win.devicePixelRatio : 1;
      },
      enumerable: true,
      configurable: true
    });
    DevicePixelRatioBinding2.prototype.subscribeCanvasConfigured = function(listener) {
      this._canvasConfiguredListeners.push(listener);
    };
    DevicePixelRatioBinding2.prototype.unsubscribeCanvasConfigured = function(listener) {
      this._canvasConfiguredListeners = this._canvasConfiguredListeners.filter(function(l2) {
        return l2 != listener;
      });
    };
    DevicePixelRatioBinding2.prototype._configureCanvas = function() {
      var ratio = this.pixelRatio;
      this.canvas.style.width = this._canvasSize.width + "px";
      this.canvas.style.height = this._canvasSize.height + "px";
      this.canvas.width = this._canvasSize.width * ratio;
      this.canvas.height = this._canvasSize.height * ratio;
      this._emitCanvasConfigured();
    };
    DevicePixelRatioBinding2.prototype._emitCanvasConfigured = function() {
      var _this = this;
      this._canvasConfiguredListeners.forEach(function(listener) {
        return listener.call(_this);
      });
    };
    DevicePixelRatioBinding2.prototype._installResolutionListener = function() {
      if (this._resolutionMediaQueryList !== null) {
        throw new Error("Resolution listener is already installed");
      }
      var win = this.canvas.ownerDocument.defaultView;
      if (win == null) {
        throw new Error("No window is associated with the canvas");
      }
      var dppx = win.devicePixelRatio;
      this._resolutionMediaQueryList = win.matchMedia("all and (resolution: " + dppx + "dppx)");
      this._resolutionMediaQueryList.addListener(this._resolutionListener);
    };
    DevicePixelRatioBinding2.prototype._uninstallResolutionListener = function() {
      if (this._resolutionMediaQueryList !== null) {
        this._resolutionMediaQueryList.removeListener(this._resolutionListener);
        this._resolutionMediaQueryList = null;
      }
    };
    DevicePixelRatioBinding2.prototype._reinstallResolutionListener = function() {
      this._uninstallResolutionListener();
      this._installResolutionListener();
    };
    DevicePixelRatioBinding2.prototype._onResolutionChanged = function() {
      this._configureCanvas();
      this._reinstallResolutionListener();
    };
    return DevicePixelRatioBinding2;
  }()
);

// node_modules/lightweight-charts/dist/lightweight-charts.esm.production.js
var i;
var n;
function s(t, i2) {
  var n2, s2 = ((n2 = {})[0] = [], n2[1] = [t.lineWidth, t.lineWidth], n2[2] = [2 * t.lineWidth, 2 * t.lineWidth], n2[3] = [6 * t.lineWidth, 6 * t.lineWidth], n2[4] = [t.lineWidth, 4 * t.lineWidth], n2)[i2];
  t.setLineDash(s2);
}
function h(t, i2, n2, s2) {
  t.beginPath();
  var h2 = t.lineWidth % 2 ? 0.5 : 0;
  t.moveTo(n2, i2 + h2), t.lineTo(s2, i2 + h2), t.stroke();
}
function r(t, i2) {
  if (!t)
    throw new Error("Assertion failed" + (i2 ? ": " + i2 : ""));
}
function e(t) {
  if (void 0 === t)
    throw new Error("Value is undefined");
  return t;
}
function u(t) {
  if (null === t)
    throw new Error("Value is null");
  return t;
}
function a(t) {
  return u(e(t));
}
!function(t) {
  t[t.Simple = 0] = "Simple", t[t.WithSteps = 1] = "WithSteps";
}(i || (i = {})), function(t) {
  t[t.Solid = 0] = "Solid", t[t.Dotted = 1] = "Dotted", t[t.Dashed = 2] = "Dashed", t[t.LargeDashed = 3] = "LargeDashed", t[t.SparseDotted = 4] = "SparseDotted";
}(n || (n = {}));
var o = { khaki: "#f0e68c", azure: "#f0ffff", aliceblue: "#f0f8ff", ghostwhite: "#f8f8ff", gold: "#ffd700", goldenrod: "#daa520", gainsboro: "#dcdcdc", gray: "#808080", green: "#008000", honeydew: "#f0fff0", floralwhite: "#fffaf0", lightblue: "#add8e6", lightcoral: "#f08080", lemonchiffon: "#fffacd", hotpink: "#ff69b4", lightyellow: "#ffffe0", greenyellow: "#adff2f", lightgoldenrodyellow: "#fafad2", limegreen: "#32cd32", linen: "#faf0e6", lightcyan: "#e0ffff", magenta: "#f0f", maroon: "#800000", olive: "#808000", orange: "#ffa500", oldlace: "#fdf5e6", mediumblue: "#0000cd", transparent: "#0000", lime: "#0f0", lightpink: "#ffb6c1", mistyrose: "#ffe4e1", moccasin: "#ffe4b5", midnightblue: "#191970", orchid: "#da70d6", mediumorchid: "#ba55d3", mediumturquoise: "#48d1cc", orangered: "#ff4500", royalblue: "#4169e1", powderblue: "#b0e0e6", red: "#f00", coral: "#ff7f50", turquoise: "#40e0d0", white: "#fff", whitesmoke: "#f5f5f5", wheat: "#f5deb3", teal: "#008080", steelblue: "#4682b4", bisque: "#ffe4c4", aquamarine: "#7fffd4", aqua: "#0ff", sienna: "#a0522d", silver: "#c0c0c0", springgreen: "#00ff7f", antiquewhite: "#faebd7", burlywood: "#deb887", brown: "#a52a2a", beige: "#f5f5dc", chocolate: "#d2691e", chartreuse: "#7fff00", cornflowerblue: "#6495ed", cornsilk: "#fff8dc", crimson: "#dc143c", cadetblue: "#5f9ea0", tomato: "#ff6347", fuchsia: "#f0f", blue: "#00f", salmon: "#fa8072", blanchedalmond: "#ffebcd", slateblue: "#6a5acd", slategray: "#708090", thistle: "#d8bfd8", tan: "#d2b48c", cyan: "#0ff", darkblue: "#00008b", darkcyan: "#008b8b", darkgoldenrod: "#b8860b", darkgray: "#a9a9a9", blueviolet: "#8a2be2", black: "#000", darkmagenta: "#8b008b", darkslateblue: "#483d8b", darkkhaki: "#bdb76b", darkorchid: "#9932cc", darkorange: "#ff8c00", darkgreen: "#006400", darkred: "#8b0000", dodgerblue: "#1e90ff", darkslategray: "#2f4f4f", dimgray: "#696969", deepskyblue: "#00bfff", firebrick: "#b22222", forestgreen: "#228b22", indigo: "#4b0082", ivory: "#fffff0", lavenderblush: "#fff0f5", feldspar: "#d19275", indianred: "#cd5c5c", lightgreen: "#90ee90", lightgrey: "#d3d3d3", lightskyblue: "#87cefa", lightslategray: "#789", lightslateblue: "#8470ff", snow: "#fffafa", lightseagreen: "#20b2aa", lightsalmon: "#ffa07a", darksalmon: "#e9967a", darkviolet: "#9400d3", mediumpurple: "#9370d8", mediumaquamarine: "#66cdaa", skyblue: "#87ceeb", lavender: "#e6e6fa", lightsteelblue: "#b0c4de", mediumvioletred: "#c71585", mintcream: "#f5fffa", navajowhite: "#ffdead", navy: "#000080", olivedrab: "#6b8e23", palevioletred: "#d87093", violetred: "#d02090", yellow: "#ff0", yellowgreen: "#9acd32", lawngreen: "#7cfc00", pink: "#ffc0cb", paleturquoise: "#afeeee", palegoldenrod: "#eee8aa", darkolivegreen: "#556b2f", darkseagreen: "#8fbc8f", darkturquoise: "#00ced1", peachpuff: "#ffdab9", deeppink: "#ff1493", violet: "#ee82ee", palegreen: "#98fb98", mediumseagreen: "#3cb371", peru: "#cd853f", saddlebrown: "#8b4513", sandybrown: "#f4a460", rosybrown: "#bc8f8f", purple: "#800080", seagreen: "#2e8b57", seashell: "#fff5ee", papayawhip: "#ffefd5", mediumslateblue: "#7b68ee", plum: "#dda0dd", mediumspringgreen: "#00fa9a" };
function l(t) {
  return t < 0 ? 0 : t > 255 ? 255 : Math.round(t) || 0;
}
function f(t) {
  return t <= 0 || t > 0 ? t < 0 ? 0 : t > 1 ? 1 : Math.round(1e4 * t) / 1e4 : 0;
}
var c = /^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i;
var v = /^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;
var _ = /^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/;
var d = /^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;
function w(t) {
  var i2;
  if ((t = t.toLowerCase()) in o && (t = o[t]), i2 = d.exec(t) || _.exec(t))
    return [l(parseInt(i2[1], 10)), l(parseInt(i2[2], 10)), l(parseInt(i2[3], 10)), f(i2.length < 5 ? 1 : parseFloat(i2[4]))];
  if (i2 = v.exec(t))
    return [l(parseInt(i2[1], 16)), l(parseInt(i2[2], 16)), l(parseInt(i2[3], 16)), 1];
  if (i2 = c.exec(t))
    return [l(17 * parseInt(i2[1], 16)), l(17 * parseInt(i2[2], 16)), l(17 * parseInt(i2[3], 16)), 1];
  throw new Error("Cannot parse color: ".concat(t));
}
function M(t) {
  var i2, n2 = w(t);
  return { t: "rgb(".concat(n2[0], ", ").concat(n2[1], ", ").concat(n2[2], ")"), i: (i2 = n2, 0.199 * i2[0] + 0.687 * i2[1] + 0.114 * i2[2] > 160 ? "black" : "white") };
}
var b = function(t, i2) {
  return b = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t2, i3) {
    t2.__proto__ = i3;
  } || function(t2, i3) {
    for (var n2 in i3)
      Object.prototype.hasOwnProperty.call(i3, n2) && (t2[n2] = i3[n2]);
  }, b(t, i2);
};
function m(t, i2) {
  if ("function" != typeof i2 && null !== i2)
    throw new TypeError("Class extends value " + String(i2) + " is not a constructor or null");
  function n2() {
    this.constructor = t;
  }
  b(t, i2), t.prototype = null === i2 ? Object.create(i2) : (n2.prototype = i2.prototype, new n2());
}
var p = function() {
  return p = Object.assign || function(t) {
    for (var i2, n2 = 1, s2 = arguments.length; n2 < s2; n2++)
      for (var h2 in i2 = arguments[n2])
        Object.prototype.hasOwnProperty.call(i2, h2) && (t[h2] = i2[h2]);
    return t;
  }, p.apply(this, arguments);
};
function g(t, i2, n2) {
  if (n2 || 2 === arguments.length)
    for (var s2, h2 = 0, r2 = i2.length; h2 < r2; h2++)
      !s2 && h2 in i2 || (s2 || (s2 = Array.prototype.slice.call(i2, 0, h2)), s2[h2] = i2[h2]);
  return t.concat(s2 || Array.prototype.slice.call(i2));
}
var y = function() {
  function t() {
    this.h = [];
  }
  return t.prototype.u = function(t2, i2, n2) {
    var s2 = { o: t2, l: i2, v: true === n2 };
    this.h.push(s2);
  }, t.prototype._ = function(t2) {
    var i2 = this.h.findIndex(function(i3) {
      return t2 === i3.o;
    });
    i2 > -1 && this.h.splice(i2, 1);
  }, t.prototype.M = function(t2) {
    this.h = this.h.filter(function(i2) {
      return i2.l !== t2;
    });
  }, t.prototype.m = function(t2, i2) {
    var n2 = g([], this.h, true);
    this.h = this.h.filter(function(t3) {
      return !t3.v;
    }), n2.forEach(function(n3) {
      return n3.o(t2, i2);
    });
  }, t.prototype.p = function() {
    return this.h.length > 0;
  }, t.prototype.g = function() {
    this.h = [];
  }, t;
}();
function k(t) {
  for (var i2 = [], n2 = 1; n2 < arguments.length; n2++)
    i2[n2 - 1] = arguments[n2];
  for (var s2 = 0, h2 = i2; s2 < h2.length; s2++) {
    var r2 = h2[s2];
    for (var e2 in r2)
      void 0 !== r2[e2] && ("object" != typeof r2[e2] || void 0 === t[e2] ? t[e2] = r2[e2] : k(t[e2], r2[e2]));
  }
  return t;
}
function N(t) {
  return "number" == typeof t && isFinite(t);
}
function x(t) {
  return "number" == typeof t && t % 1 == 0;
}
function C(t) {
  return "string" == typeof t;
}
function S(t) {
  return "boolean" == typeof t;
}
function T(t) {
  var i2, n2, s2, h2 = t;
  if (!h2 || "object" != typeof h2)
    return h2;
  for (n2 in i2 = Array.isArray(h2) ? [] : {}, h2)
    h2.hasOwnProperty(n2) && (s2 = h2[n2], i2[n2] = s2 && "object" == typeof s2 ? T(s2) : s2);
  return i2;
}
function D(t) {
  return null !== t;
}
function A(t) {
  return null === t ? void 0 : t;
}
var B = "'Trebuchet MS', Roboto, Ubuntu, sans-serif";
function L(t, i2, n2) {
  return n2 = void 0 !== n2 ? "".concat(n2, " ") : "", void 0 === i2 && (i2 = B), "".concat(n2).concat(t, "px ").concat(i2);
}
var E = function() {
  function t(t2) {
    this.k = { N: 1, C: 4, S: NaN, T: "", D: "", A: "", B: 0, L: 0, F: 0, O: 0, V: 0 }, this.P = t2;
  }
  return t.prototype.W = function() {
    var t2 = this.k, i2 = this.R(), n2 = this.I();
    return t2.S === i2 && t2.D === n2 || (t2.S = i2, t2.D = n2, t2.T = L(i2, n2), t2.O = Math.floor(i2 / 3.5), t2.B = t2.O, t2.L = Math.max(Math.ceil(i2 / 2 - t2.C / 2), 0), t2.F = Math.ceil(i2 / 2 + t2.C / 2), t2.V = Math.round(i2 / 10)), t2.A = this.j(), this.k;
  }, t.prototype.j = function() {
    return this.P.W().layout.textColor;
  }, t.prototype.R = function() {
    return this.P.W().layout.fontSize;
  }, t.prototype.I = function() {
    return this.P.W().layout.fontFamily;
  }, t;
}();
var F = function() {
  function t() {
    this.q = [];
  }
  return t.prototype.U = function(t2) {
    this.q = t2;
  }, t.prototype.H = function(t2, i2, n2, s2) {
    this.q.forEach(function(h2) {
      t2.save(), h2.H(t2, i2, n2, s2), t2.restore();
    });
  }, t;
}();
var O = function() {
  function t() {
  }
  return t.prototype.H = function(t2, i2, n2, s2) {
    t2.save(), t2.scale(i2, i2), this.Y(t2, n2, s2), t2.restore();
  }, t.prototype.$ = function(t2, i2, n2, s2) {
    t2.save(), t2.scale(i2, i2), this.K(t2, n2, s2), t2.restore();
  }, t.prototype.K = function(t2, i2, n2) {
  }, t;
}();
var V = function(t) {
  function i2() {
    var i3 = null !== t && t.apply(this, arguments) || this;
    return i3.X = null, i3;
  }
  return m(i2, t), i2.prototype.Z = function(t2) {
    this.X = t2;
  }, i2.prototype.Y = function(t2) {
    if (null !== this.X && null !== this.X.J) {
      var i3 = this.X.J, n2 = this.X, s2 = function(s3) {
        t2.beginPath();
        for (var h2 = i3.to - 1; h2 >= i3.from; --h2) {
          var r2 = n2.G[h2];
          t2.moveTo(r2.tt, r2.it), t2.arc(r2.tt, r2.it, s3, 0, 2 * Math.PI);
        }
        t2.fill();
      };
      t2.fillStyle = n2.nt, s2(n2.st + 2), t2.fillStyle = n2.ht, s2(n2.st);
    }
  }, i2;
}(O);
function P() {
  return { G: [{ tt: 0, it: 0, rt: 0, et: 0 }], ht: "", nt: "", st: 0, J: null };
}
var W = { from: 0, to: 1 };
var z = function() {
  function t(t2, i2) {
    this.ut = new F(), this.ot = [], this.lt = [], this.ft = true, this.P = t2, this.ct = i2, this.ut.U(this.ot);
  }
  return t.prototype.vt = function(t2) {
    var i2 = this.P._t();
    i2.length !== this.ot.length && (this.lt = i2.map(P), this.ot = this.lt.map(function(t3) {
      var i3 = new V();
      return i3.Z(t3), i3;
    }), this.ut.U(this.ot)), this.ft = true;
  }, t.prototype.dt = function(t2, i2, n2) {
    return this.ft && (this.wt(t2), this.ft = false), this.ut;
  }, t.prototype.wt = function(t2) {
    var i2 = this, n2 = this.P._t(), s2 = this.ct.Mt(), h2 = this.P.bt();
    n2.forEach(function(n3, r2) {
      var e2, a2 = i2.lt[r2], o2 = n3.gt(s2);
      if (null !== o2 && n3.yt()) {
        var l2 = u(n3.kt());
        a2.ht = o2.Nt, a2.st = o2.st, a2.G[0].et = o2.et, a2.G[0].it = n3.Ct().xt(o2.et, l2.St), a2.nt = null !== (e2 = o2.Tt) && void 0 !== e2 ? e2 : i2.P.Dt(a2.G[0].it / t2), a2.G[0].rt = s2, a2.G[0].tt = h2.At(s2), a2.J = W;
      } else
        a2.J = null;
    });
  }, t;
}();
var R = function() {
  function t(t2) {
    this.Bt = t2;
  }
  return t.prototype.H = function(t2, i2, n2, r2) {
    if (null !== this.Bt) {
      var e2 = this.Bt.Lt.yt, u2 = this.Bt.Et.yt;
      if (e2 || u2) {
        t2.save();
        var a2 = Math.round(this.Bt.tt * i2), o2 = Math.round(this.Bt.it * i2), l2 = Math.ceil(this.Bt.Ft * i2), f2 = Math.ceil(this.Bt.Ot * i2);
        t2.lineCap = "butt", e2 && a2 >= 0 && (t2.lineWidth = Math.floor(this.Bt.Lt.Vt * i2), t2.strokeStyle = this.Bt.Lt.A, t2.fillStyle = this.Bt.Lt.A, s(t2, this.Bt.Lt.Pt), function(t3, i3, n3, s2) {
          t3.beginPath();
          var h2 = t3.lineWidth % 2 ? 0.5 : 0;
          t3.moveTo(i3 + h2, n3), t3.lineTo(i3 + h2, s2), t3.stroke();
        }(t2, a2, 0, f2)), u2 && o2 >= 0 && (t2.lineWidth = Math.floor(this.Bt.Et.Vt * i2), t2.strokeStyle = this.Bt.Et.A, t2.fillStyle = this.Bt.Et.A, s(t2, this.Bt.Et.Pt), h(t2, o2, 0, l2)), t2.restore();
      }
    }
  }, t;
}();
var I = function() {
  function t(t2) {
    this.ft = true, this.Wt = { Lt: { Vt: 1, Pt: 0, A: "", yt: false }, Et: { Vt: 1, Pt: 0, A: "", yt: false }, Ft: 0, Ot: 0, tt: 0, it: 0 }, this.zt = new R(this.Wt), this.Rt = t2;
  }
  return t.prototype.vt = function() {
    this.ft = true;
  }, t.prototype.dt = function(t2, i2) {
    return this.ft && (this.wt(), this.ft = false), this.zt;
  }, t.prototype.wt = function() {
    var t2 = this.Rt.yt(), i2 = u(this.Rt.It()), n2 = i2.jt().W().crosshair, s2 = this.Wt;
    s2.Et.yt = t2 && this.Rt.qt(i2), s2.Lt.yt = t2 && this.Rt.Ut(), s2.Et.Vt = n2.horzLine.width, s2.Et.Pt = n2.horzLine.style, s2.Et.A = n2.horzLine.color, s2.Lt.Vt = n2.vertLine.width, s2.Lt.Pt = n2.vertLine.style, s2.Lt.A = n2.vertLine.color, s2.Ft = i2.Ht(), s2.Ot = i2.Yt(), s2.tt = this.Rt.$t(), s2.it = this.Rt.Kt();
  }, t;
}();
function j(t, i2, n2, s2, h2, r2) {
  t.fillRect(i2 + r2, n2, s2 - 2 * r2, r2), t.fillRect(i2 + r2, n2 + h2 - r2, s2 - 2 * r2, r2), t.fillRect(i2, n2, r2, h2), t.fillRect(i2 + s2 - r2, n2, r2, h2);
}
function q(t, i2, n2) {
  t.save(), t.scale(i2, i2), n2(), t.restore();
}
function U(t, i2, n2, s2, h2, r2) {
  t.save(), t.globalCompositeOperation = "copy", t.fillStyle = r2, t.fillRect(i2, n2, s2, h2), t.restore();
}
function H(t, i2, n2, s2, h2, r2, e2) {
  t.save(), t.globalCompositeOperation = "copy";
  var u2 = t.createLinearGradient(0, 0, 0, h2);
  u2.addColorStop(0, r2), u2.addColorStop(1, e2), t.fillStyle = u2, t.fillRect(i2, n2, s2, h2), t.restore();
}
var Y;
var $ = function() {
  function t(t2, i2) {
    this.Z(t2, i2);
  }
  return t.prototype.Z = function(t2, i2) {
    this.Bt = t2, this.Xt = i2;
  }, t.prototype.H = function(t2, i2, n2, s2, h2, r2) {
    if (this.Bt.yt) {
      t2.font = i2.T;
      var e2 = this.Bt.Zt || !this.Bt.Jt ? i2.C : 0, u2 = i2.N, a2 = i2.O, o2 = i2.B, l2 = i2.L, f2 = i2.F, c2 = this.Bt.Gt, v2 = Math.ceil(n2.Qt(t2, c2)), _2 = i2.V, d2 = i2.S + a2 + o2, w2 = Math.ceil(0.5 * d2), M2 = u2 + v2 + l2 + f2 + e2, b2 = this.Xt.ti;
      this.Xt.ii && (b2 = this.Xt.ii);
      var m2, p2, g2 = (b2 = Math.round(b2)) - w2, y2 = g2 + d2, k2 = "right" === h2, N2 = k2 ? s2 : 0, x2 = Math.ceil(s2 * r2), C2 = N2;
      if (t2.fillStyle = this.Xt.t, t2.lineWidth = 1, t2.lineCap = "butt", c2) {
        k2 ? (m2 = N2 - e2, p2 = (C2 = N2 - M2) + f2) : (C2 = N2 + M2, m2 = N2 + e2, p2 = N2 + u2 + e2 + l2);
        var S2 = Math.max(1, Math.floor(r2)), T2 = Math.max(1, Math.floor(u2 * r2)), D2 = k2 ? x2 : 0, A2 = Math.round(g2 * r2), B2 = Math.round(C2 * r2), L2 = Math.round(b2 * r2) - Math.floor(0.5 * r2), E2 = L2 + S2 + (L2 - A2), F2 = Math.round(m2 * r2);
        t2.save(), t2.beginPath(), t2.moveTo(D2, A2), t2.lineTo(B2, A2), t2.lineTo(B2, E2), t2.lineTo(D2, E2), t2.fill(), t2.fillStyle = this.Bt.Tt, t2.fillRect(k2 ? x2 - T2 : 0, A2, T2, E2 - A2), this.Bt.Zt && (t2.fillStyle = this.Xt.A, t2.fillRect(D2, L2, F2 - D2, S2)), t2.textAlign = "left", t2.fillStyle = this.Xt.A, q(t2, r2, function() {
          t2.fillText(c2, p2, y2 - o2 - _2);
        }), t2.restore();
      }
    }
  }, t.prototype.Yt = function(t2, i2) {
    return this.Bt.yt ? t2.S + t2.O + t2.B : 0;
  }, t;
}();
var K = function() {
  function t(t2) {
    this.ni = { ti: 0, A: "#FFF", t: "#000" }, this.si = { Gt: "", yt: false, Zt: true, Jt: false, Tt: "" }, this.hi = { Gt: "", yt: false, Zt: false, Jt: true, Tt: "" }, this.ft = true, this.ri = new (t2 || $)(this.si, this.ni), this.ei = new (t2 || $)(this.hi, this.ni);
  }
  return t.prototype.Gt = function() {
    return this.ui(), this.si.Gt;
  }, t.prototype.ti = function() {
    return this.ui(), this.ni.ti;
  }, t.prototype.vt = function() {
    this.ft = true;
  }, t.prototype.Yt = function(t2, i2) {
    return void 0 === i2 && (i2 = false), Math.max(this.ri.Yt(t2, i2), this.ei.Yt(t2, i2));
  }, t.prototype.ai = function() {
    return this.ni.ii || 0;
  }, t.prototype.oi = function(t2) {
    this.ni.ii = t2;
  }, t.prototype.li = function() {
    return this.ui(), this.si.yt || this.hi.yt;
  }, t.prototype.fi = function() {
    return this.ui(), this.si.yt;
  }, t.prototype.dt = function(t2) {
    return this.ui(), this.si.Zt = this.si.Zt && t2.W().drawTicks, this.hi.Zt = this.hi.Zt && t2.W().drawTicks, this.ri.Z(this.si, this.ni), this.ei.Z(this.hi, this.ni), this.ri;
  }, t.prototype.ci = function() {
    return this.ui(), this.ri.Z(this.si, this.ni), this.ei.Z(this.hi, this.ni), this.ei;
  }, t.prototype.ui = function() {
    this.ft && (this.si.Zt = true, this.hi.Zt = false, this.vi(this.si, this.hi, this.ni));
  }, t;
}();
var X = function(t) {
  function i2(i3, n2, s2) {
    var h2 = t.call(this) || this;
    return h2.Rt = i3, h2._i = n2, h2.di = s2, h2;
  }
  return m(i2, t), i2.prototype.vi = function(t2, i3, n2) {
    t2.yt = false;
    var s2 = this.Rt.W().horzLine;
    if (s2.labelVisible) {
      var h2 = this._i.kt();
      if (this.Rt.yt() && !this._i.wi() && null !== h2) {
        var r2 = M(s2.labelBackgroundColor);
        n2.t = r2.t, n2.A = r2.i;
        var e2 = this.di(this._i);
        n2.ti = e2.ti, t2.Gt = this._i.Mi(e2.et, h2), t2.yt = true;
      }
    }
  }, i2;
}(K);
var Z = /[1-9]/g;
var J = function() {
  function t() {
    this.Bt = null;
  }
  return t.prototype.Z = function(t2) {
    this.Bt = t2;
  }, t.prototype.H = function(t2, i2, n2) {
    var s2 = this;
    if (null !== this.Bt && false !== this.Bt.yt && 0 !== this.Bt.Gt.length) {
      t2.font = i2.T;
      var h2 = Math.round(i2.bi.Qt(t2, this.Bt.Gt, Z));
      if (!(h2 <= 0)) {
        t2.save();
        var r2 = i2.mi, e2 = h2 + 2 * r2, a2 = e2 / 2, o2 = this.Bt.Ht, l2 = this.Bt.ti, f2 = Math.floor(l2 - a2) + 0.5;
        f2 < 0 ? (l2 += Math.abs(0 - f2), f2 = Math.floor(l2 - a2) + 0.5) : f2 + e2 > o2 && (l2 -= Math.abs(o2 - (f2 + e2)), f2 = Math.floor(l2 - a2) + 0.5);
        var c2 = f2 + e2, v2 = 0 + i2.N + i2.O + i2.S + i2.B;
        t2.fillStyle = this.Bt.t;
        var _2 = Math.round(f2 * n2), d2 = Math.round(0 * n2), w2 = Math.round(c2 * n2), M2 = Math.round(v2 * n2);
        t2.fillRect(_2, d2, w2 - _2, M2 - d2);
        var b2 = Math.round(this.Bt.ti * n2), m2 = d2, p2 = Math.round((m2 + i2.N + i2.C) * n2);
        t2.fillStyle = this.Bt.A;
        var g2 = Math.max(1, Math.floor(n2)), y2 = Math.floor(0.5 * n2);
        t2.fillRect(b2 - y2, m2, g2, p2 - m2);
        var k2 = v2 - i2.V - i2.B;
        t2.textAlign = "left", t2.fillStyle = this.Bt.A, q(t2, n2, function() {
          t2.fillText(u(s2.Bt).Gt, f2 + r2, k2);
        }), t2.restore();
      }
    }
  }, t;
}();
var G = function() {
  function t(t2, i2, n2) {
    this.ft = true, this.zt = new J(), this.Wt = { yt: false, t: "#4c525e", A: "white", Gt: "", Ht: 0, ti: NaN }, this.ct = t2, this.pi = i2, this.di = n2;
  }
  return t.prototype.vt = function() {
    this.ft = true;
  }, t.prototype.dt = function() {
    return this.ft && (this.wt(), this.ft = false), this.zt.Z(this.Wt), this.zt;
  }, t.prototype.wt = function() {
    var t2 = this.Wt;
    t2.yt = false;
    var i2 = this.ct.W().vertLine;
    if (i2.labelVisible) {
      var n2 = this.pi.bt();
      if (!n2.wi()) {
        var s2 = n2.gi(this.ct.Mt());
        t2.Ht = n2.Ht();
        var h2 = this.di();
        if (h2.rt) {
          t2.ti = h2.ti, t2.Gt = n2.yi(u(s2)), t2.yt = true;
          var r2 = M(i2.labelBackgroundColor);
          t2.t = r2.t, t2.A = r2.i;
        }
      }
    }
  }, t;
}();
var Q = function() {
  function t() {
    this.ki = null, this.Ni = 0;
  }
  return t.prototype.xi = function() {
    return this.Ni;
  }, t.prototype.Ci = function(t2) {
    this.Ni = t2;
  }, t.prototype.Ct = function() {
    return this.ki;
  }, t.prototype.Si = function(t2) {
    this.ki = t2;
  }, t.prototype.Ti = function() {
    return [];
  }, t.prototype.yt = function() {
    return true;
  }, t;
}();
!function(t) {
  t[t.Normal = 0] = "Normal", t[t.Magnet = 1] = "Magnet";
}(Y || (Y = {}));
var tt = function(t) {
  function i2(i3, n2) {
    var s2 = t.call(this) || this;
    s2.Di = null, s2.Ai = NaN, s2.Bi = 0, s2.Li = true, s2.Ei = /* @__PURE__ */ new Map(), s2.Fi = false, s2.Oi = NaN, s2.Vi = NaN, s2.Pi = NaN, s2.Wi = NaN, s2.pi = i3, s2.zi = n2, s2.Ri = new z(i3, s2);
    var h2, r2;
    s2.Ii = (h2 = function() {
      return s2.Ai;
    }, r2 = function() {
      return s2.Vi;
    }, function(t2) {
      var i4 = r2(), n3 = h2();
      if (t2 === u(s2.Di).ji())
        return { et: n3, ti: i4 };
      var e3 = u(t2.kt());
      return { et: t2.qi(i4, e3), ti: i4 };
    });
    var e2 = function(t2, i4) {
      return function() {
        return { rt: s2.pi.bt().gi(t2()), ti: i4() };
      };
    }(function() {
      return s2.Bi;
    }, function() {
      return s2.$t();
    });
    return s2.Ui = new G(s2, i3, e2), s2.Hi = new I(s2), s2;
  }
  return m(i2, t), i2.prototype.W = function() {
    return this.zi;
  }, i2.prototype.Yi = function(t2, i3) {
    this.Pi = t2, this.Wi = i3;
  }, i2.prototype.$i = function() {
    this.Pi = NaN, this.Wi = NaN;
  }, i2.prototype.Ki = function() {
    return this.Pi;
  }, i2.prototype.Xi = function() {
    return this.Wi;
  }, i2.prototype.Zi = function(t2, i3, n2) {
    this.Fi || (this.Fi = true), this.Li = true, this.Ji(t2, i3, n2);
  }, i2.prototype.Mt = function() {
    return this.Bi;
  }, i2.prototype.$t = function() {
    return this.Oi;
  }, i2.prototype.Kt = function() {
    return this.Vi;
  }, i2.prototype.yt = function() {
    return this.Li;
  }, i2.prototype.Gi = function() {
    this.Li = false, this.Qi(), this.Ai = NaN, this.Oi = NaN, this.Vi = NaN, this.Di = null, this.$i();
  }, i2.prototype.tn = function(t2) {
    return null !== this.Di ? [this.Hi, this.Ri] : [];
  }, i2.prototype.qt = function(t2) {
    return t2 === this.Di && this.zi.horzLine.visible;
  }, i2.prototype.Ut = function() {
    return this.zi.vertLine.visible;
  }, i2.prototype.nn = function(t2, i3) {
    this.Li && this.Di === t2 || this.Ei.clear();
    var n2 = [];
    return this.Di === t2 && n2.push(this.sn(this.Ei, i3, this.Ii)), n2;
  }, i2.prototype.Ti = function() {
    return this.Li ? [this.Ui] : [];
  }, i2.prototype.It = function() {
    return this.Di;
  }, i2.prototype.hn = function() {
    this.Hi.vt(), this.Ei.forEach(function(t2) {
      return t2.vt();
    }), this.Ui.vt(), this.Ri.vt();
  }, i2.prototype.rn = function(t2) {
    return t2 && !t2.ji().wi() ? t2.ji() : null;
  }, i2.prototype.Ji = function(t2, i3, n2) {
    this.en(t2, i3, n2) && this.hn();
  }, i2.prototype.en = function(t2, i3, n2) {
    var s2 = this.Oi, h2 = this.Vi, r2 = this.Ai, e2 = this.Bi, u2 = this.Di, a2 = this.rn(n2);
    this.Bi = t2, this.Oi = isNaN(t2) ? NaN : this.pi.bt().At(t2), this.Di = n2;
    var o2 = null !== a2 ? a2.kt() : null;
    return null !== a2 && null !== o2 ? (this.Ai = i3, this.Vi = a2.xt(i3, o2)) : (this.Ai = NaN, this.Vi = NaN), s2 !== this.Oi || h2 !== this.Vi || e2 !== this.Bi || r2 !== this.Ai || u2 !== this.Di;
  }, i2.prototype.Qi = function() {
    var t2 = this.pi._t().map(function(t3) {
      return t3.an().un();
    }).filter(D), i3 = 0 === t2.length ? null : Math.max.apply(Math, t2);
    this.Bi = null !== i3 ? i3 : NaN;
  }, i2.prototype.sn = function(t2, i3, n2) {
    var s2 = t2.get(i3);
    return void 0 === s2 && (s2 = new X(this, i3, n2), t2.set(i3, s2)), s2;
  }, i2;
}(Q);
function it(t) {
  return "left" === t || "right" === t;
}
var nt = function() {
  function t(t2) {
    this.on = /* @__PURE__ */ new Map(), this.ln = [], this.fn = t2;
  }
  return t.prototype.cn = function(t2, i2) {
    var n2 = function(t3, i3) {
      return void 0 === t3 ? i3 : { vn: Math.max(t3.vn, i3.vn), _n: t3._n || i3._n };
    }(this.on.get(t2), i2);
    this.on.set(t2, n2);
  }, t.prototype.dn = function() {
    return this.fn;
  }, t.prototype.wn = function(t2) {
    var i2 = this.on.get(t2);
    return void 0 === i2 ? { vn: this.fn } : { vn: Math.max(this.fn, i2.vn), _n: i2._n };
  }, t.prototype.Mn = function() {
    this.ln = [{ bn: 0 }];
  }, t.prototype.mn = function(t2) {
    this.ln = [{ bn: 1, St: t2 }];
  }, t.prototype.pn = function() {
    this.ln = [{ bn: 4 }];
  }, t.prototype.gn = function(t2) {
    this.ln.push({ bn: 2, St: t2 });
  }, t.prototype.yn = function(t2) {
    this.ln.push({ bn: 3, St: t2 });
  }, t.prototype.kn = function() {
    return this.ln;
  }, t.prototype.Nn = function(t2) {
    for (var i2 = this, n2 = 0, s2 = t2.ln; n2 < s2.length; n2++) {
      var h2 = s2[n2];
      this.xn(h2);
    }
    this.fn = Math.max(this.fn, t2.fn), t2.on.forEach(function(t3, n3) {
      i2.cn(n3, t3);
    });
  }, t.prototype.xn = function(t2) {
    switch (t2.bn) {
      case 0:
        this.Mn();
        break;
      case 1:
        this.mn(t2.St);
        break;
      case 2:
        this.gn(t2.St);
        break;
      case 3:
        this.yn(t2.St);
        break;
      case 4:
        this.pn();
    }
  }, t;
}();
var st = ".";
function ht(t, i2) {
  if (!N(t))
    return "n/a";
  if (!x(i2))
    throw new TypeError("invalid length");
  if (i2 < 0 || i2 > 16)
    throw new TypeError("invalid length");
  if (0 === i2)
    return t.toString();
  return ("0000000000000000" + t.toString()).slice(-i2);
}
var rt = function() {
  function t(t2, i2) {
    if (i2 || (i2 = 1), N(t2) && x(t2) || (t2 = 100), t2 < 0)
      throw new TypeError("invalid base");
    this._i = t2, this.Cn = i2, this.Sn();
  }
  return t.prototype.format = function(t2) {
    var i2 = t2 < 0 ? "âˆ’" : "";
    return t2 = Math.abs(t2), i2 + this.Tn(t2);
  }, t.prototype.Sn = function() {
    if (this.Dn = 0, this._i > 0 && this.Cn > 0)
      for (var t2 = this._i; t2 > 1; )
        t2 /= 10, this.Dn++;
  }, t.prototype.Tn = function(t2) {
    var i2 = this._i / this.Cn, n2 = Math.floor(t2), s2 = "", h2 = void 0 !== this.Dn ? this.Dn : NaN;
    if (i2 > 1) {
      var r2 = +(Math.round(t2 * i2) - n2 * i2).toFixed(this.Dn);
      r2 >= i2 && (r2 -= i2, n2 += 1), s2 = st + ht(+r2.toFixed(this.Dn) * this.Cn, h2);
    } else
      n2 = Math.round(n2 * i2) / i2, h2 > 0 && (s2 = st + ht(0, h2));
    return n2.toFixed(0) + s2;
  }, t;
}();
var et = function(t) {
  function i2(i3) {
    return void 0 === i3 && (i3 = 100), t.call(this, i3) || this;
  }
  return m(i2, t), i2.prototype.format = function(i3) {
    return "".concat(t.prototype.format.call(this, i3), "%");
  }, i2;
}(rt);
var ut = function() {
  function t(t2) {
    this.An = t2;
  }
  return t.prototype.format = function(t2) {
    var i2 = "";
    return t2 < 0 && (i2 = "-", t2 = -t2), t2 < 995 ? i2 + this.Bn(t2) : t2 < 999995 ? i2 + this.Bn(t2 / 1e3) + "K" : t2 < 999999995 ? (t2 = 1e3 * Math.round(t2 / 1e3), i2 + this.Bn(t2 / 1e6) + "M") : (t2 = 1e6 * Math.round(t2 / 1e6), i2 + this.Bn(t2 / 1e9) + "B");
  }, t.prototype.Bn = function(t2) {
    var i2 = Math.pow(10, this.An);
    return ((t2 = Math.round(t2 * i2) / i2) >= 1e-15 && t2 < 1 ? t2.toFixed(this.An).replace(/\.?0+$/, "") : String(t2)).replace(/(\.[1-9]*)0+$/, function(t3, i3) {
      return i3;
    });
  }, t;
}();
function at(t, i2, n2, s2) {
  if (0 !== i2.length) {
    var h2 = i2[s2.from].tt, r2 = i2[s2.from].it;
    t.moveTo(h2, r2);
    for (var e2 = s2.from + 1; e2 < s2.to; ++e2) {
      var u2 = i2[e2];
      if (1 === n2) {
        var a2 = i2[e2 - 1].it, o2 = u2.tt;
        t.lineTo(o2, a2);
      }
      t.lineTo(u2.tt, u2.it);
    }
  }
}
var ot = function(t) {
  function i2() {
    var i3 = null !== t && t.apply(this, arguments) || this;
    return i3.X = null, i3;
  }
  return m(i2, t), i2.prototype.Z = function(t2) {
    this.X = t2;
  }, i2.prototype.Y = function(t2) {
    if (null !== this.X && 0 !== this.X.G.length && null !== this.X.J) {
      if (t2.lineCap = "butt", t2.lineJoin = "round", t2.lineWidth = this.X.Vt, s(t2, this.X.Pt), t2.lineWidth = 1, t2.beginPath(), 1 === this.X.G.length) {
        var i3 = this.X.G[0], n2 = this.X.Ln / 2;
        t2.moveTo(i3.tt - n2, this.X.En), t2.lineTo(i3.tt - n2, i3.it), t2.lineTo(i3.tt + n2, i3.it), t2.lineTo(i3.tt + n2, this.X.En);
      } else
        t2.moveTo(this.X.G[this.X.J.from].tt, this.X.En), t2.lineTo(this.X.G[this.X.J.from].tt, this.X.G[this.X.J.from].it), at(t2, this.X.G, this.X.Fn, this.X.J), this.X.J.to > this.X.J.from && (t2.lineTo(this.X.G[this.X.J.to - 1].tt, this.X.En), t2.lineTo(this.X.G[this.X.J.from].tt, this.X.En));
      t2.closePath(), t2.fillStyle = this.On(t2), t2.fill();
    }
  }, i2;
}(O);
var lt = function(t) {
  function i2() {
    return null !== t && t.apply(this, arguments) || this;
  }
  return m(i2, t), i2.prototype.On = function(t2) {
    var i3 = this.X, n2 = t2.createLinearGradient(0, 0, 0, i3.Vn);
    return n2.addColorStop(0, i3.Pn), n2.addColorStop(1, i3.Wn), n2;
  }, i2;
}(ot);
var ft = function(t) {
  function i2() {
    var i3 = null !== t && t.apply(this, arguments) || this;
    return i3.X = null, i3;
  }
  return m(i2, t), i2.prototype.Z = function(t2) {
    this.X = t2;
  }, i2.prototype.Y = function(t2) {
    if (null !== this.X && 0 !== this.X.G.length && null !== this.X.J)
      if (t2.lineCap = "butt", t2.lineWidth = this.X.Vt, s(t2, this.X.Pt), t2.strokeStyle = this.zn(t2), t2.lineJoin = "round", 1 === this.X.G.length) {
        t2.beginPath();
        var i3 = this.X.G[0];
        t2.moveTo(i3.tt - this.X.Ln / 2, i3.it), t2.lineTo(i3.tt + this.X.Ln / 2, i3.it), void 0 !== i3.A && (t2.strokeStyle = i3.A), t2.stroke();
      } else
        this.Rn(t2, this.X);
  }, i2.prototype.Rn = function(t2, i3) {
    t2.beginPath(), at(t2, i3.G, i3.Fn, i3.J), t2.stroke();
  }, i2;
}(O);
var ct = function(t) {
  function i2() {
    return null !== t && t.apply(this, arguments) || this;
  }
  return m(i2, t), i2.prototype.Rn = function(t2, i3) {
    var n2, s2, h2 = i3.G, r2 = i3.J, e2 = i3.Fn, u2 = i3.ht;
    if (0 !== h2.length && null !== r2) {
      t2.beginPath();
      var a2 = h2[r2.from];
      t2.moveTo(a2.tt, a2.it);
      var o2 = null !== (n2 = a2.A) && void 0 !== n2 ? n2 : u2;
      t2.strokeStyle = o2;
      for (var l2 = function(i4) {
        t2.stroke(), t2.beginPath(), t2.strokeStyle = i4, o2 = i4;
      }, f2 = r2.from + 1; f2 < r2.to; ++f2) {
        var c2 = h2[f2], v2 = h2[f2 - 1], _2 = null !== (s2 = c2.A) && void 0 !== s2 ? s2 : u2;
        1 === e2 && (t2.lineTo(c2.tt, v2.it), _2 !== o2 && (l2(_2), t2.moveTo(c2.tt, v2.it))), t2.lineTo(c2.tt, c2.it), 1 !== e2 && _2 !== o2 && (l2(_2), t2.moveTo(c2.tt, c2.it));
      }
      t2.stroke();
    }
  }, i2.prototype.zn = function() {
    return this.X.ht;
  }, i2;
}(ft);
function vt(t, i2, n2, s2, h2) {
  void 0 === s2 && (s2 = 0), void 0 === h2 && (h2 = t.length);
  for (var r2 = h2 - s2; 0 < r2; ) {
    var e2 = r2 >> 1, u2 = s2 + e2;
    n2(t[u2], i2) ? (s2 = u2 + 1, r2 -= e2 + 1) : r2 = e2;
  }
  return s2;
}
function _t(t, i2, n2, s2, h2) {
  void 0 === s2 && (s2 = 0), void 0 === h2 && (h2 = t.length);
  for (var r2 = h2 - s2; 0 < r2; ) {
    var e2 = r2 >> 1, u2 = s2 + e2;
    n2(i2, t[u2]) ? r2 = e2 : (s2 = u2 + 1, r2 -= e2 + 1);
  }
  return s2;
}
function dt(t, i2) {
  return t.rt < i2;
}
function wt(t, i2) {
  return t < i2.rt;
}
function Mt(t, i2, n2) {
  var s2 = i2.In(), h2 = i2.jn(), r2 = vt(t, s2, dt), e2 = _t(t, h2, wt);
  if (!n2)
    return { from: r2, to: e2 };
  var u2 = r2, a2 = e2;
  return r2 > 0 && r2 < t.length && t[r2].rt >= s2 && (u2 = r2 - 1), e2 > 0 && e2 < t.length && t[e2 - 1].rt <= h2 && (a2 = e2 + 1), { from: u2, to: a2 };
}
var bt = function() {
  function t(t2, i2, n2) {
    this.qn = true, this.Un = true, this.Hn = true, this.Yn = [], this.$n = null, this.Kn = t2, this.Xn = i2, this.Zn = n2;
  }
  return t.prototype.vt = function(t2) {
    this.qn = true, "data" === t2 && (this.Un = true), "options" === t2 && (this.Hn = true);
  }, t.prototype.Jn = function() {
    this.Un && (this.Gn(), this.Un = false), this.qn && (this.Qn(), this.qn = false), this.Hn && (this.ts(), this.Hn = false);
  }, t.prototype.ns = function() {
    this.$n = null;
  }, t.prototype.Qn = function() {
    var t2 = this.Kn.Ct(), i2 = this.Xn.bt();
    if (this.ns(), !i2.wi() && !t2.wi()) {
      var n2 = i2.ss();
      if (null !== n2 && 0 !== this.Kn.an().hs()) {
        var s2 = this.Kn.kt();
        null !== s2 && (this.$n = Mt(this.Yn, n2, this.Zn), this.rs(t2, i2, s2.St));
      }
    }
  }, t;
}();
var mt = function(t) {
  function i2(i3, n2) {
    return t.call(this, i3, n2, true) || this;
  }
  return m(i2, t), i2.prototype.rs = function(t2, i3, n2) {
    i3.es(this.Yn, A(this.$n)), t2.us(this.Yn, n2, A(this.$n));
  }, i2.prototype.os = function(t2, i3) {
    return { rt: t2, et: i3, tt: NaN, it: NaN };
  }, i2.prototype.ts = function() {
  }, i2.prototype.Gn = function() {
    var t2 = this, i3 = this.Kn.ls();
    this.Yn = this.Kn.an().fs().map(function(n2) {
      var s2 = n2.St[3];
      return t2.cs(n2.vs, s2, i3);
    });
  }, i2;
}(bt);
var pt = function(t) {
  function i2(i3, n2) {
    var s2 = t.call(this, i3, n2) || this;
    return s2.zt = new F(), s2._s = new lt(), s2.ds = new ct(), s2.zt.U([s2._s, s2.ds]), s2;
  }
  return m(i2, t), i2.prototype.dt = function(t2, i3) {
    if (!this.Kn.yt())
      return null;
    var n2 = this.Kn.W();
    return this.Jn(), this._s.Z({ Fn: n2.lineType, G: this.Yn, Pt: n2.lineStyle, Vt: n2.lineWidth, Pn: n2.topColor, Wn: n2.bottomColor, En: t2, Vn: t2, J: this.$n, Ln: this.Xn.bt().ws() }), this.ds.Z({ Fn: n2.lineType, G: this.Yn, ht: n2.lineColor, Pt: n2.lineStyle, Vt: n2.lineWidth, J: this.$n, Ln: this.Xn.bt().ws() }), this.zt;
  }, i2.prototype.cs = function(t2, i3) {
    return this.os(t2, i3);
  }, i2;
}(mt);
var gt = function() {
  function t() {
    this.Bt = null, this.Ms = 0, this.bs = 0;
  }
  return t.prototype.Z = function(t2) {
    this.Bt = t2;
  }, t.prototype.H = function(t2, i2, n2, s2) {
    if (null !== this.Bt && 0 !== this.Bt.an.length && null !== this.Bt.J) {
      if (this.Ms = this.ps(i2), this.Ms >= 2)
        Math.max(1, Math.floor(i2)) % 2 != this.Ms % 2 && this.Ms--;
      this.bs = this.Bt.gs ? Math.min(this.Ms, Math.floor(i2)) : this.Ms;
      for (var h2 = null, r2 = this.bs <= this.Ms && this.Bt.ws >= Math.floor(1.5 * i2), e2 = this.Bt.J.from; e2 < this.Bt.J.to; ++e2) {
        var u2 = this.Bt.an[e2];
        h2 !== u2.A && (t2.fillStyle = u2.A, h2 = u2.A);
        var a2 = Math.floor(0.5 * this.bs), o2 = Math.round(u2.tt * i2), l2 = o2 - a2, f2 = this.bs, c2 = l2 + f2 - 1, v2 = Math.min(u2.ys, u2.ks), _2 = Math.max(u2.ys, u2.ks), d2 = Math.round(v2 * i2) - a2, w2 = Math.round(_2 * i2) + a2, M2 = Math.max(w2 - d2, this.bs);
        t2.fillRect(l2, d2, f2, M2);
        var b2 = Math.ceil(1.5 * this.Ms);
        if (r2) {
          if (this.Bt.Ns) {
            var m2 = o2 - b2, p2 = Math.max(d2, Math.round(u2.xs * i2) - a2), g2 = p2 + f2 - 1;
            g2 > d2 + M2 - 1 && (p2 = (g2 = d2 + M2 - 1) - f2 + 1), t2.fillRect(m2, p2, l2 - m2, g2 - p2 + 1);
          }
          var y2 = o2 + b2, k2 = Math.max(d2, Math.round(u2.Cs * i2) - a2), N2 = k2 + f2 - 1;
          N2 > d2 + M2 - 1 && (k2 = (N2 = d2 + M2 - 1) - f2 + 1), t2.fillRect(c2 + 1, k2, y2 - c2, N2 - k2 + 1);
        }
      }
    }
  }, t.prototype.ps = function(t2) {
    var i2 = Math.floor(t2);
    return Math.max(i2, Math.floor(function(t3, i3) {
      return Math.floor(0.3 * t3 * i3);
    }(u(this.Bt).ws, t2)));
  }, t;
}();
var yt = function(t) {
  function i2(i3, n2) {
    return t.call(this, i3, n2, false) || this;
  }
  return m(i2, t), i2.prototype.rs = function(t2, i3, n2) {
    i3.es(this.Yn, A(this.$n)), t2.Ss(this.Yn, n2, A(this.$n));
  }, i2.prototype.Ts = function(t2, i3, n2) {
    return { rt: t2, open: i3.St[0], high: i3.St[1], low: i3.St[2], close: i3.St[3], tt: NaN, xs: NaN, ys: NaN, ks: NaN, Cs: NaN };
  }, i2.prototype.Gn = function() {
    var t2 = this, i3 = this.Kn.ls();
    this.Yn = this.Kn.an().fs().map(function(n2) {
      return t2.cs(n2.vs, n2, i3);
    });
  }, i2;
}(bt);
var kt = function(t) {
  function i2() {
    var i3 = null !== t && t.apply(this, arguments) || this;
    return i3.zt = new gt(), i3;
  }
  return m(i2, t), i2.prototype.dt = function(t2, i3) {
    if (!this.Kn.yt())
      return null;
    var n2 = this.Kn.W();
    this.Jn();
    var s2 = { an: this.Yn, ws: this.Xn.bt().ws(), Ns: n2.openVisible, gs: n2.thinBars, J: this.$n };
    return this.zt.Z(s2), this.zt;
  }, i2.prototype.ts = function() {
    var t2 = this;
    this.Yn.forEach(function(i3) {
      i3.A = t2.Kn.ls().As(i3.rt).Ds;
    });
  }, i2.prototype.cs = function(t2, i3, n2) {
    return p(p({}, this.Ts(t2, i3, n2)), { A: n2.As(t2).Ds });
  }, i2;
}(yt);
function Nt(t, i2, n2) {
  return Math.min(Math.max(t, i2), n2);
}
function xt(t, i2, n2) {
  return i2 - t <= n2;
}
function Ct(t) {
  return t <= 0 ? NaN : Math.log(t) / Math.log(10);
}
function St(t) {
  var i2 = Math.ceil(t);
  return i2 % 2 != 0 ? i2 - 1 : i2;
}
function Tt(t) {
  var i2 = Math.ceil(t);
  return i2 % 2 == 0 ? i2 - 1 : i2;
}
var Dt = function(t) {
  function i2() {
    return null !== t && t.apply(this, arguments) || this;
  }
  return m(i2, t), i2.prototype.On = function(t2) {
    var i3 = this.X, n2 = t2.createLinearGradient(0, 0, 0, i3.Vn), s2 = Nt(i3.En / i3.Vn, 0, 1);
    return n2.addColorStop(0, i3.Bs), n2.addColorStop(s2, i3.Ls), n2.addColorStop(s2, i3.Es), n2.addColorStop(1, i3.Fs), n2;
  }, i2;
}(ot);
var At = function(t) {
  function i2() {
    return null !== t && t.apply(this, arguments) || this;
  }
  return m(i2, t), i2.prototype.zn = function(t2) {
    var i3 = this.X, n2 = t2.createLinearGradient(0, 0, 0, i3.Vn), s2 = Nt(i3.En / i3.Vn, 0, 1);
    return n2.addColorStop(0, i3.Pn), n2.addColorStop(s2, i3.Pn), n2.addColorStop(s2, i3.Wn), n2.addColorStop(1, i3.Wn), n2;
  }, i2;
}(ft);
var Bt = function(t) {
  function i2(i3, n2) {
    var s2 = t.call(this, i3, n2) || this;
    return s2.Os = new Dt(), s2.Vs = new At(), s2.ut = new F(), s2.ut.U([s2.Os, s2.Vs]), s2;
  }
  return m(i2, t), i2.prototype.dt = function(t2, i3) {
    if (!this.Kn.yt())
      return null;
    var n2 = this.Kn.kt();
    if (null === n2)
      return null;
    var s2 = this.Kn.W();
    this.Jn();
    var h2 = this.Kn.Ct().xt(s2.baseValue.price, n2.St), r2 = this.Xn.bt().ws();
    return this.Os.Z({ G: this.Yn, Bs: s2.topFillColor1, Ls: s2.topFillColor2, Es: s2.bottomFillColor1, Fs: s2.bottomFillColor2, Vt: s2.lineWidth, Pt: s2.lineStyle, Fn: 0, En: h2, Vn: t2, J: this.$n, Ln: r2 }), this.Vs.Z({ G: this.Yn, Pn: s2.topLineColor, Wn: s2.bottomLineColor, Vt: s2.lineWidth, Pt: s2.lineStyle, Fn: 0, En: h2, Vn: t2, J: this.$n, Ln: r2 }), this.ut;
  }, i2.prototype.cs = function(t2, i3) {
    return this.os(t2, i3);
  }, i2;
}(mt);
var Lt = function() {
  function t() {
    this.Bt = null, this.Ms = 0;
  }
  return t.prototype.Z = function(t2) {
    this.Bt = t2;
  }, t.prototype.H = function(t2, i2, n2, s2) {
    if (null !== this.Bt && 0 !== this.Bt.an.length && null !== this.Bt.J) {
      if (this.Ms = function(t3, i3) {
        if (t3 >= 2.5 && t3 <= 4)
          return Math.floor(3 * i3);
        var n3 = 1 - 0.2 * Math.atan(Math.max(4, t3) - 4) / (0.5 * Math.PI), s3 = Math.floor(t3 * n3 * i3), h3 = Math.floor(t3 * i3), r3 = Math.min(s3, h3);
        return Math.max(Math.floor(i3), r3);
      }(this.Bt.ws, i2), this.Ms >= 2)
        Math.floor(i2) % 2 != this.Ms % 2 && this.Ms--;
      var h2 = this.Bt.an;
      this.Bt.Ps && this.Ws(t2, h2, this.Bt.J, i2), this.Bt.zs && this.Rs(t2, h2, this.Bt.J, this.Bt.ws, i2);
      var r2 = this.Is(i2);
      (!this.Bt.zs || this.Ms > 2 * r2) && this.js(t2, h2, this.Bt.J, i2);
    }
  }, t.prototype.Ws = function(t2, i2, n2, s2) {
    if (null !== this.Bt) {
      var h2 = "", r2 = Math.min(Math.floor(s2), Math.floor(this.Bt.ws * s2));
      r2 = Math.max(Math.floor(s2), Math.min(r2, this.Ms));
      for (var e2 = Math.floor(0.5 * r2), u2 = null, a2 = n2.from; a2 < n2.to; a2++) {
        var o2 = i2[a2];
        o2.qs !== h2 && (t2.fillStyle = o2.qs, h2 = o2.qs);
        var l2 = Math.round(Math.min(o2.xs, o2.Cs) * s2), f2 = Math.round(Math.max(o2.xs, o2.Cs) * s2), c2 = Math.round(o2.ys * s2), v2 = Math.round(o2.ks * s2), _2 = Math.round(s2 * o2.tt) - e2, d2 = _2 + r2 - 1;
        null !== u2 && (_2 = Math.max(u2 + 1, _2), _2 = Math.min(_2, d2));
        var w2 = d2 - _2 + 1;
        t2.fillRect(_2, c2, w2, l2 - c2), t2.fillRect(_2, f2 + 1, w2, v2 - f2), u2 = d2;
      }
    }
  }, t.prototype.Is = function(t2) {
    var i2 = Math.floor(1 * t2);
    this.Ms <= 2 * i2 && (i2 = Math.floor(0.5 * (this.Ms - 1)));
    var n2 = Math.max(Math.floor(t2), i2);
    return this.Ms <= 2 * n2 ? Math.max(Math.floor(t2), Math.floor(1 * t2)) : n2;
  }, t.prototype.Rs = function(t2, i2, n2, s2, h2) {
    if (null !== this.Bt)
      for (var r2 = "", e2 = this.Is(h2), u2 = null, a2 = n2.from; a2 < n2.to; a2++) {
        var o2 = i2[a2];
        o2.Tt !== r2 && (t2.fillStyle = o2.Tt, r2 = o2.Tt);
        var l2 = Math.round(o2.tt * h2) - Math.floor(0.5 * this.Ms), f2 = l2 + this.Ms - 1, c2 = Math.round(Math.min(o2.xs, o2.Cs) * h2), v2 = Math.round(Math.max(o2.xs, o2.Cs) * h2);
        if (null !== u2 && (l2 = Math.max(u2 + 1, l2), l2 = Math.min(l2, f2)), this.Bt.ws * h2 > 2 * e2)
          j(t2, l2, c2, f2 - l2 + 1, v2 - c2 + 1, e2);
        else {
          var _2 = f2 - l2 + 1;
          t2.fillRect(l2, c2, _2, v2 - c2 + 1);
        }
        u2 = f2;
      }
  }, t.prototype.js = function(t2, i2, n2, s2) {
    if (null !== this.Bt)
      for (var h2 = "", r2 = this.Is(s2), e2 = n2.from; e2 < n2.to; e2++) {
        var u2 = i2[e2], a2 = Math.round(Math.min(u2.xs, u2.Cs) * s2), o2 = Math.round(Math.max(u2.xs, u2.Cs) * s2), l2 = Math.round(u2.tt * s2) - Math.floor(0.5 * this.Ms), f2 = l2 + this.Ms - 1;
        if (u2.A !== h2) {
          var c2 = u2.A;
          t2.fillStyle = c2, h2 = c2;
        }
        this.Bt.zs && (l2 += r2, a2 += r2, f2 -= r2, o2 -= r2), a2 > o2 || t2.fillRect(l2, a2, f2 - l2 + 1, o2 - a2 + 1);
      }
  }, t;
}();
var Et = function(t) {
  function i2() {
    var i3 = null !== t && t.apply(this, arguments) || this;
    return i3.zt = new Lt(), i3;
  }
  return m(i2, t), i2.prototype.dt = function(t2, i3) {
    if (!this.Kn.yt())
      return null;
    var n2 = this.Kn.W();
    this.Jn();
    var s2 = { an: this.Yn, ws: this.Xn.bt().ws(), Ps: n2.wickVisible, zs: n2.borderVisible, J: this.$n };
    return this.zt.Z(s2), this.zt;
  }, i2.prototype.ts = function() {
    var t2 = this;
    this.Yn.forEach(function(i3) {
      var n2 = t2.Kn.ls().As(i3.rt);
      i3.A = n2.Ds, i3.qs = n2.Us, i3.Tt = n2.Hs;
    });
  }, i2.prototype.cs = function(t2, i3, n2) {
    var s2 = n2.As(t2);
    return p(p({}, this.Ts(t2, i3, n2)), { A: s2.Ds, qs: s2.Us, Tt: s2.Hs });
  }, i2;
}(yt);
var Ft = function() {
  function t() {
    this.Bt = null, this.Ys = [];
  }
  return t.prototype.Z = function(t2) {
    this.Bt = t2, this.Ys = [];
  }, t.prototype.H = function(t2, i2, n2, s2) {
    if (null !== this.Bt && 0 !== this.Bt.G.length && null !== this.Bt.J) {
      this.Ys.length || this.$s(i2);
      for (var h2 = Math.max(1, Math.floor(i2)), r2 = Math.round(this.Bt.Ks * i2) - Math.floor(h2 / 2), e2 = r2 + h2, u2 = this.Bt.J.from; u2 < this.Bt.J.to; u2++) {
        var a2 = this.Bt.G[u2], o2 = this.Ys[u2 - this.Bt.J.from], l2 = Math.round(a2.it * i2);
        t2.fillStyle = a2.A;
        var f2 = void 0, c2 = void 0;
        l2 <= r2 ? (f2 = l2, c2 = e2) : (f2 = r2, c2 = l2 - Math.floor(h2 / 2) + h2), t2.fillRect(o2.In, f2, o2.jn - o2.In + 1, c2 - f2);
      }
    }
  }, t.prototype.$s = function(t2) {
    if (null !== this.Bt && 0 !== this.Bt.G.length && null !== this.Bt.J) {
      var i2 = Math.ceil(this.Bt.ws * t2) <= 1 ? 0 : Math.max(1, Math.floor(t2)), n2 = Math.round(this.Bt.ws * t2) - i2;
      this.Ys = new Array(this.Bt.J.to - this.Bt.J.from);
      for (var s2 = this.Bt.J.from; s2 < this.Bt.J.to; s2++) {
        var h2, r2 = this.Bt.G[s2], e2 = Math.round(r2.tt * t2), u2 = void 0, a2 = void 0;
        if (n2 % 2)
          u2 = e2 - (h2 = (n2 - 1) / 2), a2 = e2 + h2;
        else
          u2 = e2 - (h2 = n2 / 2), a2 = e2 + h2 - 1;
        this.Ys[s2 - this.Bt.J.from] = { In: u2, jn: a2, Xs: e2, Zs: r2.tt * t2, rt: r2.rt };
      }
      for (s2 = this.Bt.J.from + 1; s2 < this.Bt.J.to; s2++) {
        var o2 = this.Ys[s2 - this.Bt.J.from], l2 = this.Ys[s2 - this.Bt.J.from - 1];
        o2.rt === l2.rt + 1 && (o2.In - l2.jn !== i2 + 1 && (l2.Xs > l2.Zs ? l2.jn = o2.In - i2 - 1 : o2.In = l2.jn + i2 + 1));
      }
      var f2 = Math.ceil(this.Bt.ws * t2);
      for (s2 = this.Bt.J.from; s2 < this.Bt.J.to; s2++) {
        (o2 = this.Ys[s2 - this.Bt.J.from]).jn < o2.In && (o2.jn = o2.In);
        var c2 = o2.jn - o2.In + 1;
        f2 = Math.min(c2, f2);
      }
      if (i2 > 0 && f2 < 4)
        for (s2 = this.Bt.J.from; s2 < this.Bt.J.to; s2++) {
          (c2 = (o2 = this.Ys[s2 - this.Bt.J.from]).jn - o2.In + 1) > f2 && (o2.Xs > o2.Zs ? o2.jn -= 1 : o2.In += 1);
        }
    } else
      this.Ys = [];
  }, t;
}();
function Ot(t) {
  return { G: [], ws: t, Ks: NaN, J: null };
}
function Vt(t, i2, n2) {
  return { rt: t, et: i2, tt: NaN, it: NaN, A: n2 };
}
var Pt = function(t) {
  function i2(i3, n2) {
    var s2 = t.call(this, i3, n2, false) || this;
    return s2.ut = new F(), s2.Js = Ot(0), s2.zt = new Ft(), s2;
  }
  return m(i2, t), i2.prototype.dt = function(t2, i3) {
    return this.Kn.yt() ? (this.Jn(), this.ut) : null;
  }, i2.prototype.Gn = function() {
    var t2 = this.Xn.bt().ws();
    this.Js = Ot(t2);
    for (var i3 = 0, n2 = 0, s2 = this.Kn.W().color, h2 = 0, r2 = this.Kn.an().fs(); h2 < r2.length; h2++) {
      var e2 = r2[h2], u2 = e2.St[3], a2 = void 0 !== e2.A ? e2.A : s2, o2 = Vt(e2.vs, u2, a2);
      ++i3 < this.Js.G.length ? this.Js.G[i3] = o2 : this.Js.G.push(o2), this.Yn[n2++] = { rt: e2.vs, tt: 0 };
    }
    this.zt.Z(this.Js), this.ut.U([this.zt]);
  }, i2.prototype.ts = function() {
  }, i2.prototype.ns = function() {
    t.prototype.ns.call(this), this.Js.J = null;
  }, i2.prototype.rs = function(t2, i3, n2) {
    if (null !== this.$n) {
      var s2 = i3.ws(), h2 = u(i3.ss()), r2 = t2.xt(this.Kn.W().base, n2);
      i3.es(this.Js.G), t2.us(this.Js.G, n2), this.Js.Ks = r2, this.Js.J = Mt(this.Js.G, h2, false), this.Js.ws = s2, this.zt.Z(this.Js);
    }
  }, i2;
}(bt);
var Wt = function(t) {
  function i2(i3, n2) {
    var s2 = t.call(this, i3, n2) || this;
    return s2.ds = new ct(), s2;
  }
  return m(i2, t), i2.prototype.dt = function(t2, i3) {
    if (!this.Kn.yt())
      return null;
    var n2 = this.Kn.W();
    this.Jn();
    var s2 = { G: this.Yn, ht: n2.color, Pt: n2.lineStyle, Fn: n2.lineType, Vt: n2.lineWidth, J: this.$n, Ln: this.Xn.bt().ws() };
    return this.ds.Z(s2), this.ds;
  }, i2.prototype.ts = function() {
    var t2 = this;
    this.Yn.forEach(function(i3) {
      i3.A = t2.Kn.ls().As(i3.rt).Ds;
    });
  }, i2.prototype.cs = function(t2, i3, n2) {
    var s2 = this.os(t2, i3);
    return s2.A = n2.As(t2).Ds, s2;
  }, i2;
}(mt);
var zt = /[2-9]/g;
var Rt = function() {
  function t(t2) {
    void 0 === t2 && (t2 = 50), this.Gs = /* @__PURE__ */ new Map(), this.Qs = 0, this.th = Array.from(new Array(t2));
  }
  return t.prototype.ih = function() {
    this.Gs.clear(), this.th.fill(void 0);
  }, t.prototype.Qt = function(t2, i2, n2) {
    var s2 = n2 || zt, h2 = String(i2).replace(s2, "0"), r2 = this.Gs.get(h2);
    if (void 0 === r2) {
      if (0 === (r2 = t2.measureText(h2).width) && 0 !== i2.length)
        return 0;
      var e2 = this.th[this.Qs];
      void 0 !== e2 && this.Gs.delete(e2), this.th[this.Qs] = h2, this.Qs = (this.Qs + 1) % this.th.length, this.Gs.set(h2, r2);
    }
    return r2;
  }, t;
}();
var It = function() {
  function t(t2) {
    this.nh = null, this.k = null, this.sh = "right", this.hh = 0, this.rh = t2;
  }
  return t.prototype.eh = function(t2, i2, n2, s2) {
    this.nh = t2, this.k = i2, this.hh = n2, this.sh = s2;
  }, t.prototype.H = function(t2, i2) {
    null !== this.k && null !== this.nh && this.nh.H(t2, this.k, this.rh, this.hh, this.sh, i2);
  }, t;
}();
var jt = function() {
  function t(t2, i2, n2) {
    this.uh = t2, this.rh = new Rt(50), this.ah = i2, this.P = n2, this.R = -1, this.zt = new It(this.rh);
  }
  return t.prototype.dt = function(t2, i2) {
    var n2 = this.P.oh(this.ah);
    if (null === n2)
      return null;
    var s2 = n2.lh(this.ah) ? n2.fh() : this.ah.Ct();
    if (null === s2)
      return null;
    var h2 = n2._h(s2);
    if ("overlay" === h2)
      return null;
    var r2 = this.P.dh();
    return r2.S !== this.R && (this.R = r2.S, this.rh.ih()), this.zt.eh(this.uh.ci(), r2, i2, h2), this.zt;
  }, t;
}();
var qt = function() {
  function t() {
    this.Bt = null;
  }
  return t.prototype.Z = function(t2) {
    this.Bt = t2;
  }, t.prototype.H = function(t2, i2, n2, r2) {
    if (null !== this.Bt && false !== this.Bt.yt) {
      var e2 = Math.round(this.Bt.it * i2);
      if (!(e2 < 0 || e2 > Math.ceil(this.Bt.Yt * i2))) {
        var u2 = Math.ceil(this.Bt.Ht * i2);
        t2.lineCap = "butt", t2.strokeStyle = this.Bt.A, t2.lineWidth = Math.floor(this.Bt.Vt * i2), s(t2, this.Bt.Pt), h(t2, e2, 0, u2);
      }
    }
  }, t;
}();
var Ut = function() {
  function t(t2) {
    this.wh = { Ht: 0, Yt: 0, it: 0, A: "rgba(0, 0, 0, 0)", Vt: 1, Pt: 0, yt: false }, this.Mh = new qt(), this.ft = true, this.Kn = t2, this.Xn = t2.jt(), this.Mh.Z(this.wh);
  }
  return t.prototype.vt = function() {
    this.ft = true;
  }, t.prototype.dt = function(t2, i2) {
    return this.Kn.yt() ? (this.ft && (this.bh(t2, i2), this.ft = false), this.Mh) : null;
  }, t;
}();
var Ht = function(t) {
  function i2(i3) {
    return t.call(this, i3) || this;
  }
  return m(i2, t), i2.prototype.bh = function(t2, i3) {
    this.wh.yt = false;
    var n2 = this.Kn.Ct(), s2 = n2.mh().mh;
    if (2 === s2 || 3 === s2) {
      var h2 = this.Kn.W();
      if (h2.baseLineVisible && this.Kn.yt()) {
        var r2 = this.Kn.kt();
        null !== r2 && (this.wh.yt = true, this.wh.it = n2.xt(r2.St, r2.St), this.wh.Ht = i3, this.wh.Yt = t2, this.wh.A = h2.baseLineColor, this.wh.Vt = h2.baseLineWidth, this.wh.Pt = h2.baseLineStyle);
      }
    }
  }, i2;
}(Ut);
var Yt = function() {
  function t() {
    this.Bt = null;
  }
  return t.prototype.Z = function(t2) {
    this.Bt = t2;
  }, t.prototype.ph = function() {
    return this.Bt;
  }, t.prototype.H = function(t2, i2, n2, s2) {
    var h2 = this.Bt;
    if (null !== h2) {
      t2.save();
      var r2 = Math.max(1, Math.floor(i2)), e2 = r2 % 2 / 2, u2 = Math.round(h2.Zs.x * i2) + e2, a2 = h2.Zs.y * i2;
      t2.fillStyle = h2.gh, t2.beginPath();
      var o2 = Math.max(2, 1.5 * h2.yh) * i2;
      t2.arc(u2, a2, o2, 0, 2 * Math.PI, false), t2.fill(), t2.fillStyle = h2.kh, t2.beginPath(), t2.arc(u2, a2, h2.st * i2, 0, 2 * Math.PI, false), t2.fill(), t2.lineWidth = r2, t2.strokeStyle = h2.Nh, t2.beginPath(), t2.arc(u2, a2, h2.st * i2 + r2 / 2, 0, 2 * Math.PI, false), t2.stroke(), t2.restore();
    }
  }, t;
}();
var $t = [{ xh: 0, Ch: 0.25, Sh: 4, Th: 10, Dh: 0.25, Ah: 0, Bh: 0.4, Lh: 0.8 }, { xh: 0.25, Ch: 0.525, Sh: 10, Th: 14, Dh: 0, Ah: 0, Bh: 0.8, Lh: 0 }, { xh: 0.525, Ch: 1, Sh: 14, Th: 14, Dh: 0, Ah: 0, Bh: 0, Lh: 0 }];
function Kt(t, i2, n2, s2) {
  return function(t2, i3) {
    if ("transparent" === t2)
      return t2;
    var n3 = w(t2), s3 = n3[3];
    return "rgba(".concat(n3[0], ", ").concat(n3[1], ", ").concat(n3[2], ", ").concat(i3 * s3, ")");
  }(t, n2 + (s2 - n2) * i2);
}
function Xt(t, i2) {
  for (var n2, s2 = t % 2600 / 2600, h2 = 0, e2 = $t; h2 < e2.length; h2++) {
    var u2 = e2[h2];
    if (s2 >= u2.xh && s2 <= u2.Ch) {
      n2 = u2;
      break;
    }
  }
  r(void 0 !== n2, "Last price animation internal logic error");
  var a2, o2, l2, f2 = (s2 - n2.xh) / (n2.Ch - n2.xh);
  return { kh: Kt(i2, f2, n2.Dh, n2.Ah), Nh: Kt(i2, f2, n2.Bh, n2.Lh), st: (a2 = f2, o2 = n2.Sh, l2 = n2.Th, o2 + (l2 - o2) * a2) };
}
var Zt = function() {
  function t(t2) {
    this.zt = new Yt(), this.ft = true, this.Eh = true, this.Fh = performance.now(), this.Oh = this.Fh - 1, this.Vh = t2;
  }
  return t.prototype.Ph = function() {
    this.Oh = this.Fh - 1, this.vt();
  }, t.prototype.Wh = function() {
    if (this.vt(), 2 === this.Vh.W().lastPriceAnimation) {
      var t2 = performance.now(), i2 = this.Oh - t2;
      if (i2 > 0)
        return void (i2 < 650 && (this.Oh += 2600));
      this.Fh = t2, this.Oh = t2 + 2600;
    }
  }, t.prototype.vt = function() {
    this.ft = true;
  }, t.prototype.zh = function() {
    this.Eh = true;
  }, t.prototype.yt = function() {
    return 0 !== this.Vh.W().lastPriceAnimation;
  }, t.prototype.Rh = function() {
    switch (this.Vh.W().lastPriceAnimation) {
      case 0:
        return false;
      case 1:
        return true;
      case 2:
        return performance.now() <= this.Oh;
    }
  }, t.prototype.dt = function(t2, i2) {
    return this.ft ? (this.wt(t2, i2), this.ft = false, this.Eh = false) : this.Eh && (this.Ih(), this.Eh = false), this.zt;
  }, t.prototype.wt = function(t2, i2) {
    this.zt.Z(null);
    var n2 = this.Vh.jt().bt(), s2 = n2.ss(), h2 = this.Vh.kt();
    if (null !== s2 && null !== h2) {
      var r2 = this.Vh.jh(true);
      if (!r2.qh && s2.Uh(r2.vs)) {
        var e2 = { x: n2.At(r2.vs), y: this.Vh.Ct().xt(r2.et, h2.St) }, u2 = r2.A, a2 = this.Vh.W().lineWidth, o2 = Xt(this.Hh(), u2);
        this.zt.Z({ gh: u2, yh: a2, kh: o2.kh, Nh: o2.Nh, st: o2.st, Zs: e2 });
      }
    }
  }, t.prototype.Ih = function() {
    var t2 = this.zt.ph();
    if (null !== t2) {
      var i2 = Xt(this.Hh(), t2.gh);
      t2.kh = i2.kh, t2.Nh = i2.Nh, t2.st = i2.st;
    }
  }, t.prototype.Hh = function() {
    return this.Rh() ? performance.now() - this.Fh : 2599;
  }, t;
}();
function Jt(t, i2) {
  return Tt(Math.min(Math.max(t, 12), 30) * i2);
}
function Gt(t, i2) {
  switch (t) {
    case "arrowDown":
    case "arrowUp":
      return Jt(i2, 1);
    case "circle":
      return Jt(i2, 0.8);
    case "square":
      return Jt(i2, 0.7);
  }
}
function Qt(t) {
  return St(Jt(t, 1));
}
function ti(t) {
  return Math.max(Jt(t, 0.1), 3);
}
function ii(t, i2, n2, s2, h2) {
  var r2 = Gt("square", n2), e2 = (r2 - 1) / 2, u2 = t - e2, a2 = i2 - e2;
  return s2 >= u2 && s2 <= u2 + r2 && h2 >= a2 && h2 <= a2 + r2;
}
function ni(t, i2, n2, s2, h2) {
  var r2 = (Gt("arrowUp", h2) - 1) / 2, e2 = (Tt(h2 / 2) - 1) / 2;
  i2.beginPath(), t ? (i2.moveTo(n2 - r2, s2), i2.lineTo(n2, s2 - r2), i2.lineTo(n2 + r2, s2), i2.lineTo(n2 + e2, s2), i2.lineTo(n2 + e2, s2 + r2), i2.lineTo(n2 - e2, s2 + r2), i2.lineTo(n2 - e2, s2)) : (i2.moveTo(n2 - r2, s2), i2.lineTo(n2, s2 + r2), i2.lineTo(n2 + r2, s2), i2.lineTo(n2 + e2, s2), i2.lineTo(n2 + e2, s2 - r2), i2.lineTo(n2 - e2, s2 - r2), i2.lineTo(n2 - e2, s2)), i2.fill();
}
function si(t, i2, n2, s2, h2, r2) {
  return ii(i2, n2, s2, h2, r2);
}
var hi = function(t) {
  function i2() {
    var i3 = null !== t && t.apply(this, arguments) || this;
    return i3.Bt = null, i3.rh = new Rt(), i3.R = -1, i3.I = "", i3.Yh = "", i3;
  }
  return m(i2, t), i2.prototype.Z = function(t2) {
    this.Bt = t2;
  }, i2.prototype.eh = function(t2, i3) {
    this.R === t2 && this.I === i3 || (this.R = t2, this.I = i3, this.Yh = L(t2, i3), this.rh.ih());
  }, i2.prototype.$h = function(t2, i3) {
    if (null === this.Bt || null === this.Bt.J)
      return null;
    for (var n2 = this.Bt.J.from; n2 < this.Bt.J.to; n2++) {
      var s2 = this.Bt.G[n2];
      if (ei(s2, t2, i3))
        return { Kh: s2.Xh, Zh: s2.Zh };
    }
    return null;
  }, i2.prototype.Y = function(t2, i3, n2) {
    if (null !== this.Bt && null !== this.Bt.J) {
      t2.textBaseline = "middle", t2.font = this.Yh;
      for (var s2 = this.Bt.J.from; s2 < this.Bt.J.to; s2++) {
        var h2 = this.Bt.G[s2];
        void 0 !== h2.Gt && (h2.Gt.Ht = this.rh.Qt(t2, h2.Gt.Jh), h2.Gt.Yt = this.R), ri(h2, t2);
      }
    }
  }, i2;
}(O);
function ri(t, i2) {
  i2.fillStyle = t.A, void 0 !== t.Gt && function(t2, i3, n2, s2) {
    t2.fillText(i3, n2, s2);
  }(i2, t.Gt.Jh, t.tt - t.Gt.Ht / 2, t.Gt.it), function(t2, i3) {
    if (0 === t2.hs)
      return;
    switch (t2.Gh) {
      case "arrowDown":
        return void ni(false, i3, t2.tt, t2.it, t2.hs);
      case "arrowUp":
        return void ni(true, i3, t2.tt, t2.it, t2.hs);
      case "circle":
        return void function(t3, i4, n2, s2) {
          var h2 = (Gt("circle", s2) - 1) / 2;
          t3.beginPath(), t3.arc(i4, n2, h2, 0, 2 * Math.PI, false), t3.fill();
        }(i3, t2.tt, t2.it, t2.hs);
      case "square":
        return void function(t3, i4, n2, s2) {
          var h2 = Gt("square", s2), r2 = (h2 - 1) / 2, e2 = i4 - r2, u2 = n2 - r2;
          t3.fillRect(e2, u2, h2, h2);
        }(i3, t2.tt, t2.it, t2.hs);
    }
    t2.Gh;
  }(t, i2);
}
function ei(t, i2, n2) {
  return !(void 0 === t.Gt || !function(t2, i3, n3, s2, h2, r2) {
    var e2 = s2 / 2;
    return h2 >= t2 && h2 <= t2 + n3 && r2 >= i3 - e2 && r2 <= i3 + e2;
  }(t.tt, t.Gt.it, t.Gt.Ht, t.Gt.Yt, i2, n2)) || function(t2, i3, n3) {
    if (0 === t2.hs)
      return false;
    switch (t2.Gh) {
      case "arrowDown":
      case "arrowUp":
        return si(0, t2.tt, t2.it, t2.hs, i3, n3);
      case "circle":
        return function(t3, i4, n4, s2, h2) {
          var r2 = 2 + Gt("circle", n4) / 2, e2 = t3 - s2, u2 = i4 - h2;
          return Math.sqrt(e2 * e2 + u2 * u2) <= r2;
        }(t2.tt, t2.it, t2.hs, i3, n3);
      case "square":
        return ii(t2.tt, t2.it, t2.hs, i3, n3);
    }
  }(t, i2, n2);
}
function ui(t, i2, n2, s2, h2, r2, e2, u2, a2) {
  var o2 = N(n2) ? n2 : n2.close, l2 = N(n2) ? n2 : n2.high, f2 = N(n2) ? n2 : n2.low, c2 = N(i2.size) ? Math.max(i2.size, 0) : 1, v2 = Qt(u2.ws()) * c2, _2 = v2 / 2;
  switch (t.hs = v2, i2.position) {
    case "inBar":
      return t.it = e2.xt(o2, a2), void (void 0 !== t.Gt && (t.Gt.it = t.it + _2 + r2 + 0.6 * h2));
    case "aboveBar":
      return t.it = e2.xt(l2, a2) - _2 - s2.Qh, void 0 !== t.Gt && (t.Gt.it = t.it - _2 - 0.6 * h2, s2.Qh += 1.2 * h2), void (s2.Qh += v2 + r2);
    case "belowBar":
      return t.it = e2.xt(f2, a2) + _2 + s2.tr, void 0 !== t.Gt && (t.Gt.it = t.it + _2 + r2 + 0.6 * h2, s2.tr += 1.2 * h2), void (s2.tr += v2 + r2);
  }
  i2.position;
}
var ai = function() {
  function t(t2, i2) {
    this.ft = true, this.ir = true, this.nr = true, this.sr = null, this.zt = new hi(), this.Vh = t2, this.pi = i2, this.Bt = { G: [], J: null };
  }
  return t.prototype.vt = function(t2) {
    this.ft = true, this.nr = true, "data" === t2 && (this.ir = true);
  }, t.prototype.dt = function(t2, i2, n2) {
    if (!this.Vh.yt())
      return null;
    this.ft && this.Jn();
    var s2 = this.pi.W().layout;
    return this.zt.eh(s2.fontSize, s2.fontFamily), this.zt.Z(this.Bt), this.zt;
  }, t.prototype.hr = function() {
    if (this.nr) {
      if (this.Vh.rr().length > 0) {
        var t2 = this.pi.bt().ws(), i2 = ti(t2), n2 = 1.5 * Qt(t2) + 2 * i2;
        this.sr = { above: n2, below: n2 };
      } else
        this.sr = null;
      this.nr = false;
    }
    return this.sr;
  }, t.prototype.Jn = function() {
    var t2 = this.Vh.Ct(), i2 = this.pi.bt(), n2 = this.Vh.rr();
    this.ir && (this.Bt.G = n2.map(function(t3) {
      return { rt: t3.time, tt: 0, it: 0, hs: 0, Gh: t3.shape, A: t3.color, Xh: t3.Xh, Zh: t3.id, Gt: void 0 };
    }), this.ir = false);
    var s2 = this.pi.W().layout;
    this.Bt.J = null;
    var h2 = i2.ss();
    if (null !== h2) {
      var r2 = this.Vh.kt();
      if (null !== r2 && 0 !== this.Bt.G.length) {
        var e2 = NaN, u2 = ti(i2.ws()), a2 = { Qh: u2, tr: u2 };
        this.Bt.J = Mt(this.Bt.G, h2, true);
        for (var o2 = this.Bt.J.from; o2 < this.Bt.J.to; o2++) {
          var l2 = n2[o2];
          l2.time !== e2 && (a2.Qh = u2, a2.tr = u2, e2 = l2.time);
          var f2 = this.Bt.G[o2];
          f2.tt = i2.At(l2.time), void 0 !== l2.text && l2.text.length > 0 && (f2.Gt = { Jh: l2.text, it: 0, Ht: 0, Yt: 0 });
          var c2 = this.Vh.er(l2.time);
          null !== c2 && ui(f2, l2, c2, a2, s2.fontSize, u2, t2, i2, r2.St);
        }
        this.ft = false;
      }
    }
  }, t;
}();
var oi = function(t) {
  function i2(i3) {
    return t.call(this, i3) || this;
  }
  return m(i2, t), i2.prototype.bh = function(t2, i3) {
    var n2 = this.wh;
    n2.yt = false;
    var s2 = this.Kn.W();
    if (s2.priceLineVisible && this.Kn.yt()) {
      var h2 = this.Kn.jh(0 === s2.priceLineSource);
      h2.qh || (n2.yt = true, n2.it = h2.ti, n2.A = this.Kn.ur(h2.A), n2.Ht = i3, n2.Yt = t2, n2.Vt = s2.priceLineWidth, n2.Pt = s2.priceLineStyle);
    }
  }, i2;
}(Ut);
var li = function(t) {
  function i2(i3) {
    var n2 = t.call(this) || this;
    return n2.Rt = i3, n2;
  }
  return m(i2, t), i2.prototype.vi = function(t2, i3, n2) {
    t2.yt = false, i3.yt = false;
    var s2 = this.Rt;
    if (s2.yt()) {
      var h2 = s2.W(), r2 = h2.lastValueVisible, e2 = "" !== s2.ar(), u2 = 0 === h2.seriesLastValueMode, a2 = s2.jh(false);
      if (!a2.qh) {
        r2 && (t2.Gt = this.lr(a2, r2, u2), t2.yt = 0 !== t2.Gt.length), (e2 || u2) && (i3.Gt = this.cr(a2, r2, e2, u2), i3.yt = i3.Gt.length > 0);
        var o2 = s2.ur(a2.A), l2 = M(o2);
        n2.t = l2.t, n2.A = l2.i, n2.ti = a2.ti, i3.Tt = s2.jt().Dt(a2.ti / s2.Ct().Yt()), t2.Tt = o2;
      }
    }
  }, i2.prototype.cr = function(t2, i3, n2, s2) {
    var h2 = "", r2 = this.Rt.ar();
    return n2 && 0 !== r2.length && (h2 += "".concat(r2, " ")), i3 && s2 && (h2 += this.Rt.Ct().vr() ? t2._r : t2.dr), h2.trim();
  }, i2.prototype.lr = function(t2, i3, n2) {
    return i3 ? n2 ? this.Rt.Ct().vr() ? t2.dr : t2._r : t2.Gt : "";
  }, i2;
}(K);
var fi = function() {
  function t(t2, i2) {
    this.wr = t2, this.Mr = i2;
  }
  return t.prototype.br = function(t2) {
    return null !== t2 && (this.wr === t2.wr && this.Mr === t2.Mr);
  }, t.prototype.mr = function() {
    return new t(this.wr, this.Mr);
  }, t.prototype.pr = function() {
    return this.wr;
  }, t.prototype.gr = function() {
    return this.Mr;
  }, t.prototype.yr = function() {
    return this.Mr - this.wr;
  }, t.prototype.wi = function() {
    return this.Mr === this.wr || Number.isNaN(this.Mr) || Number.isNaN(this.wr);
  }, t.prototype.Nn = function(i2) {
    return null === i2 ? this : new t(Math.min(this.pr(), i2.pr()), Math.max(this.gr(), i2.gr()));
  }, t.prototype.kr = function(t2) {
    if (N(t2) && 0 !== this.Mr - this.wr) {
      var i2 = 0.5 * (this.Mr + this.wr), n2 = this.Mr - i2, s2 = this.wr - i2;
      n2 *= t2, s2 *= t2, this.Mr = i2 + n2, this.wr = i2 + s2;
    }
  }, t.prototype.Nr = function(t2) {
    N(t2) && (this.Mr += t2, this.wr += t2);
  }, t.prototype.Cr = function() {
    return { minValue: this.wr, maxValue: this.Mr };
  }, t.Sr = function(i2) {
    return null === i2 ? null : new t(i2.minValue, i2.maxValue);
  }, t;
}();
var ci = function() {
  function t(t2, i2) {
    this.Tr = t2, this.Dr = i2 || null;
  }
  return t.prototype.Ar = function() {
    return this.Tr;
  }, t.prototype.Br = function() {
    return this.Dr;
  }, t.prototype.Cr = function() {
    return null === this.Tr ? null : { priceRange: this.Tr.Cr(), margins: this.Dr || void 0 };
  }, t.Sr = function(i2) {
    return null === i2 ? null : new t(fi.Sr(i2.priceRange), i2.margins);
  }, t;
}();
var vi = function(t) {
  function i2(i3, n2) {
    var s2 = t.call(this, i3) || this;
    return s2.Lr = n2, s2;
  }
  return m(i2, t), i2.prototype.bh = function(t2, i3) {
    var n2 = this.wh;
    n2.yt = false;
    var s2 = this.Lr.W();
    if (this.Kn.yt() && s2.lineVisible) {
      var h2 = this.Lr.Er();
      null !== h2 && (n2.yt = true, n2.it = h2, n2.A = s2.color, n2.Ht = i3, n2.Yt = t2, n2.Vt = s2.lineWidth, n2.Pt = s2.lineStyle);
    }
  }, i2;
}(Ut);
var _i = function(t) {
  function i2(i3, n2) {
    var s2 = t.call(this) || this;
    return s2.Vh = i3, s2.Lr = n2, s2;
  }
  return m(i2, t), i2.prototype.vi = function(t2, i3, n2) {
    t2.yt = false, i3.yt = false;
    var s2 = this.Lr.W(), h2 = s2.axisLabelVisible, r2 = "" !== s2.title, e2 = this.Vh;
    if (h2 && e2.yt()) {
      var u2 = this.Lr.Er();
      if (null !== u2) {
        r2 && (i3.Gt = s2.title, i3.yt = true), i3.Tt = e2.jt().Dt(u2 / e2.Ct().Yt()), t2.Gt = e2.Ct().Fr(s2.price), t2.yt = true;
        var a2 = M(s2.color);
        n2.t = a2.t, n2.A = a2.i, n2.ti = u2;
      }
    }
  }, i2;
}(K);
var di = function() {
  function t(t2, i2) {
    this.Vh = t2, this.zi = i2, this.Or = new vi(t2, this), this.uh = new _i(t2, this), this.Vr = new jt(this.uh, t2, t2.jt());
  }
  return t.prototype.Pr = function(t2) {
    k(this.zi, t2), this.vt(), this.Vh.jt().Wr();
  }, t.prototype.W = function() {
    return this.zi;
  }, t.prototype.tn = function() {
    return [this.Or, this.Vr];
  }, t.prototype.zr = function() {
    return this.uh;
  }, t.prototype.vt = function() {
    this.Or.vt(), this.uh.vt();
  }, t.prototype.Er = function() {
    var t2 = this.Vh, i2 = t2.Ct();
    if (t2.jt().bt().wi() || i2.wi())
      return null;
    var n2 = t2.kt();
    return null === n2 ? null : i2.xt(this.zi.price, n2.St);
  }, t;
}();
var wi = function(t) {
  function i2(i3) {
    var n2 = t.call(this) || this;
    return n2.pi = i3, n2;
  }
  return m(i2, t), i2.prototype.jt = function() {
    return this.pi;
  }, i2;
}(Q);
var Mi = { Ds: "", Hs: "", Us: "" };
var bi = function() {
  function t(t2) {
    this.Vh = t2;
  }
  return t.prototype.As = function(t2, i2) {
    var n2 = this.Vh.Rr(), s2 = this.Vh.W();
    switch (n2) {
      case "Line":
        return this.Ir(s2, t2, i2);
      case "Area":
        return this.jr(s2);
      case "Baseline":
        return this.qr(s2, t2, i2);
      case "Bar":
        return this.Ur(s2, t2, i2);
      case "Candlestick":
        return this.Hr(s2, t2, i2);
      case "Histogram":
        return this.Yr(s2, t2, i2);
    }
    throw new Error("Unknown chart style");
  }, t.prototype.Ur = function(t2, i2, n2) {
    var s2 = p({}, Mi), h2 = t2.upColor, r2 = t2.downColor, e2 = h2, o2 = r2, l2 = u(this.$r(i2, n2)), f2 = a(l2.St[0]) <= a(l2.St[3]);
    return void 0 !== l2.A ? (s2.Ds = l2.A, s2.Hs = l2.A) : (s2.Ds = f2 ? h2 : r2, s2.Hs = f2 ? e2 : o2), s2;
  }, t.prototype.Hr = function(t2, i2, n2) {
    var s2, h2, r2, e2 = p({}, Mi), o2 = t2.upColor, l2 = t2.downColor, f2 = t2.borderUpColor, c2 = t2.borderDownColor, v2 = t2.wickUpColor, _2 = t2.wickDownColor, d2 = u(this.$r(i2, n2)), w2 = a(d2.St[0]) <= a(d2.St[3]);
    return e2.Ds = null !== (s2 = d2.A) && void 0 !== s2 ? s2 : w2 ? o2 : l2, e2.Hs = null !== (h2 = d2.Tt) && void 0 !== h2 ? h2 : w2 ? f2 : c2, e2.Us = null !== (r2 = d2.qs) && void 0 !== r2 ? r2 : w2 ? v2 : _2, e2;
  }, t.prototype.jr = function(t2) {
    return p(p({}, Mi), { Ds: t2.lineColor });
  }, t.prototype.qr = function(t2, i2, n2) {
    var s2 = u(this.$r(i2, n2)).St[3] >= t2.baseValue.price;
    return p(p({}, Mi), { Ds: s2 ? t2.topLineColor : t2.bottomLineColor });
  }, t.prototype.Ir = function(t2, i2, n2) {
    var s2, h2 = u(this.$r(i2, n2));
    return p(p({}, Mi), { Ds: null !== (s2 = h2.A) && void 0 !== s2 ? s2 : t2.color });
  }, t.prototype.Yr = function(t2, i2, n2) {
    var s2 = p({}, Mi), h2 = u(this.$r(i2, n2));
    return s2.Ds = void 0 !== h2.A ? h2.A : t2.color, s2;
  }, t.prototype.$r = function(t2, i2) {
    return void 0 !== i2 ? i2.St : this.Vh.an().Kr(t2);
  }, t;
}();
var mi = function() {
  function t() {
    this.Xr = [], this.Zr = /* @__PURE__ */ new Map(), this.Jr = /* @__PURE__ */ new Map();
  }
  return t.prototype.Gr = function() {
    return this.hs() > 0 ? this.Xr[this.Xr.length - 1] : null;
  }, t.prototype.Qr = function() {
    return this.hs() > 0 ? this.te(0) : null;
  }, t.prototype.un = function() {
    return this.hs() > 0 ? this.te(this.Xr.length - 1) : null;
  }, t.prototype.hs = function() {
    return this.Xr.length;
  }, t.prototype.wi = function() {
    return 0 === this.hs();
  }, t.prototype.Uh = function(t2) {
    return null !== this.ie(t2, 0);
  }, t.prototype.Kr = function(t2) {
    return this.ne(t2);
  }, t.prototype.ne = function(t2, i2) {
    void 0 === i2 && (i2 = 0);
    var n2 = this.ie(t2, i2);
    return null === n2 ? null : p(p({}, this.se(n2)), { vs: this.te(n2) });
  }, t.prototype.fs = function() {
    return this.Xr;
  }, t.prototype.he = function(t2, i2, n2) {
    if (this.wi())
      return null;
    for (var s2 = null, h2 = 0, r2 = n2; h2 < r2.length; h2++) {
      var e2 = r2[h2];
      s2 = pi(s2, this.re(t2, i2, e2));
    }
    return s2;
  }, t.prototype.Z = function(t2) {
    this.Jr.clear(), this.Zr.clear(), this.Xr = t2;
  }, t.prototype.te = function(t2) {
    return this.Xr[t2].vs;
  }, t.prototype.se = function(t2) {
    return this.Xr[t2];
  }, t.prototype.ie = function(t2, i2) {
    var n2 = this.ee(t2);
    if (null === n2 && 0 !== i2)
      switch (i2) {
        case -1:
          return this.ue(t2);
        case 1:
          return this.ae(t2);
        default:
          throw new TypeError("Unknown search mode");
      }
    return n2;
  }, t.prototype.ue = function(t2) {
    var i2 = this.oe(t2);
    return i2 > 0 && (i2 -= 1), i2 !== this.Xr.length && this.te(i2) < t2 ? i2 : null;
  }, t.prototype.ae = function(t2) {
    var i2 = this.le(t2);
    return i2 !== this.Xr.length && t2 < this.te(i2) ? i2 : null;
  }, t.prototype.ee = function(t2) {
    var i2 = this.oe(t2);
    return i2 === this.Xr.length || t2 < this.Xr[i2].vs ? null : i2;
  }, t.prototype.oe = function(t2) {
    return vt(this.Xr, t2, function(t3, i2) {
      return t3.vs < i2;
    });
  }, t.prototype.le = function(t2) {
    return _t(this.Xr, t2, function(t3, i2) {
      return i2.vs > t3;
    });
  }, t.prototype.fe = function(t2, i2, n2) {
    for (var s2 = null, h2 = t2; h2 < i2; h2++) {
      var r2 = this.Xr[h2].St[n2];
      Number.isNaN(r2) || (null === s2 ? s2 = { ce: r2, ve: r2 } : (r2 < s2.ce && (s2.ce = r2), r2 > s2.ve && (s2.ve = r2)));
    }
    return s2;
  }, t.prototype.re = function(t2, i2, n2) {
    if (this.wi())
      return null;
    var s2 = null, h2 = u(this.Qr()), r2 = u(this.un()), e2 = Math.max(t2, h2), a2 = Math.min(i2, r2), o2 = 30 * Math.ceil(e2 / 30), l2 = Math.max(o2, 30 * Math.floor(a2 / 30)), f2 = this.oe(e2), c2 = this.le(Math.min(a2, o2, i2));
    s2 = pi(s2, this.fe(f2, c2, n2));
    var v2 = this.Zr.get(n2);
    void 0 === v2 && (v2 = /* @__PURE__ */ new Map(), this.Zr.set(n2, v2));
    for (var _2 = Math.max(o2 + 1, e2); _2 < l2; _2 += 30) {
      var d2 = Math.floor(_2 / 30), w2 = v2.get(d2);
      if (void 0 === w2) {
        var M2 = this.oe(30 * d2), b2 = this.le(30 * (d2 + 1) - 1);
        w2 = this.fe(M2, b2, n2), v2.set(d2, w2);
      }
      s2 = pi(s2, w2);
    }
    f2 = this.oe(l2), c2 = this.le(a2);
    return s2 = pi(s2, this.fe(f2, c2, n2));
  }, t;
}();
function pi(t, i2) {
  return null === t ? i2 : null === i2 ? t : { ce: Math.min(t.ce, i2.ce), ve: Math.max(t.ve, i2.ve) };
}
var gi = function(t) {
  function i2(i3, n2, s2) {
    var h2 = t.call(this, i3) || this;
    h2.Bt = new mi(), h2.Or = new oi(h2), h2._e = [], h2.de = new Ht(h2), h2.we = null, h2.Me = null, h2.be = [], h2.me = [], h2.pe = null, h2.zi = n2, h2.ge = s2;
    var r2 = new li(h2);
    return h2.Ei = [r2], h2.Vr = new jt(r2, h2, i3), "Area" !== s2 && "Line" !== s2 && "Baseline" !== s2 || (h2.we = new Zt(h2)), h2.ye(), h2.ke(), h2;
  }
  return m(i2, t), i2.prototype.g = function() {
    null !== this.pe && clearTimeout(this.pe);
  }, i2.prototype.ur = function(t2) {
    return this.zi.priceLineColor || t2;
  }, i2.prototype.jh = function(t2) {
    var i3 = { qh: true }, n2 = this.Ct();
    if (this.jt().bt().wi() || n2.wi() || this.Bt.wi())
      return i3;
    var s2, h2, r2 = this.jt().bt().ss(), e2 = this.kt();
    if (null === r2 || null === e2)
      return i3;
    if (t2) {
      var u2 = this.Bt.Gr();
      if (null === u2)
        return i3;
      s2 = u2, h2 = u2.vs;
    } else {
      var a2 = this.Bt.ne(r2.jn(), -1);
      if (null === a2)
        return i3;
      if (null === (s2 = this.Bt.Kr(a2.vs)))
        return i3;
      h2 = a2.vs;
    }
    var o2 = s2.St[3], l2 = this.ls().As(h2, { St: s2 }), f2 = n2.xt(o2, e2.St);
    return { qh: false, et: o2, Gt: n2.Mi(o2, e2.St), _r: n2.Fr(o2), dr: n2.Ne(o2, e2.St), A: l2.Ds, ti: f2, vs: h2 };
  }, i2.prototype.ls = function() {
    return null !== this.Me || (this.Me = new bi(this)), this.Me;
  }, i2.prototype.W = function() {
    return this.zi;
  }, i2.prototype.Pr = function(t2) {
    var i3 = t2.priceScaleId;
    void 0 !== i3 && i3 !== this.zi.priceScaleId && this.jt().xe(this, i3), k(this.zi, t2), null !== this.ki && void 0 !== t2.scaleMargins && this.ki.Pr({ scaleMargins: t2.scaleMargins }), void 0 !== t2.priceFormat && (this.ye(), this.jt().Ce()), this.jt().Se(this), this.jt().Te(), this.Hi.vt("options");
  }, i2.prototype.Z = function(t2, i3) {
    this.Bt.Z(t2), this.De(), this.Hi.vt("data"), this.Ri.vt("data"), null !== this.we && (i3 && i3.Ae ? this.we.Wh() : 0 === t2.length && this.we.Ph());
    var n2 = this.jt().oh(this);
    this.jt().Be(n2), this.jt().Se(this), this.jt().Te(), this.jt().Wr();
  }, i2.prototype.Le = function(t2) {
    this.be = t2.map(function(t3) {
      return p({}, t3);
    }), this.De();
    var i3 = this.jt().oh(this);
    this.Ri.vt("data"), this.jt().Be(i3), this.jt().Se(this), this.jt().Te(), this.jt().Wr();
  }, i2.prototype.rr = function() {
    return this.me;
  }, i2.prototype.Ee = function(t2) {
    var i3 = new di(this, t2);
    return this._e.push(i3), this.jt().Se(this), i3;
  }, i2.prototype.Fe = function(t2) {
    var i3 = this._e.indexOf(t2);
    -1 !== i3 && this._e.splice(i3, 1), this.jt().Se(this);
  }, i2.prototype.Rr = function() {
    return this.ge;
  }, i2.prototype.kt = function() {
    var t2 = this.Oe();
    return null === t2 ? null : { St: t2.St[3], Ve: t2.rt };
  }, i2.prototype.Oe = function() {
    var t2 = this.jt().bt().ss();
    if (null === t2)
      return null;
    var i3 = t2.In();
    return this.Bt.ne(i3, 1);
  }, i2.prototype.an = function() {
    return this.Bt;
  }, i2.prototype.er = function(t2) {
    var i3 = this.Bt.Kr(t2);
    return null === i3 ? null : "Bar" === this.ge || "Candlestick" === this.ge ? { open: i3.St[0], high: i3.St[1], low: i3.St[2], close: i3.St[3] } : i3.St[3];
  }, i2.prototype.Pe = function(t2) {
    var i3 = this, n2 = this.we;
    return null !== n2 && n2.yt() ? (null === this.pe && n2.Rh() && (this.pe = setTimeout(function() {
      i3.pe = null, i3.jt().We();
    }, 0)), n2.zh(), [n2]) : [];
  }, i2.prototype.tn = function() {
    var t2 = [];
    this.ze() || t2.push(this.de);
    for (var i3 = 0, n2 = this._e; i3 < n2.length; i3++) {
      var s2 = n2[i3];
      t2.push.apply(t2, s2.tn());
    }
    return t2.push(this.Hi, this.Or, this.Vr, this.Ri), t2;
  }, i2.prototype.nn = function(t2, i3) {
    if (i3 !== this.ki && !this.ze())
      return [];
    for (var n2 = g([], this.Ei, true), s2 = 0, h2 = this._e; s2 < h2.length; s2++) {
      var r2 = h2[s2];
      n2.push(r2.zr());
    }
    return n2;
  }, i2.prototype.Re = function(t2, i3) {
    var n2 = this;
    if (void 0 !== this.zi.autoscaleInfoProvider) {
      var s2 = this.zi.autoscaleInfoProvider(function() {
        var s3 = n2.Ie(t2, i3);
        return null === s3 ? null : s3.Cr();
      });
      return ci.Sr(s2);
    }
    return this.Ie(t2, i3);
  }, i2.prototype.je = function() {
    return this.zi.priceFormat.minMove;
  }, i2.prototype.qe = function() {
    return this.Ue;
  }, i2.prototype.hn = function() {
    var t2;
    this.Hi.vt(), this.Ri.vt();
    for (var i3 = 0, n2 = this.Ei; i3 < n2.length; i3++) {
      n2[i3].vt();
    }
    for (var s2 = 0, h2 = this._e; s2 < h2.length; s2++) {
      h2[s2].vt();
    }
    this.Or.vt(), this.de.vt(), null === (t2 = this.we) || void 0 === t2 || t2.vt();
  }, i2.prototype.Ct = function() {
    return u(t.prototype.Ct.call(this));
  }, i2.prototype.gt = function(t2) {
    if (!(("Line" === this.ge || "Area" === this.ge || "Baseline" === this.ge) && this.zi.crosshairMarkerVisible))
      return null;
    var i3 = this.Bt.Kr(t2);
    return null === i3 ? null : { et: i3.St[3], st: this.He(), Tt: this.Ye(), Nt: this.$e(t2) };
  }, i2.prototype.ar = function() {
    return this.zi.title;
  }, i2.prototype.yt = function() {
    return this.zi.visible;
  }, i2.prototype.ze = function() {
    return !it(this.Ct().Ke());
  }, i2.prototype.Ie = function(t2, i3) {
    if (!x(t2) || !x(i3) || this.Bt.wi())
      return null;
    var n2 = "Line" === this.ge || "Area" === this.ge || "Baseline" === this.ge || "Histogram" === this.ge ? [3] : [2, 1], s2 = this.Bt.he(t2, i3, n2), h2 = null !== s2 ? new fi(s2.ce, s2.ve) : null;
    if ("Histogram" === this.Rr()) {
      var r2 = this.zi.base, e2 = new fi(r2, r2);
      h2 = null !== h2 ? h2.Nn(e2) : e2;
    }
    return new ci(h2, this.Ri.hr());
  }, i2.prototype.He = function() {
    switch (this.ge) {
      case "Line":
      case "Area":
      case "Baseline":
        return this.zi.crosshairMarkerRadius;
    }
    return 0;
  }, i2.prototype.Ye = function() {
    switch (this.ge) {
      case "Line":
      case "Area":
      case "Baseline":
        var t2 = this.zi.crosshairMarkerBorderColor;
        if (0 !== t2.length)
          return t2;
    }
    return null;
  }, i2.prototype.$e = function(t2) {
    switch (this.ge) {
      case "Line":
      case "Area":
      case "Baseline":
        var i3 = this.zi.crosshairMarkerBackgroundColor;
        if (0 !== i3.length)
          return i3;
    }
    return this.ls().As(t2).Ds;
  }, i2.prototype.ye = function() {
    switch (this.zi.priceFormat.type) {
      case "custom":
        this.Ue = { format: this.zi.priceFormat.formatter };
        break;
      case "volume":
        this.Ue = new ut(this.zi.priceFormat.precision);
        break;
      case "percent":
        this.Ue = new et(this.zi.priceFormat.precision);
        break;
      default:
        var t2 = Math.pow(10, this.zi.priceFormat.precision);
        this.Ue = new rt(t2, this.zi.priceFormat.minMove * t2);
    }
    null !== this.ki && this.ki.Xe();
  }, i2.prototype.De = function() {
    var t2 = this, i3 = this.jt().bt();
    if (i3.wi() || 0 === this.Bt.hs())
      this.me = [];
    else {
      var n2 = u(this.Bt.Qr());
      this.me = this.be.map(function(s2, h2) {
        var r2 = u(i3.Ze(s2.time, true)), e2 = r2 < n2 ? 1 : -1;
        return { time: u(t2.Bt.ne(r2, e2)).vs, position: s2.position, shape: s2.shape, color: s2.color, id: s2.id, Xh: h2, text: s2.text, size: s2.size };
      });
    }
  }, i2.prototype.ke = function() {
    switch (this.Ri = new ai(this, this.jt()), this.ge) {
      case "Bar":
        this.Hi = new kt(this, this.jt());
        break;
      case "Candlestick":
        this.Hi = new Et(this, this.jt());
        break;
      case "Line":
        this.Hi = new Wt(this, this.jt());
        break;
      case "Area":
        this.Hi = new pt(this, this.jt());
        break;
      case "Baseline":
        this.Hi = new Bt(this, this.jt());
        break;
      case "Histogram":
        this.Hi = new Pt(this, this.jt());
        break;
      default:
        throw Error("Unknown chart style assigned: " + this.ge);
    }
  }, i2;
}(wi);
var yi = function() {
  function t(t2) {
    this.zi = t2;
  }
  return t.prototype.Je = function(t2, i2, n2) {
    var s2 = t2;
    if (0 === this.zi.mode)
      return s2;
    var h2 = n2.ji(), r2 = h2.kt();
    if (null === r2)
      return s2;
    var e2 = h2.xt(t2, r2), u2 = n2.Ge().filter(function(t3) {
      return t3 instanceof gi;
    }).reduce(function(t3, s3) {
      if (n2.lh(s3) || !s3.yt())
        return t3;
      var h3 = s3.Ct(), r3 = s3.an();
      if (h3.wi() || !r3.Uh(i2))
        return t3;
      var e3 = r3.Kr(i2);
      if (null === e3)
        return t3;
      var u3 = a(s3.kt());
      return t3.concat([h3.xt(e3.St[3], u3.St)]);
    }, []);
    if (0 === u2.length)
      return s2;
    u2.sort(function(t3, i3) {
      return Math.abs(t3 - e2) - Math.abs(i3 - e2);
    });
    var o2 = u2[0];
    return s2 = h2.qi(o2, r2);
  }, t;
}();
var ki = function() {
  function t() {
    this.Bt = null;
  }
  return t.prototype.Z = function(t2) {
    this.Bt = t2;
  }, t.prototype.H = function(t2, i2, n2, h2) {
    var r2 = this;
    if (null !== this.Bt) {
      var e2 = Math.max(1, Math.floor(i2));
      t2.lineWidth = e2;
      var a2 = Math.ceil(this.Bt.Ot * i2), o2 = Math.ceil(this.Bt.Ft * i2);
      !function(t3, i3) {
        t3.save(), t3.lineWidth % 2 && t3.translate(0.5, 0.5), i3(), t3.restore();
      }(t2, function() {
        var n3 = u(r2.Bt);
        if (n3.Qe) {
          t2.strokeStyle = n3.tu, s(t2, n3.iu), t2.beginPath();
          for (var h3 = 0, l2 = n3.nu; h3 < l2.length; h3++) {
            var f2 = l2[h3], c2 = Math.round(f2.su * i2);
            t2.moveTo(c2, -e2), t2.lineTo(c2, a2 + e2);
          }
          t2.stroke();
        }
        if (n3.hu) {
          t2.strokeStyle = n3.ru, s(t2, n3.eu), t2.beginPath();
          for (var v2 = 0, _2 = n3.uu; v2 < _2.length; v2++) {
            var d2 = _2[v2], w2 = Math.round(d2.su * i2);
            t2.moveTo(-e2, w2), t2.lineTo(o2 + e2, w2);
          }
          t2.stroke();
        }
      });
    }
  }, t;
}();
var Ni = function() {
  function t(t2) {
    this.zt = new ki(), this.ft = true, this.Di = t2;
  }
  return t.prototype.vt = function() {
    this.ft = true;
  }, t.prototype.dt = function(t2, i2) {
    if (this.ft) {
      var n2 = this.Di.jt().W().grid, s2 = { Ot: t2, Ft: i2, hu: n2.horzLines.visible, Qe: n2.vertLines.visible, ru: n2.horzLines.color, tu: n2.vertLines.color, eu: n2.horzLines.style, iu: n2.vertLines.style, uu: this.Di.ji().au(), nu: this.Di.jt().bt().au() || [] };
      this.zt.Z(s2), this.ft = false;
    }
    return this.zt;
  }, t;
}();
var xi = function() {
  function t(t2) {
    this.Hi = new Ni(t2);
  }
  return t.prototype.ou = function() {
    return this.Hi;
  }, t;
}();
var Ci = { lu: 4, fu: 1e-4 };
function Si(t, i2) {
  var n2 = 100 * (t - i2) / i2;
  return i2 < 0 ? -n2 : n2;
}
function Ti(t, i2) {
  var n2 = Si(t.pr(), i2), s2 = Si(t.gr(), i2);
  return new fi(n2, s2);
}
function Di(t, i2) {
  var n2 = 100 * (t - i2) / i2 + 100;
  return i2 < 0 ? -n2 : n2;
}
function Ai(t, i2) {
  var n2 = Di(t.pr(), i2), s2 = Di(t.gr(), i2);
  return new fi(n2, s2);
}
function Bi(t, i2) {
  var n2 = Math.abs(t);
  if (n2 < 1e-15)
    return 0;
  var s2 = Ct(n2 + i2.fu) + i2.lu;
  return t < 0 ? -s2 : s2;
}
function Li(t, i2) {
  var n2 = Math.abs(t);
  if (n2 < 1e-15)
    return 0;
  var s2 = Math.pow(10, n2 - i2.lu) - i2.fu;
  return t < 0 ? -s2 : s2;
}
function Ei(t, i2) {
  if (null === t)
    return null;
  var n2 = Bi(t.pr(), i2), s2 = Bi(t.gr(), i2);
  return new fi(n2, s2);
}
function Fi(t, i2) {
  if (null === t)
    return null;
  var n2 = Li(t.pr(), i2), s2 = Li(t.gr(), i2);
  return new fi(n2, s2);
}
function Oi(t) {
  if (null === t)
    return Ci;
  var i2 = Math.abs(t.gr() - t.pr());
  if (i2 >= 1 || i2 < 1e-15)
    return Ci;
  var n2 = Math.ceil(Math.abs(Math.log10(i2))), s2 = Ci.lu + n2;
  return { lu: s2, fu: 1 / Math.pow(10, s2) };
}
var Vi;
var Pi = function() {
  function t(t2, i2) {
    if (this.cu = t2, this.vu = i2, function(t3) {
      if (t3 < 0)
        return false;
      for (var i3 = t3; i3 > 1; i3 /= 10)
        if (i3 % 10 != 0)
          return false;
      return true;
    }(this.cu))
      this._u = [2, 2.5, 2];
    else {
      this._u = [];
      for (var n2 = this.cu; 1 !== n2; ) {
        if (n2 % 2 == 0)
          this._u.push(2), n2 /= 2;
        else {
          if (n2 % 5 != 0)
            throw new Error("unexpected base");
          this._u.push(2, 2.5), n2 /= 5;
        }
        if (this._u.length > 100)
          throw new Error("something wrong with base");
      }
    }
  }
  return t.prototype.du = function(t2, i2, n2) {
    for (var s2, h2, r2, e2 = 0 === this.cu ? 0 : 1 / this.cu, u2 = Math.pow(10, Math.max(0, Math.ceil(Ct(t2 - i2)))), a2 = 0, o2 = this.vu[0]; ; ) {
      var l2 = xt(u2, e2, 1e-14) && u2 > e2 + 1e-14, f2 = xt(u2, n2 * o2, 1e-14), c2 = xt(u2, 1, 1e-14);
      if (!(l2 && f2 && c2))
        break;
      u2 /= o2, o2 = this.vu[++a2 % this.vu.length];
    }
    if (u2 <= e2 + 1e-14 && (u2 = e2), u2 = Math.max(1, u2), this._u.length > 0 && (s2 = u2, h2 = 1, r2 = 1e-14, Math.abs(s2 - h2) < r2))
      for (a2 = 0, o2 = this._u[0]; xt(u2, n2 * o2, 1e-14) && u2 > e2 + 1e-14; )
        u2 /= o2, o2 = this._u[++a2 % this._u.length];
    return u2;
  }, t;
}();
var Wi = function() {
  function t(t2, i2, n2, s2) {
    this.wu = [], this._i = t2, this.cu = i2, this.Mu = n2, this.bu = s2;
  }
  return t.prototype.du = function(t2, i2) {
    if (t2 < i2)
      throw new Error("high < low");
    var n2 = this._i.Yt(), s2 = (t2 - i2) * this.mu() / n2, h2 = new Pi(this.cu, [2, 2.5, 2]), r2 = new Pi(this.cu, [2, 2, 2.5]), e2 = new Pi(this.cu, [2.5, 2, 2]), u2 = [];
    return u2.push(h2.du(t2, i2, s2), r2.du(t2, i2, s2), e2.du(t2, i2, s2)), function(t3) {
      if (t3.length < 1)
        throw Error("array is empty");
      for (var i3 = t3[0], n3 = 1; n3 < t3.length; ++n3)
        t3[n3] < i3 && (i3 = t3[n3]);
      return i3;
    }(u2);
  }, t.prototype.pu = function() {
    var t2 = this._i, i2 = t2.kt();
    if (null !== i2) {
      var n2 = t2.Yt(), s2 = this.Mu(n2 - 1, i2), h2 = this.Mu(0, i2), r2 = this._i.W().entireTextOnly ? this.gu() / 2 : 0, e2 = r2, u2 = n2 - 1 - r2, a2 = Math.max(s2, h2), o2 = Math.min(s2, h2);
      if (a2 !== o2) {
        for (var l2 = this.du(a2, o2), f2 = a2 % l2, c2 = a2 >= o2 ? 1 : -1, v2 = null, _2 = 0, d2 = a2 - (f2 += f2 < 0 ? l2 : 0); d2 > o2; d2 -= l2) {
          var w2 = this.bu(d2, i2, true);
          null !== v2 && Math.abs(w2 - v2) < this.mu() || (w2 < e2 || w2 > u2 || (_2 < this.wu.length ? (this.wu[_2].su = w2, this.wu[_2].yu = t2.ku(d2)) : this.wu.push({ su: w2, yu: t2.ku(d2) }), _2++, v2 = w2, t2.Nu() && (l2 = this.du(d2 * c2, o2))));
        }
        this.wu.length = _2;
      } else
        this.wu = [];
    } else
      this.wu = [];
  }, t.prototype.au = function() {
    return this.wu;
  }, t.prototype.gu = function() {
    return this._i.S();
  }, t.prototype.mu = function() {
    return Math.ceil(2.5 * this.gu());
  }, t;
}();
function zi(t) {
  return t.slice().sort(function(t2, i2) {
    return u(t2.xi()) - u(i2.xi());
  });
}
!function(t) {
  t[t.Normal = 0] = "Normal", t[t.Logarithmic = 1] = "Logarithmic", t[t.Percentage = 2] = "Percentage", t[t.IndexedTo100 = 3] = "IndexedTo100";
}(Vi || (Vi = {}));
var Ri = new et();
var Ii = new rt(100, 1);
var ji = function() {
  function t(t2, i2, n2, s2) {
    this.xu = 0, this.Cu = null, this.Tr = null, this.Su = null, this.Tu = { Du: false, Au: null }, this.Bu = 0, this.Lu = 0, this.Eu = new y(), this.Fu = new y(), this.Ou = [], this.Vu = null, this.Pu = null, this.Wu = null, this.zu = null, this.Ue = Ii, this.Ru = Oi(null), this.Iu = t2, this.zi = i2, this.ju = n2, this.qu = s2, this.Uu = new Wi(this, 100, this.Hu.bind(this), this.Yu.bind(this));
  }
  return t.prototype.Ke = function() {
    return this.Iu;
  }, t.prototype.W = function() {
    return this.zi;
  }, t.prototype.Pr = function(t2) {
    if (k(this.zi, t2), this.Xe(), void 0 !== t2.mode && this.$u({ mh: t2.mode }), void 0 !== t2.scaleMargins) {
      var i2 = e(t2.scaleMargins.top), n2 = e(t2.scaleMargins.bottom);
      if (i2 < 0 || i2 > 1)
        throw new Error("Invalid top margin - expect value between 0 and 1, given=".concat(i2));
      if (n2 < 0 || n2 > 1 || i2 + n2 > 1)
        throw new Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(n2));
      if (i2 + n2 > 1)
        throw new Error("Invalid margins - sum of margins must be less than 1, given=".concat(i2 + n2));
      this.Ku(), this.Pu = null;
    }
  }, t.prototype.Xu = function() {
    return this.zi.autoScale;
  }, t.prototype.Nu = function() {
    return 1 === this.zi.mode;
  }, t.prototype.vr = function() {
    return 2 === this.zi.mode;
  }, t.prototype.Zu = function() {
    return 3 === this.zi.mode;
  }, t.prototype.mh = function() {
    return { _n: this.zi.autoScale, Ju: this.zi.invertScale, mh: this.zi.mode };
  }, t.prototype.$u = function(t2) {
    var i2 = this.mh(), n2 = null;
    void 0 !== t2._n && (this.zi.autoScale = t2._n), void 0 !== t2.mh && (this.zi.mode = t2.mh, 2 !== t2.mh && 3 !== t2.mh || (this.zi.autoScale = true), this.Tu.Du = false), 1 === i2.mh && t2.mh !== i2.mh && (!function(t3, i3) {
      if (null === t3)
        return false;
      var n3 = Li(t3.pr(), i3), s3 = Li(t3.gr(), i3);
      return isFinite(n3) && isFinite(s3);
    }(this.Tr, this.Ru) ? this.zi.autoScale = true : null !== (n2 = Fi(this.Tr, this.Ru)) && this.Gu(n2)), 1 === t2.mh && t2.mh !== i2.mh && null !== (n2 = Ei(this.Tr, this.Ru)) && this.Gu(n2);
    var s2 = i2.mh !== this.zi.mode;
    s2 && (2 === i2.mh || this.vr()) && this.Xe(), s2 && (3 === i2.mh || this.Zu()) && this.Xe(), void 0 !== t2.Ju && i2.Ju !== t2.Ju && (this.zi.invertScale = t2.Ju, this.Qu()), this.Fu.m(i2, this.mh());
  }, t.prototype.ta = function() {
    return this.Fu;
  }, t.prototype.S = function() {
    return this.ju.fontSize;
  }, t.prototype.Yt = function() {
    return this.xu;
  }, t.prototype.ia = function(t2) {
    this.xu !== t2 && (this.xu = t2, this.Ku(), this.Pu = null);
  }, t.prototype.na = function() {
    if (this.Cu)
      return this.Cu;
    var t2 = this.Yt() - this.sa() - this.ha();
    return this.Cu = t2, t2;
  }, t.prototype.Ar = function() {
    return this.ra(), this.Tr;
  }, t.prototype.Gu = function(t2, i2) {
    var n2 = this.Tr;
    (i2 || null === n2 && null !== t2 || null !== n2 && !n2.br(t2)) && (this.Pu = null, this.Tr = t2);
  }, t.prototype.wi = function() {
    return this.ra(), 0 === this.xu || !this.Tr || this.Tr.wi();
  }, t.prototype.ea = function(t2) {
    return this.Ju() ? t2 : this.Yt() - 1 - t2;
  }, t.prototype.xt = function(t2, i2) {
    return this.vr() ? t2 = Si(t2, i2) : this.Zu() && (t2 = Di(t2, i2)), this.Yu(t2, i2);
  }, t.prototype.us = function(t2, i2, n2) {
    this.ra();
    for (var s2 = this.ha(), h2 = u(this.Ar()), r2 = h2.pr(), e2 = h2.gr(), a2 = this.na() - 1, o2 = this.Ju(), l2 = a2 / (e2 - r2), f2 = void 0 === n2 ? 0 : n2.from, c2 = void 0 === n2 ? t2.length : n2.to, v2 = this.ua(), _2 = f2; _2 < c2; _2++) {
      var d2 = t2[_2], w2 = d2.et;
      if (!isNaN(w2)) {
        var M2 = w2;
        null !== v2 && (M2 = v2(d2.et, i2));
        var b2 = s2 + l2 * (M2 - r2), m2 = o2 ? b2 : this.xu - 1 - b2;
        d2.it = m2;
      }
    }
  }, t.prototype.Ss = function(t2, i2, n2) {
    this.ra();
    for (var s2 = this.ha(), h2 = u(this.Ar()), r2 = h2.pr(), e2 = h2.gr(), a2 = this.na() - 1, o2 = this.Ju(), l2 = a2 / (e2 - r2), f2 = void 0 === n2 ? 0 : n2.from, c2 = void 0 === n2 ? t2.length : n2.to, v2 = this.ua(), _2 = f2; _2 < c2; _2++) {
      var d2 = t2[_2], w2 = d2.open, M2 = d2.high, b2 = d2.low, m2 = d2.close;
      null !== v2 && (w2 = v2(d2.open, i2), M2 = v2(d2.high, i2), b2 = v2(d2.low, i2), m2 = v2(d2.close, i2));
      var p2 = s2 + l2 * (w2 - r2), g2 = o2 ? p2 : this.xu - 1 - p2;
      d2.xs = g2, p2 = s2 + l2 * (M2 - r2), g2 = o2 ? p2 : this.xu - 1 - p2, d2.ys = g2, p2 = s2 + l2 * (b2 - r2), g2 = o2 ? p2 : this.xu - 1 - p2, d2.ks = g2, p2 = s2 + l2 * (m2 - r2), g2 = o2 ? p2 : this.xu - 1 - p2, d2.Cs = g2;
    }
  }, t.prototype.qi = function(t2, i2) {
    var n2 = this.Hu(t2, i2);
    return this.aa(n2, i2);
  }, t.prototype.aa = function(t2, i2) {
    var n2 = t2;
    return this.vr() ? n2 = function(t3, i3) {
      return i3 < 0 && (t3 = -t3), t3 / 100 * i3 + i3;
    }(n2, i2) : this.Zu() && (n2 = function(t3, i3) {
      return t3 -= 100, i3 < 0 && (t3 = -t3), t3 / 100 * i3 + i3;
    }(n2, i2)), n2;
  }, t.prototype.Ge = function() {
    return this.Ou;
  }, t.prototype.oa = function() {
    if (this.Vu)
      return this.Vu;
    for (var t2 = [], i2 = 0; i2 < this.Ou.length; i2++) {
      var n2 = this.Ou[i2];
      null === n2.xi() && n2.Ci(i2 + 1), t2.push(n2);
    }
    return t2 = zi(t2), this.Vu = t2, this.Vu;
  }, t.prototype.la = function(t2) {
    -1 === this.Ou.indexOf(t2) && (this.Ou.push(t2), this.Xe(), this.fa());
  }, t.prototype.ca = function(t2) {
    var i2 = this.Ou.indexOf(t2);
    if (-1 === i2)
      throw new Error("source is not attached to scale");
    this.Ou.splice(i2, 1), 0 === this.Ou.length && (this.$u({ _n: true }), this.Gu(null)), this.Xe(), this.fa();
  }, t.prototype.kt = function() {
    for (var t2 = null, i2 = 0, n2 = this.Ou; i2 < n2.length; i2++) {
      var s2 = n2[i2].kt();
      null !== s2 && ((null === t2 || s2.Ve < t2.Ve) && (t2 = s2));
    }
    return null === t2 ? null : t2.St;
  }, t.prototype.Ju = function() {
    return this.zi.invertScale;
  }, t.prototype.au = function() {
    var t2 = null === this.kt();
    if (null !== this.Pu && (t2 || this.Pu.va === t2))
      return this.Pu.au;
    this.Uu.pu();
    var i2 = this.Uu.au();
    return this.Pu = { au: i2, va: t2 }, this.Eu.m(), i2;
  }, t.prototype._a = function() {
    return this.Eu;
  }, t.prototype.da = function(t2) {
    this.vr() || this.Zu() || null === this.Wu && null === this.Su && (this.wi() || (this.Wu = this.xu - t2, this.Su = u(this.Ar()).mr()));
  }, t.prototype.wa = function(t2) {
    if (!this.vr() && !this.Zu() && null !== this.Wu) {
      this.$u({ _n: false }), (t2 = this.xu - t2) < 0 && (t2 = 0);
      var i2 = (this.Wu + 0.2 * (this.xu - 1)) / (t2 + 0.2 * (this.xu - 1)), n2 = u(this.Su).mr();
      i2 = Math.max(i2, 0.1), n2.kr(i2), this.Gu(n2);
    }
  }, t.prototype.Ma = function() {
    this.vr() || this.Zu() || (this.Wu = null, this.Su = null);
  }, t.prototype.ba = function(t2) {
    this.Xu() || null === this.zu && null === this.Su && (this.wi() || (this.zu = t2, this.Su = u(this.Ar()).mr()));
  }, t.prototype.ma = function(t2) {
    if (!this.Xu() && null !== this.zu) {
      var i2 = u(this.Ar()).yr() / (this.na() - 1), n2 = t2 - this.zu;
      this.Ju() && (n2 *= -1);
      var s2 = n2 * i2, h2 = u(this.Su).mr();
      h2.Nr(s2), this.Gu(h2, true), this.Pu = null;
    }
  }, t.prototype.pa = function() {
    this.Xu() || null !== this.zu && (this.zu = null, this.Su = null);
  }, t.prototype.qe = function() {
    return this.Ue || this.Xe(), this.Ue;
  }, t.prototype.Mi = function(t2, i2) {
    switch (this.zi.mode) {
      case 2:
        return this.qe().format(Si(t2, i2));
      case 3:
        return this.qe().format(Di(t2, i2));
      default:
        return this.ga(t2);
    }
  }, t.prototype.ku = function(t2) {
    switch (this.zi.mode) {
      case 2:
      case 3:
        return this.qe().format(t2);
      default:
        return this.ga(t2);
    }
  }, t.prototype.Fr = function(t2) {
    return this.ga(t2, u(this.ya()).qe());
  }, t.prototype.Ne = function(t2, i2) {
    return t2 = Si(t2, i2), Ri.format(t2);
  }, t.prototype.ka = function() {
    return this.Ou;
  }, t.prototype.Na = function(t2) {
    this.Tu = { Au: t2, Du: false };
  }, t.prototype.hn = function() {
    this.Ou.forEach(function(t2) {
      return t2.hn();
    });
  }, t.prototype.Xe = function() {
    this.Pu = null;
    var t2 = this.ya(), i2 = 100;
    null !== t2 && (i2 = Math.round(1 / t2.je())), this.Ue = Ii, this.vr() ? (this.Ue = Ri, i2 = 100) : this.Zu() ? (this.Ue = new rt(100, 1), i2 = 100) : null !== t2 && (this.Ue = t2.qe()), this.Uu = new Wi(this, i2, this.Hu.bind(this), this.Yu.bind(this)), this.Uu.pu();
  }, t.prototype.fa = function() {
    this.Vu = null;
  }, t.prototype.ya = function() {
    return this.Ou[0] || null;
  }, t.prototype.sa = function() {
    return this.Ju() ? this.zi.scaleMargins.bottom * this.Yt() + this.Lu : this.zi.scaleMargins.top * this.Yt() + this.Bu;
  }, t.prototype.ha = function() {
    return this.Ju() ? this.zi.scaleMargins.top * this.Yt() + this.Bu : this.zi.scaleMargins.bottom * this.Yt() + this.Lu;
  }, t.prototype.ra = function() {
    this.Tu.Du || (this.Tu.Du = true, this.xa());
  }, t.prototype.Ku = function() {
    this.Cu = null;
  }, t.prototype.Yu = function(t2, i2) {
    if (this.ra(), this.wi())
      return 0;
    t2 = this.Nu() && t2 ? Bi(t2, this.Ru) : t2;
    var n2 = u(this.Ar()), s2 = this.ha() + (this.na() - 1) * (t2 - n2.pr()) / n2.yr();
    return this.ea(s2);
  }, t.prototype.Hu = function(t2, i2) {
    if (this.ra(), this.wi())
      return 0;
    var n2 = this.ea(t2), s2 = u(this.Ar()), h2 = s2.pr() + s2.yr() * ((n2 - this.ha()) / (this.na() - 1));
    return this.Nu() ? Li(h2, this.Ru) : h2;
  }, t.prototype.Qu = function() {
    this.Pu = null, this.Uu.pu();
  }, t.prototype.xa = function() {
    var t2 = this.Tu.Au;
    if (null !== t2) {
      for (var i2, n2, s2 = null, h2 = 0, r2 = 0, e2 = 0, a2 = this.ka(); e2 < a2.length; e2++) {
        var o2 = a2[e2];
        if (o2.yt()) {
          var l2 = o2.kt();
          if (null !== l2) {
            var f2 = o2.Re(t2.In(), t2.jn()), c2 = f2 && f2.Ar();
            if (null !== c2) {
              switch (this.zi.mode) {
                case 1:
                  c2 = Ei(c2, this.Ru);
                  break;
                case 2:
                  c2 = Ti(c2, l2.St);
                  break;
                case 3:
                  c2 = Ai(c2, l2.St);
              }
              if (s2 = null === s2 ? c2 : s2.Nn(u(c2)), null !== f2) {
                var v2 = f2.Br();
                null !== v2 && (h2 = Math.max(h2, v2.above), r2 = Math.max(h2, v2.below));
              }
            }
          }
        }
      }
      if (h2 === this.Bu && r2 === this.Lu || (this.Bu = h2, this.Lu = r2, this.Pu = null, this.Ku()), null !== s2) {
        if (s2.pr() === s2.gr()) {
          var _2 = this.ya(), d2 = 5 * (null === _2 || this.vr() || this.Zu() ? 1 : _2.je());
          this.Nu() && (s2 = Fi(s2, this.Ru)), s2 = new fi(s2.pr() - d2, s2.gr() + d2), this.Nu() && (s2 = Ei(s2, this.Ru));
        }
        if (this.Nu()) {
          var w2 = Fi(s2, this.Ru), M2 = Oi(w2);
          if (i2 = M2, n2 = this.Ru, i2.lu !== n2.lu || i2.fu !== n2.fu) {
            var b2 = null !== this.Su ? Fi(this.Su, this.Ru) : null;
            this.Ru = M2, s2 = Ei(w2, M2), null !== b2 && (this.Su = Ei(b2, M2));
          }
        }
        this.Gu(s2);
      } else
        null === this.Tr && (this.Gu(new fi(-0.5, 0.5)), this.Ru = Oi(null));
      this.Tu.Du = true;
    }
  }, t.prototype.ua = function() {
    var t2 = this;
    return this.vr() ? Si : this.Zu() ? Di : this.Nu() ? function(i2) {
      return Bi(i2, t2.Ru);
    } : null;
  }, t.prototype.ga = function(t2, i2) {
    return void 0 === this.qu.priceFormatter ? (void 0 === i2 && (i2 = this.qe()), i2.format(t2)) : this.qu.priceFormatter(t2);
  }, t;
}();
var qi = function() {
  function t(t2, i2) {
    this.Ou = [], this.Ca = /* @__PURE__ */ new Map(), this.xu = 0, this.hh = 0, this.Sa = 1e3, this.Vu = null, this.Ta = new y(), this.Da = t2, this.pi = i2, this.Aa = new xi(this);
    var n2 = i2.W();
    this.Ba = this.La("left", n2.leftPriceScale), this.Ea = this.La("right", n2.rightPriceScale), this.Ba.ta().u(this.Fa.bind(this, this.Ba), this), this.Ea.ta().u(this.Fa.bind(this, this.Ba), this), this.Oa(n2);
  }
  return t.prototype.Oa = function(t2) {
    if (t2.leftPriceScale && this.Ba.Pr(t2.leftPriceScale), t2.rightPriceScale && this.Ea.Pr(t2.rightPriceScale), t2.localization && (this.Ba.Xe(), this.Ea.Xe()), t2.overlayPriceScales)
      for (var i2 = 0, n2 = Array.from(this.Ca.values()); i2 < n2.length; i2++) {
        var s2 = u(n2[i2][0].Ct());
        s2.Pr(t2.overlayPriceScales), t2.localization && s2.Xe();
      }
  }, t.prototype.Va = function(t2) {
    switch (t2) {
      case "left":
        return this.Ba;
      case "right":
        return this.Ea;
    }
    return this.Ca.has(t2) ? e(this.Ca.get(t2))[0].Ct() : null;
  }, t.prototype.g = function() {
    this.jt().Pa().M(this), this.Ba.ta().M(this), this.Ea.ta().M(this), this.Ou.forEach(function(t2) {
      t2.g && t2.g();
    }), this.Ta.m();
  }, t.prototype.Wa = function() {
    return this.Sa;
  }, t.prototype.za = function(t2) {
    this.Sa = t2;
  }, t.prototype.jt = function() {
    return this.pi;
  }, t.prototype.Ht = function() {
    return this.hh;
  }, t.prototype.Yt = function() {
    return this.xu;
  }, t.prototype.Ra = function(t2) {
    this.hh = t2, this.Ia();
  }, t.prototype.ia = function(t2) {
    var i2 = this;
    this.xu = t2, this.Ba.ia(t2), this.Ea.ia(t2), this.Ou.forEach(function(n2) {
      if (i2.lh(n2)) {
        var s2 = n2.Ct();
        null !== s2 && s2.ia(t2);
      }
    }), this.Ia();
  }, t.prototype.Ge = function() {
    return this.Ou;
  }, t.prototype.lh = function(t2) {
    var i2 = t2.Ct();
    return null === i2 || this.Ba !== i2 && this.Ea !== i2;
  }, t.prototype.la = function(t2, i2, n2) {
    var s2 = void 0 !== n2 ? n2 : this.qa().ja + 1;
    this.Ua(t2, i2, s2);
  }, t.prototype.ca = function(t2) {
    var i2 = this.Ou.indexOf(t2);
    r(-1 !== i2, "removeDataSource: invalid data source"), this.Ou.splice(i2, 1);
    var n2 = u(t2.Ct()).Ke();
    if (this.Ca.has(n2)) {
      var s2 = e(this.Ca.get(n2)), h2 = s2.indexOf(t2);
      -1 !== h2 && (s2.splice(h2, 1), 0 === s2.length && this.Ca.delete(n2));
    }
    var a2 = t2.Ct();
    a2 && a2.Ge().indexOf(t2) >= 0 && a2.ca(t2), null !== a2 && (a2.fa(), this.Ha(a2)), this.Vu = null;
  }, t.prototype._h = function(t2) {
    return t2 === this.Ba ? "left" : t2 === this.Ea ? "right" : "overlay";
  }, t.prototype.Ya = function() {
    return this.Ba;
  }, t.prototype.$a = function() {
    return this.Ea;
  }, t.prototype.Ka = function(t2, i2) {
    t2.da(i2);
  }, t.prototype.Xa = function(t2, i2) {
    t2.wa(i2), this.Ia();
  }, t.prototype.Za = function(t2) {
    t2.Ma();
  }, t.prototype.Ja = function(t2, i2) {
    t2.ba(i2);
  }, t.prototype.Ga = function(t2, i2) {
    t2.ma(i2), this.Ia();
  }, t.prototype.Qa = function(t2) {
    t2.pa();
  }, t.prototype.Ia = function() {
    this.Ou.forEach(function(t2) {
      t2.hn();
    });
  }, t.prototype.ji = function() {
    var t2 = null;
    return this.pi.W().rightPriceScale.visible && 0 !== this.Ea.Ge().length ? t2 = this.Ea : this.pi.W().leftPriceScale.visible && 0 !== this.Ba.Ge().length ? t2 = this.Ba : 0 !== this.Ou.length && (t2 = this.Ou[0].Ct()), null === t2 && (t2 = this.Ea), t2;
  }, t.prototype.fh = function() {
    var t2 = null;
    return this.pi.W().rightPriceScale.visible ? t2 = this.Ea : this.pi.W().leftPriceScale.visible && (t2 = this.Ba), t2;
  }, t.prototype.Ha = function(t2) {
    null !== t2 && t2.Xu() && this.io(t2);
  }, t.prototype.no = function(t2) {
    var i2 = this.Da.ss();
    t2.$u({ _n: true }), null !== i2 && t2.Na(i2), this.Ia();
  }, t.prototype.so = function() {
    this.io(this.Ba), this.io(this.Ea);
  }, t.prototype.ho = function() {
    var t2 = this;
    this.Ha(this.Ba), this.Ha(this.Ea), this.Ou.forEach(function(i2) {
      t2.lh(i2) && t2.Ha(i2.Ct());
    }), this.Ia(), this.pi.Wr();
  }, t.prototype.oa = function() {
    return null === this.Vu && (this.Vu = zi(this.Ou)), this.Vu;
  }, t.prototype.ro = function() {
    return this.Ta;
  }, t.prototype.eo = function() {
    return this.Aa;
  }, t.prototype.io = function(t2) {
    var i2 = t2.ka();
    if (i2 && i2.length > 0 && !this.Da.wi()) {
      var n2 = this.Da.ss();
      null !== n2 && t2.Na(n2);
    }
    t2.hn();
  }, t.prototype.qa = function() {
    var t2 = this.oa();
    if (0 === t2.length)
      return { uo: 0, ja: 0 };
    for (var i2 = 0, n2 = 0, s2 = 0; s2 < t2.length; s2++) {
      var h2 = t2[s2].xi();
      null !== h2 && (h2 < i2 && (i2 = h2), h2 > n2 && (n2 = h2));
    }
    return { uo: i2, ja: n2 };
  }, t.prototype.Ua = function(t2, i2, n2) {
    var s2 = this.Va(i2);
    if (null === s2 && (s2 = this.La(i2, this.pi.W().overlayPriceScales)), this.Ou.push(t2), !it(i2)) {
      var h2 = this.Ca.get(i2) || [];
      h2.push(t2), this.Ca.set(i2, h2);
    }
    s2.la(t2), t2.Si(s2), t2.Ci(n2), this.Ha(s2), this.Vu = null;
  }, t.prototype.Fa = function(t2, i2, n2) {
    i2.mh !== n2.mh && this.io(t2);
  }, t.prototype.La = function(t2, i2) {
    var n2 = p({ visible: true, autoScale: true }, T(i2)), s2 = new ji(t2, n2, this.pi.W().layout, this.pi.W().localization);
    return s2.ia(this.Yt()), s2;
  }, t;
}();
var Ui = function(t) {
  return t.getUTCFullYear();
};
function Hi(t, i2, n2) {
  return i2.replace(/yyyy/g, function(t2) {
    return ht(Ui(t2), 4);
  }(t)).replace(/yy/g, function(t2) {
    return ht(Ui(t2) % 100, 2);
  }(t)).replace(/MMMM/g, function(t2, i3) {
    return new Date(t2.getUTCFullYear(), t2.getUTCMonth(), 1).toLocaleString(i3, { month: "long" });
  }(t, n2)).replace(/MMM/g, function(t2, i3) {
    return new Date(t2.getUTCFullYear(), t2.getUTCMonth(), 1).toLocaleString(i3, { month: "short" });
  }(t, n2)).replace(/MM/g, function(t2) {
    return ht(function(t3) {
      return t3.getUTCMonth() + 1;
    }(t2), 2);
  }(t)).replace(/dd/g, function(t2) {
    return ht(function(t3) {
      return t3.getUTCDate();
    }(t2), 2);
  }(t));
}
var Yi = function() {
  function t(t2, i2) {
    void 0 === t2 && (t2 = "yyyy-MM-dd"), void 0 === i2 && (i2 = "default"), this.ao = t2, this.oo = i2;
  }
  return t.prototype.lo = function(t2) {
    return Hi(t2, this.ao, this.oo);
  }, t;
}();
var $i = function() {
  function t(t2) {
    this.fo = t2 || "%h:%m:%s";
  }
  return t.prototype.lo = function(t2) {
    return this.fo.replace("%h", ht(t2.getUTCHours(), 2)).replace("%m", ht(t2.getUTCMinutes(), 2)).replace("%s", ht(t2.getUTCSeconds(), 2));
  }, t;
}();
var Ki = { co: "yyyy-MM-dd", vo: "%h:%m:%s", _o: " ", do: "default" };
var Xi = function() {
  function t(t2) {
    void 0 === t2 && (t2 = {});
    var i2 = p(p({}, Ki), t2);
    this.wo = new Yi(i2.co, i2.do), this.Mo = new $i(i2.vo), this.bo = i2._o;
  }
  return t.prototype.lo = function(t2) {
    return "".concat(this.wo.lo(t2)).concat(this.bo).concat(this.Mo.lo(t2));
  }, t;
}();
var Zi = function() {
  function t(t2, i2) {
    void 0 === i2 && (i2 = 50), this.mo = 0, this.po = 1, this.yo = 1, this.Gs = /* @__PURE__ */ new Map(), this.ko = /* @__PURE__ */ new Map(), this.No = t2, this.xo = i2;
  }
  return t.prototype.lo = function(t2) {
    var i2 = void 0 === t2.Co ? new Date(1e3 * t2.So).getTime() : new Date(Date.UTC(t2.Co.year, t2.Co.month - 1, t2.Co.day)).getTime(), n2 = this.Gs.get(i2);
    if (void 0 !== n2)
      return n2.To;
    if (this.mo === this.xo) {
      var s2 = this.ko.get(this.yo);
      this.ko.delete(this.yo), this.Gs.delete(e(s2)), this.yo++, this.mo--;
    }
    var h2 = this.No(t2);
    return this.Gs.set(i2, { To: h2, Do: this.po }), this.ko.set(this.po, i2), this.mo++, this.po++, h2;
  }, t;
}();
var Ji = function() {
  function t(t2, i2) {
    r(t2 <= i2, "right should be >= left"), this.Ao = t2, this.Bo = i2;
  }
  return t.prototype.In = function() {
    return this.Ao;
  }, t.prototype.jn = function() {
    return this.Bo;
  }, t.prototype.Lo = function() {
    return this.Bo - this.Ao + 1;
  }, t.prototype.Uh = function(t2) {
    return this.Ao <= t2 && t2 <= this.Bo;
  }, t.prototype.br = function(t2) {
    return this.Ao === t2.In() && this.Bo === t2.jn();
  }, t;
}();
function Gi(t, i2) {
  return null === t || null === i2 ? t === i2 : t.br(i2);
}
var Qi;
var tn = function() {
  function t() {
    this.Eo = /* @__PURE__ */ new Map(), this.Gs = null;
  }
  return t.prototype.Fo = function(t2, i2) {
    this.Oo(i2), this.Gs = null;
    for (var n2 = i2; n2 < t2.length; ++n2) {
      var s2 = t2[n2], h2 = this.Eo.get(s2.Vo);
      void 0 === h2 && (h2 = [], this.Eo.set(s2.Vo, h2)), h2.push({ vs: n2, rt: s2.rt, Po: s2.Vo });
    }
  }, t.prototype.Wo = function(t2, i2) {
    var n2 = Math.ceil(i2 / t2);
    return null !== this.Gs && this.Gs.zo === n2 || (this.Gs = { au: this.Ro(n2), zo: n2 }), this.Gs.au;
  }, t.prototype.Oo = function(t2) {
    if (0 !== t2) {
      var i2 = [];
      this.Eo.forEach(function(n3, s3) {
        t2 <= n3[0].vs ? i2.push(s3) : n3.splice(vt(n3, t2, function(i3) {
          return i3.vs < t2;
        }), 1 / 0);
      });
      for (var n2 = 0, s2 = i2; n2 < s2.length; n2++) {
        var h2 = s2[n2];
        this.Eo.delete(h2);
      }
    } else
      this.Eo.clear();
  }, t.prototype.Ro = function(t2) {
    for (var i2 = [], n2 = 0, s2 = Array.from(this.Eo.keys()).sort(function(t3, i3) {
      return i3 - t3;
    }); n2 < s2.length; n2++) {
      var h2 = s2[n2];
      if (this.Eo.get(h2)) {
        var r2 = i2;
        i2 = [];
        for (var u2 = r2.length, a2 = 0, o2 = e(this.Eo.get(h2)), l2 = o2.length, f2 = 1 / 0, c2 = -1 / 0, v2 = 0; v2 < l2; v2++) {
          for (var _2 = o2[v2], d2 = _2.vs; a2 < u2; ) {
            var w2 = r2[a2], M2 = w2.vs;
            if (!(M2 < d2)) {
              f2 = M2;
              break;
            }
            a2++, i2.push(w2), c2 = M2, f2 = 1 / 0;
          }
          f2 - d2 >= t2 && d2 - c2 >= t2 && (i2.push(_2), c2 = d2);
        }
        for (; a2 < u2; a2++)
          i2.push(r2[a2]);
      }
    }
    return i2;
  }, t;
}();
var nn = function() {
  function t(t2) {
    this.Io = t2;
  }
  return t.prototype.jo = function() {
    return null === this.Io ? null : new Ji(Math.floor(this.Io.In()), Math.ceil(this.Io.jn()));
  }, t.prototype.qo = function() {
    return this.Io;
  }, t.Uo = function() {
    return new t(null);
  }, t;
}();
!function(t) {
  t[t.Year = 0] = "Year", t[t.Month = 1] = "Month", t[t.DayOfMonth = 2] = "DayOfMonth", t[t.Time = 3] = "Time", t[t.TimeWithSeconds = 4] = "TimeWithSeconds";
}(Qi || (Qi = {}));
var sn = function() {
  function t(t2, i2, n2) {
    this.hh = 0, this.Ho = null, this.Yo = [], this.zu = null, this.Wu = null, this.$o = new tn(), this.Ko = /* @__PURE__ */ new Map(), this.Xo = nn.Uo(), this.Zo = true, this.Jo = new y(), this.Go = new y(), this.Qo = new y(), this.tl = null, this.il = null, this.nl = [], this.zi = i2, this.qu = n2, this.sl = i2.rightOffset, this.hl = i2.barSpacing, this.pi = t2, this.rl();
  }
  return t.prototype.W = function() {
    return this.zi;
  }, t.prototype.el = function(t2) {
    k(this.qu, t2), this.ul(), this.rl();
  }, t.prototype.Pr = function(t2, i2) {
    var n2;
    k(this.zi, t2), this.zi.fixLeftEdge && this.al(), this.zi.fixRightEdge && this.ol(), void 0 !== t2.barSpacing && this.pi.gn(t2.barSpacing), void 0 !== t2.rightOffset && this.pi.yn(t2.rightOffset), void 0 !== t2.minBarSpacing && this.pi.gn(null !== (n2 = t2.barSpacing) && void 0 !== n2 ? n2 : this.hl), this.ul(), this.rl(), this.Qo.m();
  }, t.prototype.gi = function(t2) {
    var i2;
    return (null === (i2 = this.Yo[t2]) || void 0 === i2 ? void 0 : i2.rt) || null;
  }, t.prototype.Ze = function(t2, i2) {
    if (this.Yo.length < 1)
      return null;
    if (t2.So > this.Yo[this.Yo.length - 1].rt.So)
      return i2 ? this.Yo.length - 1 : null;
    var n2 = vt(this.Yo, t2.So, function(t3, i3) {
      return t3.rt.So < i3;
    });
    return t2.So < this.Yo[n2].rt.So ? i2 ? n2 : null : n2;
  }, t.prototype.wi = function() {
    return 0 === this.hh || 0 === this.Yo.length || null === this.Ho;
  }, t.prototype.ss = function() {
    return this.ll(), this.Xo.jo();
  }, t.prototype.fl = function() {
    return this.ll(), this.Xo.qo();
  }, t.prototype.cl = function() {
    var t2 = this.ss();
    if (null === t2)
      return null;
    var i2 = { from: t2.In(), to: t2.jn() };
    return this.vl(i2);
  }, t.prototype.vl = function(t2) {
    var i2 = Math.round(t2.from), n2 = Math.round(t2.to), s2 = u(this._l()), h2 = u(this.dl());
    return { from: u(this.gi(Math.max(s2, i2))), to: u(this.gi(Math.min(h2, n2))) };
  }, t.prototype.wl = function(t2) {
    return { from: u(this.Ze(t2.from, true)), to: u(this.Ze(t2.to, true)) };
  }, t.prototype.Ht = function() {
    return this.hh;
  }, t.prototype.Ra = function(t2) {
    if (isFinite(t2) && !(t2 <= 0) && this.hh !== t2) {
      if (this.zi.lockVisibleTimeRangeOnResize && this.hh) {
        var i2 = this.hl * t2 / this.hh;
        this.hl = i2;
      }
      if (this.zi.fixLeftEdge) {
        var n2 = this.ss();
        if (null !== n2) {
          if (n2.In() <= 0) {
            var s2 = this.hh - t2;
            this.sl -= Math.round(s2 / this.hl) + 1;
          }
        }
      }
      this.hh = t2, this.Zo = true, this.Ml(), this.bl();
    }
  }, t.prototype.At = function(t2) {
    if (this.wi() || !x(t2))
      return 0;
    var i2 = this.ml() + this.sl - t2;
    return this.hh - (i2 + 0.5) * this.hl - 1;
  }, t.prototype.es = function(t2, i2) {
    for (var n2 = this.ml(), s2 = void 0 === i2 ? 0 : i2.from, h2 = void 0 === i2 ? t2.length : i2.to, r2 = s2; r2 < h2; r2++) {
      var e2 = t2[r2].rt, u2 = n2 + this.sl - e2, a2 = this.hh - (u2 + 0.5) * this.hl - 1;
      t2[r2].tt = a2;
    }
  }, t.prototype.pl = function(t2) {
    return Math.ceil(this.gl(t2));
  }, t.prototype.yn = function(t2) {
    this.Zo = true, this.sl = t2, this.bl(), this.pi.yl(), this.pi.Wr();
  }, t.prototype.ws = function() {
    return this.hl;
  }, t.prototype.gn = function(t2) {
    this.kl(t2), this.bl(), this.pi.yl(), this.pi.Wr();
  }, t.prototype.Nl = function() {
    return this.sl;
  }, t.prototype.au = function() {
    if (this.wi())
      return null;
    if (null !== this.il)
      return this.il;
    for (var t2 = this.hl, i2 = 5 * (this.pi.W().layout.fontSize + 4), n2 = Math.round(i2 / t2), s2 = u(this.ss()), h2 = Math.max(s2.In(), s2.In() - n2), r2 = Math.max(s2.jn(), s2.jn() - n2), e2 = this.$o.Wo(t2, i2), a2 = this._l() + n2, o2 = this.dl() - n2, l2 = this.xl(), f2 = this.zi.fixLeftEdge || l2, c2 = this.zi.fixRightEdge || l2, v2 = 0, _2 = 0, d2 = e2; _2 < d2.length; _2++) {
      var w2 = d2[_2];
      if (h2 <= w2.vs && w2.vs <= r2) {
        var M2 = void 0;
        v2 < this.nl.length ? ((M2 = this.nl[v2]).su = this.At(w2.vs), M2.yu = this.Cl(w2.rt, w2.Po), M2.Po = w2.Po) : (M2 = { Sl: false, su: this.At(w2.vs), yu: this.Cl(w2.rt, w2.Po), Po: w2.Po }, this.nl.push(M2)), this.hl > i2 / 2 && !l2 ? M2.Sl = false : M2.Sl = f2 && w2.vs <= a2 || c2 && w2.vs >= o2, v2++;
      }
    }
    return this.nl.length = v2, this.il = this.nl, this.nl;
  }, t.prototype.Tl = function() {
    this.Zo = true, this.gn(this.zi.barSpacing), this.yn(this.zi.rightOffset);
  }, t.prototype.Dl = function(t2) {
    this.Zo = true, this.Ho = t2, this.bl(), this.al();
  }, t.prototype.Al = function(t2, i2) {
    var n2 = this.gl(t2), s2 = this.ws(), h2 = s2 + i2 * (s2 / 10);
    this.gn(h2), this.zi.rightBarStaysOnScroll || this.yn(this.Nl() + (n2 - this.gl(t2)));
  }, t.prototype.da = function(t2) {
    this.zu && this.pa(), null === this.Wu && null === this.tl && (this.wi() || (this.Wu = t2, this.Bl()));
  }, t.prototype.wa = function(t2) {
    if (null !== this.tl) {
      var i2 = Nt(this.hh - t2, 0, this.hh), n2 = Nt(this.hh - u(this.Wu), 0, this.hh);
      0 !== i2 && 0 !== n2 && this.gn(this.tl.ws * i2 / n2);
    }
  }, t.prototype.Ma = function() {
    null !== this.Wu && (this.Wu = null, this.Ll());
  }, t.prototype.ba = function(t2) {
    null === this.zu && null === this.tl && (this.wi() || (this.zu = t2, this.Bl()));
  }, t.prototype.ma = function(t2) {
    if (null !== this.zu) {
      var i2 = (this.zu - t2) / this.ws();
      this.sl = u(this.tl).Nl + i2, this.Zo = true, this.bl();
    }
  }, t.prototype.pa = function() {
    null !== this.zu && (this.zu = null, this.Ll());
  }, t.prototype.El = function() {
    this.Fl(this.zi.rightOffset);
  }, t.prototype.Fl = function(t2, i2) {
    var n2 = this;
    if (void 0 === i2 && (i2 = 400), !isFinite(t2))
      throw new RangeError("offset is required and must be finite number");
    if (!isFinite(i2) || i2 <= 0)
      throw new RangeError("animationDuration (optional) must be finite positive number");
    var s2 = this.sl, h2 = performance.now(), r2 = function() {
      var e2 = (performance.now() - h2) / i2, u2 = e2 >= 1, a2 = u2 ? t2 : s2 + (t2 - s2) * e2;
      n2.yn(a2), u2 || setTimeout(r2, 20);
    };
    r2();
  }, t.prototype.vt = function(t2, i2) {
    this.Zo = true, this.Yo = t2, this.$o.Fo(t2, i2), this.bl();
  }, t.prototype.Ol = function() {
    return this.Jo;
  }, t.prototype.Vl = function() {
    return this.Go;
  }, t.prototype.Pl = function() {
    return this.Qo;
  }, t.prototype.ml = function() {
    return this.Ho || 0;
  }, t.prototype.Wl = function(t2) {
    var i2 = t2.Lo();
    this.kl(this.hh / i2), this.sl = t2.jn() - this.ml(), this.bl(), this.Zo = true, this.pi.yl(), this.pi.Wr();
  }, t.prototype.zl = function() {
    var t2 = this._l(), i2 = this.dl();
    null !== t2 && null !== i2 && this.Wl(new Ji(t2, i2 + this.zi.rightOffset));
  }, t.prototype.Rl = function(t2) {
    var i2 = new Ji(t2.from, t2.to);
    this.Wl(i2);
  }, t.prototype.yi = function(t2) {
    return void 0 !== this.qu.timeFormatter ? this.qu.timeFormatter(t2.Co || t2.So) : this.Il.lo(new Date(1e3 * t2.So));
  }, t.prototype.xl = function() {
    var t2 = this.pi.W(), i2 = t2.handleScroll, n2 = t2.handleScale;
    return !(i2.horzTouchDrag || i2.mouseWheel || i2.pressedMouseMove || i2.vertTouchDrag || n2.axisDoubleClickReset || n2.axisPressedMouseMove.time || n2.mouseWheel || n2.pinch);
  }, t.prototype._l = function() {
    return 0 === this.Yo.length ? null : 0;
  }, t.prototype.dl = function() {
    return 0 === this.Yo.length ? null : this.Yo.length - 1;
  }, t.prototype.jl = function(t2) {
    return (this.hh - 1 - t2) / this.hl;
  }, t.prototype.gl = function(t2) {
    var i2 = this.jl(t2), n2 = this.ml() + this.sl - i2;
    return Math.round(1e6 * n2) / 1e6;
  }, t.prototype.kl = function(t2) {
    var i2 = this.hl;
    this.hl = t2, this.Ml(), i2 !== this.hl && (this.Zo = true, this.ql());
  }, t.prototype.ll = function() {
    if (this.Zo)
      if (this.Zo = false, this.wi())
        this.Ul(nn.Uo());
      else {
        var t2 = this.ml(), i2 = this.hh / this.hl, n2 = this.sl + t2, s2 = new Ji(n2 - i2 + 1, n2);
        this.Ul(new nn(s2));
      }
  }, t.prototype.Ml = function() {
    var t2 = this.Hl();
    if (this.hl < t2 && (this.hl = t2, this.Zo = true), 0 !== this.hh) {
      var i2 = 0.5 * this.hh;
      this.hl > i2 && (this.hl = i2, this.Zo = true);
    }
  }, t.prototype.Hl = function() {
    return this.zi.fixLeftEdge && this.zi.fixRightEdge && 0 !== this.Yo.length ? this.hh / this.Yo.length : this.zi.minBarSpacing;
  }, t.prototype.bl = function() {
    var t2 = this.Yl();
    this.sl > t2 && (this.sl = t2, this.Zo = true);
    var i2 = this.$l();
    null !== i2 && this.sl < i2 && (this.sl = i2, this.Zo = true);
  }, t.prototype.$l = function() {
    var t2 = this._l(), i2 = this.Ho;
    return null === t2 || null === i2 ? null : t2 - i2 - 1 + (this.zi.fixLeftEdge ? this.hh / this.hl : Math.min(2, this.Yo.length));
  }, t.prototype.Yl = function() {
    return this.zi.fixRightEdge ? 0 : this.hh / this.hl - Math.min(2, this.Yo.length);
  }, t.prototype.Bl = function() {
    this.tl = { ws: this.ws(), Nl: this.Nl() };
  }, t.prototype.Ll = function() {
    this.tl = null;
  }, t.prototype.Cl = function(t2, i2) {
    var n2 = this, s2 = this.Ko.get(i2);
    return void 0 === s2 && (s2 = new Zi(function(t3) {
      return n2.Kl(t3, i2);
    }), this.Ko.set(i2, s2)), s2.lo(t2);
  }, t.prototype.Kl = function(t2, i2) {
    var n2, s2 = function(t3, i3, n3) {
      switch (t3) {
        case 0:
        case 10:
          return i3 ? n3 ? 4 : 3 : 2;
        case 20:
        case 21:
        case 22:
        case 30:
        case 31:
        case 32:
        case 33:
          return i3 ? 3 : 2;
        case 50:
          return 2;
        case 60:
          return 1;
        case 70:
          return 0;
      }
    }(i2, this.zi.timeVisible, this.zi.secondsVisible);
    return void 0 !== this.zi.tickMarkFormatter ? this.zi.tickMarkFormatter(null !== (n2 = t2.Co) && void 0 !== n2 ? n2 : t2.So, s2, this.qu.locale) : function(t3, i3, n3) {
      var s3 = {};
      switch (i3) {
        case 0:
          s3.year = "numeric";
          break;
        case 1:
          s3.month = "short";
          break;
        case 2:
          s3.day = "numeric";
          break;
        case 3:
          s3.hour12 = false, s3.hour = "2-digit", s3.minute = "2-digit";
          break;
        case 4:
          s3.hour12 = false, s3.hour = "2-digit", s3.minute = "2-digit", s3.second = "2-digit";
      }
      var h2 = void 0 === t3.Co ? new Date(1e3 * t3.So) : new Date(Date.UTC(t3.Co.year, t3.Co.month - 1, t3.Co.day));
      return new Date(h2.getUTCFullYear(), h2.getUTCMonth(), h2.getUTCDate(), h2.getUTCHours(), h2.getUTCMinutes(), h2.getUTCSeconds(), h2.getUTCMilliseconds()).toLocaleString(n3, s3);
    }(t2, s2, this.qu.locale);
  }, t.prototype.Ul = function(t2) {
    var i2 = this.Xo;
    this.Xo = t2, Gi(i2.jo(), this.Xo.jo()) || this.Jo.m(), Gi(i2.qo(), this.Xo.qo()) || this.Go.m(), this.ql();
  }, t.prototype.ql = function() {
    this.il = null;
  }, t.prototype.ul = function() {
    this.ql(), this.Ko.clear();
  }, t.prototype.rl = function() {
    var t2 = this.qu.dateFormat;
    this.zi.timeVisible ? this.Il = new Xi({ co: t2, vo: this.zi.secondsVisible ? "%h:%m:%s" : "%h:%m", _o: "   ", do: this.qu.locale }) : this.Il = new Yi(t2, this.qu.locale);
  }, t.prototype.al = function() {
    if (this.zi.fixLeftEdge) {
      var t2 = this._l();
      if (null !== t2) {
        var i2 = this.ss();
        if (null !== i2) {
          var n2 = i2.In() - t2;
          if (n2 < 0) {
            var s2 = this.sl - n2 - 1;
            this.yn(s2);
          }
          this.Ml();
        }
      }
    }
  }, t.prototype.ol = function() {
    this.bl(), this.Ml();
  }, t;
}();
var hn;
var rn = function(t) {
  function i2(i3) {
    var n2 = t.call(this) || this;
    return n2.Xl = /* @__PURE__ */ new Map(), n2.Bt = i3, n2;
  }
  return m(i2, t), i2.prototype.Y = function(t2) {
  }, i2.prototype.K = function(t2) {
    if (this.Bt.yt) {
      t2.save();
      for (var i3 = 0, n2 = 0, s2 = this.Bt.Zl; n2 < s2.length; n2++) {
        if (0 !== (a2 = s2[n2]).Gt.length) {
          t2.font = a2.T;
          var h2 = this.Jl(t2, a2.Gt);
          h2 > this.Bt.Ht ? a2.Al = this.Bt.Ht / h2 : a2.Al = 1, i3 += a2.Gl * a2.Al;
        }
      }
      var r2 = 0;
      switch (this.Bt.Ql) {
        case "top":
          r2 = 0;
          break;
        case "center":
          r2 = Math.max((this.Bt.Yt - i3) / 2, 0);
          break;
        case "bottom":
          r2 = Math.max(this.Bt.Yt - i3, 0);
      }
      t2.fillStyle = this.Bt.A;
      for (var e2 = 0, u2 = this.Bt.Zl; e2 < u2.length; e2++) {
        var a2 = u2[e2];
        t2.save();
        var o2 = 0;
        switch (this.Bt.tf) {
          case "left":
            t2.textAlign = "left", o2 = a2.Gl / 2;
            break;
          case "center":
            t2.textAlign = "center", o2 = this.Bt.Ht / 2;
            break;
          case "right":
            t2.textAlign = "right", o2 = this.Bt.Ht - 1 - a2.Gl / 2;
        }
        t2.translate(o2, r2), t2.textBaseline = "top", t2.font = a2.T, t2.scale(a2.Al, a2.Al), t2.fillText(a2.Gt, 0, a2.if), t2.restore(), r2 += a2.Gl * a2.Al;
      }
      t2.restore();
    }
  }, i2.prototype.Jl = function(t2, i3) {
    var n2 = this.nf(t2.font), s2 = n2.get(i3);
    return void 0 === s2 && (s2 = t2.measureText(i3).width, n2.set(i3, s2)), s2;
  }, i2.prototype.nf = function(t2) {
    var i3 = this.Xl.get(t2);
    return void 0 === i3 && (i3 = /* @__PURE__ */ new Map(), this.Xl.set(t2, i3)), i3;
  }, i2;
}(O);
var en = function() {
  function t(t2) {
    this.ft = true, this.Wt = { yt: false, A: "", Yt: 0, Ht: 0, Zl: [], Ql: "center", tf: "center" }, this.zt = new rn(this.Wt), this.Rt = t2;
  }
  return t.prototype.vt = function() {
    this.ft = true;
  }, t.prototype.dt = function(t2, i2) {
    return this.ft && (this.wt(t2, i2), this.ft = false), this.zt;
  }, t.prototype.wt = function(t2, i2) {
    var n2 = this.Rt.W(), s2 = this.Wt;
    s2.yt = n2.visible, s2.yt && (s2.A = n2.color, s2.Ht = i2, s2.Yt = t2, s2.tf = n2.horzAlign, s2.Ql = n2.vertAlign, s2.Zl = [{ Gt: n2.text, T: L(n2.fontSize, n2.fontFamily, n2.fontStyle), Gl: 1.2 * n2.fontSize, if: 0, Al: 0 }]);
  }, t;
}();
var un = function(t) {
  function i2(i3, n2) {
    var s2 = t.call(this) || this;
    return s2.zi = n2, s2.Hi = new en(s2), s2;
  }
  return m(i2, t), i2.prototype.nn = function() {
    return [];
  }, i2.prototype.tn = function() {
    return [this.Hi];
  }, i2.prototype.W = function() {
    return this.zi;
  }, i2.prototype.hn = function() {
    this.Hi.vt();
  }, i2;
}(Q);
!function(t) {
  t[t.OnTouchEnd = 0] = "OnTouchEnd", t[t.OnNextTap = 1] = "OnNextTap";
}(hn || (hn = {}));
var an;
var on;
var ln;
var fn = function() {
  function t(t2, i2) {
    this.sf = [], this.hf = [], this.hh = 0, this.rf = null, this.ef = null, this.uf = new y(), this.af = new y(), this.lf = null, this.ff = t2, this.zi = i2, this.cf = new E(this), this.Da = new sn(this, i2.timeScale, this.zi.localization), this.ct = new tt(this, i2.crosshair), this.vf = new yi(i2.crosshair), this._f = new un(this, i2.watermark), this.df(), this.sf[0].za(2e3), this.wf = this.Mf(0), this.bf = this.Mf(1);
  }
  return t.prototype.Ce = function() {
    this.mf(new nt(3));
  }, t.prototype.Wr = function() {
    this.mf(new nt(2));
  }, t.prototype.We = function() {
    this.mf(new nt(1));
  }, t.prototype.Se = function(t2) {
    var i2 = this.pf(t2);
    this.mf(i2);
  }, t.prototype.gf = function() {
    return this.ef;
  }, t.prototype.yf = function(t2) {
    var i2 = this.ef;
    this.ef = t2, null !== i2 && this.Se(i2.kf), null !== t2 && this.Se(t2.kf);
  }, t.prototype.W = function() {
    return this.zi;
  }, t.prototype.Pr = function(t2) {
    k(this.zi, t2), this.sf.forEach(function(i2) {
      return i2.Oa(t2);
    }), void 0 !== t2.timeScale && this.Da.Pr(t2.timeScale), void 0 !== t2.localization && this.Da.el(t2.localization), (t2.leftPriceScale || t2.rightPriceScale) && this.uf.m(), this.wf = this.Mf(0), this.bf = this.Mf(1), this.Ce();
  }, t.prototype.Nf = function(t2, i2) {
    if ("left" !== t2)
      if ("right" !== t2) {
        var n2 = this.xf(t2);
        null !== n2 && (n2.Ct.Pr(i2), this.uf.m());
      } else
        this.Pr({ rightPriceScale: i2 });
    else
      this.Pr({ leftPriceScale: i2 });
  }, t.prototype.xf = function(t2) {
    for (var i2 = 0, n2 = this.sf; i2 < n2.length; i2++) {
      var s2 = n2[i2], h2 = s2.Va(t2);
      if (null !== h2)
        return { It: s2, Ct: h2 };
    }
    return null;
  }, t.prototype.bt = function() {
    return this.Da;
  }, t.prototype.Cf = function() {
    return this.sf;
  }, t.prototype.Sf = function() {
    return this._f;
  }, t.prototype.Tf = function() {
    return this.ct;
  }, t.prototype.Df = function() {
    return this.af;
  }, t.prototype.Af = function(t2, i2) {
    t2.ia(i2), this.yl();
  }, t.prototype.Ra = function(t2) {
    this.hh = t2, this.Da.Ra(this.hh), this.sf.forEach(function(i2) {
      return i2.Ra(t2);
    }), this.yl();
  }, t.prototype.df = function(t2) {
    var i2 = new qi(this.Da, this);
    void 0 !== t2 ? this.sf.splice(t2, 0, i2) : this.sf.push(i2);
    var n2 = void 0 === t2 ? this.sf.length - 1 : t2, s2 = new nt(3);
    return s2.cn(n2, { vn: 0, _n: true }), this.mf(s2), i2;
  }, t.prototype.Ka = function(t2, i2, n2) {
    t2.Ka(i2, n2);
  }, t.prototype.Xa = function(t2, i2, n2) {
    t2.Xa(i2, n2), this.Te(), this.mf(this.Bf(t2, 2));
  }, t.prototype.Za = function(t2, i2) {
    t2.Za(i2), this.mf(this.Bf(t2, 2));
  }, t.prototype.Ja = function(t2, i2, n2) {
    i2.Xu() || t2.Ja(i2, n2);
  }, t.prototype.Ga = function(t2, i2, n2) {
    i2.Xu() || (t2.Ga(i2, n2), this.Te(), this.mf(this.Bf(t2, 2)));
  }, t.prototype.Qa = function(t2, i2) {
    i2.Xu() || (t2.Qa(i2), this.mf(this.Bf(t2, 2)));
  }, t.prototype.no = function(t2, i2) {
    t2.no(i2), this.mf(this.Bf(t2, 2));
  }, t.prototype.Lf = function(t2) {
    this.Da.da(t2);
  }, t.prototype.Ef = function(t2, i2) {
    var n2 = this.bt();
    if (!n2.wi() && 0 !== i2) {
      var s2 = n2.Ht();
      t2 = Math.max(1, Math.min(t2, s2)), n2.Al(t2, i2), this.yl();
    }
  }, t.prototype.Ff = function(t2) {
    this.Of(0), this.Vf(t2), this.Pf();
  }, t.prototype.Wf = function(t2) {
    this.Da.wa(t2), this.yl();
  }, t.prototype.zf = function() {
    this.Da.Ma(), this.Wr();
  }, t.prototype.Of = function(t2) {
    this.rf = t2, this.Da.ba(t2);
  }, t.prototype.Vf = function(t2) {
    var i2 = false;
    return null !== this.rf && Math.abs(t2 - this.rf) > 20 && (this.rf = null, i2 = true), this.Da.ma(t2), this.yl(), i2;
  }, t.prototype.Pf = function() {
    this.Da.pa(), this.Wr(), this.rf = null;
  }, t.prototype._t = function() {
    return this.hf;
  }, t.prototype.Rf = function(t2, i2, n2) {
    this.ct.Yi(t2, i2);
    var s2 = NaN, h2 = this.Da.pl(t2), r2 = this.Da.ss();
    null !== r2 && (h2 = Math.min(Math.max(r2.In(), h2), r2.jn()));
    var e2 = n2.ji(), u2 = e2.kt();
    null !== u2 && (s2 = e2.qi(i2, u2)), s2 = this.vf.Je(s2, h2, n2), this.ct.Zi(h2, s2, n2), this.We(), this.af.m(this.ct.Mt(), { x: t2, y: i2 });
  }, t.prototype.If = function() {
    this.Tf().Gi(), this.We(), this.af.m(null, null);
  }, t.prototype.Te = function() {
    var t2 = this.ct.It();
    if (null !== t2) {
      var i2 = this.ct.Ki(), n2 = this.ct.Xi();
      this.Rf(i2, n2, t2);
    }
    this.ct.hn();
  }, t.prototype.jf = function(t2, i2, n2) {
    var s2 = this.Da.gi(0);
    void 0 !== i2 && void 0 !== n2 && this.Da.vt(i2, n2);
    var h2 = this.Da.gi(0), r2 = this.Da.ml(), e2 = this.Da.ss();
    if (null !== e2 && null !== s2 && null !== h2) {
      var u2 = e2.Uh(r2), a2 = s2.So > h2.So, o2 = null !== t2 && t2 > r2 && !a2, l2 = u2 && this.Da.W().shiftVisibleRangeOnNewBar;
      if (o2 && !l2) {
        var f2 = t2 - r2;
        this.Da.yn(this.Da.Nl() - f2);
      }
    }
    this.Da.Dl(t2);
  }, t.prototype.Be = function(t2) {
    null !== t2 && t2.ho();
  }, t.prototype.oh = function(t2) {
    var i2 = this.sf.find(function(i3) {
      return i3.oa().includes(t2);
    });
    return void 0 === i2 ? null : i2;
  }, t.prototype.yl = function() {
    this._f.hn(), this.sf.forEach(function(t2) {
      return t2.ho();
    }), this.Te();
  }, t.prototype.g = function() {
    this.sf.forEach(function(t2) {
      return t2.g();
    }), this.sf.length = 0, this.zi.localization.priceFormatter = void 0, this.zi.localization.timeFormatter = void 0;
  }, t.prototype.qf = function() {
    return this.cf;
  }, t.prototype.dh = function() {
    return this.cf.W();
  }, t.prototype.Pa = function() {
    return this.uf;
  }, t.prototype.Uf = function(t2, i2) {
    var n2 = this.sf[0], s2 = this.Hf(i2, t2, n2);
    return this.hf.push(s2), 1 === this.hf.length ? this.Ce() : this.Wr(), s2;
  }, t.prototype.Yf = function(t2) {
    var i2 = this.oh(t2), n2 = this.hf.indexOf(t2);
    r(-1 !== n2, "Series not found"), this.hf.splice(n2, 1), u(i2).ca(t2), t2.g && t2.g();
  }, t.prototype.xe = function(t2, i2) {
    var n2 = u(this.oh(t2));
    n2.ca(t2);
    var s2 = this.xf(i2);
    if (null === s2) {
      var h2 = t2.xi();
      n2.la(t2, i2, h2);
    } else {
      h2 = s2.It === n2 ? t2.xi() : void 0;
      s2.It.la(t2, i2, h2);
    }
  }, t.prototype.zl = function() {
    var t2 = new nt(2);
    t2.Mn(), this.mf(t2);
  }, t.prototype.$f = function(t2) {
    var i2 = new nt(2);
    i2.mn(t2), this.mf(i2);
  }, t.prototype.pn = function() {
    var t2 = new nt(2);
    t2.pn(), this.mf(t2);
  }, t.prototype.gn = function(t2) {
    var i2 = new nt(2);
    i2.gn(t2), this.mf(i2);
  }, t.prototype.yn = function(t2) {
    var i2 = new nt(2);
    i2.yn(t2), this.mf(i2);
  }, t.prototype.Kf = function() {
    return this.zi.rightPriceScale.visible ? "right" : "left";
  }, t.prototype.Xf = function() {
    return this.bf;
  }, t.prototype.Zf = function() {
    return this.wf;
  }, t.prototype.Dt = function(t2) {
    var i2 = this.bf, n2 = this.wf;
    if (i2 === n2)
      return i2;
    if (t2 = Math.max(0, Math.min(100, Math.round(100 * t2))), null === this.lf || this.lf.Pn !== n2 || this.lf.Wn !== i2)
      this.lf = { Pn: n2, Wn: i2, Jf: /* @__PURE__ */ new Map() };
    else {
      var s2 = this.lf.Jf.get(t2);
      if (void 0 !== s2)
        return s2;
    }
    var h2 = function(t3, i3, n3) {
      var s3 = w(t3), h3 = s3[0], r2 = s3[1], e2 = s3[2], u2 = s3[3], a2 = w(i3), o2 = a2[0], c2 = a2[1], v2 = a2[2], _2 = a2[3], d2 = [l(h3 + n3 * (o2 - h3)), l(r2 + n3 * (c2 - r2)), l(e2 + n3 * (v2 - e2)), f(u2 + n3 * (_2 - u2))];
      return "rgba(".concat(d2[0], ", ").concat(d2[1], ", ").concat(d2[2], ", ").concat(d2[3], ")");
    }(n2, i2, t2 / 100);
    return this.lf.Jf.set(t2, h2), h2;
  }, t.prototype.Bf = function(t2, i2) {
    var n2 = new nt(i2);
    if (null !== t2) {
      var s2 = this.sf.indexOf(t2);
      n2.cn(s2, { vn: i2 });
    }
    return n2;
  }, t.prototype.pf = function(t2, i2) {
    return void 0 === i2 && (i2 = 2), this.Bf(this.oh(t2), i2);
  }, t.prototype.mf = function(t2) {
    this.ff && this.ff(t2), this.sf.forEach(function(t3) {
      return t3.eo().ou().vt();
    });
  }, t.prototype.Hf = function(t2, i2, n2) {
    var s2 = new gi(this, t2, i2), h2 = void 0 !== t2.priceScaleId ? t2.priceScaleId : this.Kf();
    return n2.la(s2, h2), it(h2) || s2.Pr(t2), s2;
  }, t.prototype.Mf = function(t2) {
    var i2 = this.zi.layout;
    return "gradient" === i2.background.type ? 0 === t2 ? i2.background.topColor : i2.background.bottomColor : i2.background.color;
  }, t;
}();
function cn(t) {
  void 0 !== t.borderColor && (t.borderUpColor = t.borderColor, t.borderDownColor = t.borderColor), void 0 !== t.wickColor && (t.wickUpColor = t.wickColor, t.wickDownColor = t.wickColor);
}
function vn(t) {
  return !N(t) && !C(t);
}
function _n(t) {
  return N(t);
}
!function(t) {
  t[t.Disabled = 0] = "Disabled", t[t.Continuous = 1] = "Continuous", t[t.OnDataUpdate = 2] = "OnDataUpdate";
}(an || (an = {})), function(t) {
  t[t.LastBar = 0] = "LastBar", t[t.LastVisible = 1] = "LastVisible";
}(on || (on = {})), function(t) {
  t.Solid = "solid", t.VerticalGradient = "gradient";
}(ln || (ln = {}));
var dn = function() {
  function t(t2, i2) {
    this.Ft = t2, this.Ot = i2;
  }
  return t.prototype.br = function(t2) {
    return this.Ft === t2.Ft && this.Ot === t2.Ot;
  }, t;
}();
function wn(t) {
  return t.ownerDocument && t.ownerDocument.defaultView && t.ownerDocument.defaultView.devicePixelRatio || 1;
}
function Mn(t) {
  var i2 = u(t.getContext("2d"));
  return i2.setTransform(1, 0, 0, 1, 0, 0), i2;
}
function bn(t, i2) {
  var n2 = t.createElement("canvas"), s2 = wn(n2);
  return n2.style.width = "".concat(i2.Ft, "px"), n2.style.height = "".concat(i2.Ot, "px"), n2.width = i2.Ft * s2, n2.height = i2.Ot * s2, n2;
}
function mn(i2, n2) {
  var s2 = u(i2.ownerDocument).createElement("canvas");
  i2.appendChild(s2);
  var h2 = bindToDevicePixelRatio(s2, { allowDownsampling: false });
  return h2.resizeCanvas({ width: n2.Ft, height: n2.Ot }), h2;
}
function pn(t, i2) {
  return t.Gf - i2.Gf;
}
function gn(t, i2, n2) {
  var s2 = (t.Gf - i2.Gf) / (t.rt - i2.rt);
  return Math.sign(s2) * Math.min(Math.abs(s2), n2);
}
var yn = function() {
  function t(t2, i2, n2, s2) {
    this.Qf = null, this.tc = null, this.ic = null, this.nc = null, this.sc = null, this.hc = 0, this.rc = 0, this.ec = false, this.uc = t2, this.ac = i2, this.oc = n2, this.Cn = s2;
  }
  return t.prototype.lc = function(t2, i2) {
    if (null !== this.Qf) {
      if (this.Qf.rt === i2)
        return void (this.Qf.Gf = t2);
      if (Math.abs(this.Qf.Gf - t2) < this.Cn)
        return;
    }
    this.nc = this.ic, this.ic = this.tc, this.tc = this.Qf, this.Qf = { rt: i2, Gf: t2 };
  }, t.prototype.xh = function(t2, i2) {
    if (null !== this.Qf && null !== this.tc && !(i2 - this.Qf.rt > 50)) {
      var n2 = 0, s2 = gn(this.Qf, this.tc, this.ac), h2 = pn(this.Qf, this.tc), r2 = [s2], e2 = [h2];
      if (n2 += h2, null !== this.ic) {
        var u2 = gn(this.tc, this.ic, this.ac);
        if (Math.sign(u2) === Math.sign(s2)) {
          var a2 = pn(this.tc, this.ic);
          if (r2.push(u2), e2.push(a2), n2 += a2, null !== this.nc) {
            var o2 = gn(this.ic, this.nc, this.ac);
            if (Math.sign(o2) === Math.sign(s2)) {
              var l2 = pn(this.ic, this.nc);
              r2.push(o2), e2.push(l2), n2 += l2;
            }
          }
        }
      }
      for (var f2, c2, v2, _2 = 0, d2 = 0; d2 < r2.length; ++d2)
        _2 += e2[d2] / n2 * r2[d2];
      if (!(Math.abs(_2) < this.uc))
        this.sc = { Gf: t2, rt: i2 }, this.rc = _2, this.hc = (f2 = Math.abs(_2), c2 = this.oc, v2 = Math.log(c2), Math.log(1 * v2 / -f2) / v2);
    }
  }, t.prototype.fc = function(t2) {
    var i2 = u(this.sc), n2 = t2 - i2.rt;
    return i2.Gf + this.rc * (Math.pow(this.oc, n2) - 1) / Math.log(this.oc);
  }, t.prototype.cc = function(t2) {
    return null === this.sc || this.vc(t2) === this.hc;
  }, t.prototype._c = function() {
    return this.ec;
  }, t.prototype.dc = function() {
    this.ec = true;
  }, t.prototype.vc = function(t2) {
    var i2 = t2 - u(this.sc).rt;
    return Math.min(i2, this.hc);
  }, t;
}();
var kn = "undefined" != typeof window;
function Nn() {
  return !!kn && window.navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
}
function xn() {
  return !!kn && /iPhone|iPad|iPod/.test(window.navigator.platform);
}
function Cn(t) {
  kn && void 0 !== window.chrome && t.addEventListener("mousedown", function(t2) {
    if (1 === t2.button)
      return t2.preventDefault(), false;
  });
}
var Sn = function() {
  function t(t2, i2, n2) {
    var s2 = this;
    this.wc = 0, this.Mc = null, this.bc = { tt: Number.NEGATIVE_INFINITY, it: Number.POSITIVE_INFINITY }, this.mc = 0, this.gc = null, this.yc = { tt: Number.NEGATIVE_INFINITY, it: Number.POSITIVE_INFINITY }, this.kc = null, this.Nc = false, this.xc = null, this.Cc = null, this.Sc = false, this.Tc = false, this.Dc = false, this.Ac = null, this.Bc = null, this.Lc = null, this.Ec = null, this.Fc = null, this.Oc = null, this.Vc = null, this.Pc = 0, this.Wc = false, this.zc = false, this.Rc = false, this.Ic = 0, this.jc = null, this.qc = !xn(), this.Uc = function(t3) {
      s2.Hc(t3);
    }, this.Yc = function(t3) {
      if (s2.$c(t3)) {
        var i3 = s2.Kc(t3);
        if (++s2.mc, s2.gc && s2.mc > 1)
          s2.Zc(An(t3), s2.yc).Xc < 30 && !s2.Dc && s2.Jc(i3, s2.Qc.Gc), s2.tv();
      } else {
        i3 = s2.Kc(t3);
        if (++s2.wc, s2.Mc && s2.wc > 1)
          s2.Zc(An(t3), s2.bc).Xc < 5 && !s2.Tc && s2.iv(i3, s2.Qc.nv), s2.sv();
      }
    }, this.hv = t2, this.Qc = i2, this.zi = n2, this.rv();
  }
  return t.prototype.g = function() {
    null !== this.Ac && (this.Ac(), this.Ac = null), null !== this.Bc && (this.Bc(), this.Bc = null), null !== this.Ec && (this.Ec(), this.Ec = null), null !== this.Fc && (this.Fc(), this.Fc = null), null !== this.Oc && (this.Oc(), this.Oc = null), null !== this.Lc && (this.Lc(), this.Lc = null), this.ev(), this.sv();
  }, t.prototype.uv = function(t2) {
    var i2 = this;
    this.Ec && this.Ec();
    var n2 = this.av.bind(this);
    if (this.Ec = function() {
      i2.hv.removeEventListener("mousemove", n2);
    }, this.hv.addEventListener("mousemove", n2), !this.$c(t2)) {
      var s2 = this.Kc(t2);
      this.iv(s2, this.Qc.ov), this.qc = true;
    }
  }, t.prototype.sv = function() {
    null !== this.Mc && clearTimeout(this.Mc), this.wc = 0, this.Mc = null, this.bc = { tt: Number.NEGATIVE_INFINITY, it: Number.POSITIVE_INFINITY };
  }, t.prototype.tv = function() {
    null !== this.gc && clearTimeout(this.gc), this.mc = 0, this.gc = null, this.yc = { tt: Number.NEGATIVE_INFINITY, it: Number.POSITIVE_INFINITY };
  }, t.prototype.av = function(t2) {
    if (!this.Rc && null === this.Cc && !this.$c(t2)) {
      var i2 = this.Kc(t2);
      this.iv(i2, this.Qc.lv), this.qc = true;
    }
  }, t.prototype.fv = function(t2) {
    var i2 = Ln(t2.changedTouches, u(this.jc));
    if (null !== i2 && (this.Ic = Bn(t2), null === this.Vc && !this.zc)) {
      this.Wc = true;
      var n2 = this.Zc(An(i2), u(this.Cc)), s2 = n2.cv, h2 = n2.vv, r2 = n2.Xc;
      if (this.Sc || !(r2 < 5)) {
        if (!this.Sc) {
          var e2 = 0.5 * s2, a2 = h2 >= e2 && !this.zi._v(), o2 = e2 > h2 && !this.zi.dv();
          a2 || o2 || (this.zc = true), this.Sc = true, this.Dc = true, this.ev(), this.tv();
        }
        if (!this.zc) {
          var l2 = this.Kc(t2, i2);
          this.Jc(l2, this.Qc.wv), Dn(t2);
        }
      }
    }
  }, t.prototype.Mv = function(t2) {
    if (0 === t2.button && (this.Zc(An(t2), u(this.xc)).Xc >= 5 && (this.Tc = true, this.sv()), this.Tc)) {
      var i2 = this.Kc(t2);
      this.iv(i2, this.Qc.bv);
    }
  }, t.prototype.Zc = function(t2, i2) {
    var n2 = Math.abs(i2.tt - t2.tt), s2 = Math.abs(i2.it - t2.it);
    return { cv: n2, vv: s2, Xc: n2 + s2 };
  }, t.prototype.mv = function(t2) {
    var i2 = Ln(t2.changedTouches, u(this.jc));
    if (null === i2 && 0 === t2.touches.length && (i2 = t2.changedTouches[0]), null !== i2) {
      this.jc = null, this.Ic = Bn(t2), this.ev(), this.Cc = null, this.Oc && (this.Oc(), this.Oc = null);
      var n2 = this.Kc(t2, i2);
      if (this.Jc(n2, this.Qc.pv), ++this.mc, this.gc && this.mc > 1)
        this.Zc(An(i2), this.yc).Xc < 30 && !this.Dc && this.Jc(n2, this.Qc.Gc), this.tv();
      else
        this.Dc || (this.Jc(n2, this.Qc.gv), this.Qc.gv && Dn(t2));
      0 === this.mc && Dn(t2), 0 === t2.touches.length && this.Nc && (this.Nc = false, Dn(t2));
    }
  }, t.prototype.Hc = function(t2) {
    if (0 === t2.button) {
      var i2 = this.Kc(t2);
      if (this.xc = null, this.Rc = false, this.Fc && (this.Fc(), this.Fc = null), Nn())
        this.hv.ownerDocument.documentElement.removeEventListener("mouseleave", this.Uc);
      if (!this.$c(t2))
        if (this.iv(i2, this.Qc.yv), ++this.wc, this.Mc && this.wc > 1)
          this.Zc(An(t2), this.bc).Xc < 5 && !this.Tc && this.iv(i2, this.Qc.nv), this.sv();
        else
          this.Tc || this.iv(i2, this.Qc.kv);
    }
  }, t.prototype.ev = function() {
    null !== this.kc && (clearTimeout(this.kc), this.kc = null);
  }, t.prototype.Nv = function(t2) {
    if (null === this.jc) {
      var i2 = t2.changedTouches[0];
      this.jc = i2.identifier, this.Ic = Bn(t2);
      var n2 = this.hv.ownerDocument.documentElement;
      this.Dc = false, this.Sc = false, this.zc = false, this.Cc = An(i2), this.Oc && (this.Oc(), this.Oc = null);
      var s2 = this.fv.bind(this), h2 = this.mv.bind(this);
      this.Oc = function() {
        n2.removeEventListener("touchmove", s2), n2.removeEventListener("touchend", h2);
      }, n2.addEventListener("touchmove", s2, { passive: false }), n2.addEventListener("touchend", h2, { passive: false }), this.ev(), this.kc = setTimeout(this.xv.bind(this, t2), 240);
      var r2 = this.Kc(t2, i2);
      this.Jc(r2, this.Qc.Cv), this.gc || (this.mc = 0, this.gc = setTimeout(this.tv.bind(this), 500), this.yc = An(i2));
    }
  }, t.prototype.Sv = function(t2) {
    if (0 === t2.button) {
      var i2 = this.hv.ownerDocument.documentElement;
      Nn() && i2.addEventListener("mouseleave", this.Uc), this.Tc = false, this.xc = An(t2), this.Fc && (this.Fc(), this.Fc = null);
      var n2 = this.Mv.bind(this), s2 = this.Hc.bind(this);
      if (this.Fc = function() {
        i2.removeEventListener("mousemove", n2), i2.removeEventListener("mouseup", s2);
      }, i2.addEventListener("mousemove", n2), i2.addEventListener("mouseup", s2), this.Rc = true, !this.$c(t2)) {
        var h2 = this.Kc(t2);
        this.iv(h2, this.Qc.Tv), this.Mc || (this.wc = 0, this.Mc = setTimeout(this.sv.bind(this), 500), this.bc = An(t2));
      }
    }
  }, t.prototype.rv = function() {
    var t2 = this;
    this.hv.addEventListener("mouseenter", this.uv.bind(this)), this.hv.addEventListener("touchcancel", this.ev.bind(this));
    var i2 = this.hv.ownerDocument, n2 = function(i3) {
      t2.Qc.Dv && (i3.target && t2.hv.contains(i3.target) || t2.Qc.Dv());
    };
    this.Bc = function() {
      i2.removeEventListener("touchstart", n2);
    }, this.Ac = function() {
      i2.removeEventListener("mousedown", n2);
    }, i2.addEventListener("mousedown", n2), i2.addEventListener("touchstart", n2, { passive: true }), xn() && (this.Lc = function() {
      t2.hv.removeEventListener("dblclick", t2.Yc);
    }, this.hv.addEventListener("dblclick", this.Yc)), this.hv.addEventListener("mouseleave", this.Av.bind(this)), this.hv.addEventListener("touchstart", this.Nv.bind(this), { passive: true }), Cn(this.hv), this.hv.addEventListener("mousedown", this.Sv.bind(this)), this.Bv(), this.hv.addEventListener("touchmove", function() {
    }, { passive: false });
  }, t.prototype.Bv = function() {
    var t2 = this;
    void 0 === this.Qc.Lv && void 0 === this.Qc.Ev && void 0 === this.Qc.Fv || (this.hv.addEventListener("touchstart", function(i2) {
      return t2.Ov(i2.touches);
    }, { passive: true }), this.hv.addEventListener("touchmove", function(i2) {
      if (2 === i2.touches.length && null !== t2.Vc && void 0 !== t2.Qc.Ev) {
        var n2 = Tn(i2.touches[0], i2.touches[1]) / t2.Pc;
        t2.Qc.Ev(t2.Vc, n2), Dn(i2);
      }
    }, { passive: false }), this.hv.addEventListener("touchend", function(i2) {
      t2.Ov(i2.touches);
    }));
  }, t.prototype.Ov = function(t2) {
    1 === t2.length && (this.Wc = false), 2 !== t2.length || this.Wc || this.Nc ? this.Vv() : this.Pv(t2);
  }, t.prototype.Pv = function(t2) {
    var i2 = this.hv.getBoundingClientRect() || { left: 0, top: 0 };
    this.Vc = { tt: (t2[0].clientX - i2.left + (t2[1].clientX - i2.left)) / 2, it: (t2[0].clientY - i2.top + (t2[1].clientY - i2.top)) / 2 }, this.Pc = Tn(t2[0], t2[1]), void 0 !== this.Qc.Lv && this.Qc.Lv(), this.ev();
  }, t.prototype.Vv = function() {
    null !== this.Vc && (this.Vc = null, void 0 !== this.Qc.Fv && this.Qc.Fv());
  }, t.prototype.Av = function(t2) {
    if (this.Ec && this.Ec(), !this.$c(t2) && this.qc) {
      var i2 = this.Kc(t2);
      this.iv(i2, this.Qc.Wv), this.qc = !xn();
    }
  }, t.prototype.xv = function(t2) {
    var i2 = Ln(t2.touches, u(this.jc));
    if (null !== i2) {
      var n2 = this.Kc(t2, i2);
      this.Jc(n2, this.Qc.zv), this.Dc = true, this.Nc = true;
    }
  }, t.prototype.$c = function(t2) {
    return t2.sourceCapabilities && void 0 !== t2.sourceCapabilities.firesTouchEvents ? t2.sourceCapabilities.firesTouchEvents : Bn(t2) < this.Ic + 500;
  }, t.prototype.Jc = function(t2, i2) {
    i2 && i2.call(this.Qc, t2);
  }, t.prototype.iv = function(t2, i2) {
    i2 && i2.call(this.Qc, t2);
  }, t.prototype.Kc = function(t2, i2) {
    var n2 = i2 || t2, s2 = this.hv.getBoundingClientRect() || { left: 0, top: 0 };
    return { Rv: n2.clientX, Iv: n2.clientY, jv: n2.pageX, qv: n2.pageY, Uv: n2.screenX, Hv: n2.screenY, Yv: n2.clientX - s2.left, $v: n2.clientY - s2.top, Kv: t2.ctrlKey, Xv: t2.altKey, Zv: t2.shiftKey, Jv: t2.metaKey, Gv: !t2.type.startsWith("mouse") && "contextmenu" !== t2.type && "click" !== t2.type, Qv: t2.type, t_: n2.target, i_: t2.view, n_: function() {
      "touchstart" !== t2.type && Dn(t2);
    } };
  }, t;
}();
function Tn(t, i2) {
  var n2 = t.clientX - i2.clientX, s2 = t.clientY - i2.clientY;
  return Math.sqrt(n2 * n2 + s2 * s2);
}
function Dn(t) {
  t.cancelable && t.preventDefault();
}
function An(t) {
  return { tt: t.pageX, it: t.pageY };
}
function Bn(t) {
  return t.timeStamp || performance.now();
}
function Ln(t, i2) {
  for (var n2 = 0; n2 < t.length; ++n2)
    if (t[n2].identifier === i2)
      return t[n2];
  return null;
}
var En = function() {
  function t(t2, i2, n2, s2) {
    this.rh = new Rt(200), this.R = 0, this.s_ = "", this.Yh = "", this.th = [], this.h_ = /* @__PURE__ */ new Map(), this.R = t2, this.s_ = i2, this.Yh = L(t2, n2, s2);
  }
  return t.prototype.g = function() {
    this.rh.ih(), this.th = [], this.h_.clear();
  }, t.prototype.r_ = function(t2, i2, n2, s2, h2) {
    var r2 = this.e_(t2, i2);
    if ("left" !== h2) {
      var e2 = wn(t2.canvas);
      n2 -= Math.floor(r2.u_ * e2);
    }
    s2 -= Math.floor(r2.Yt / 2), t2.drawImage(r2.a_, n2, s2, r2.Ht, r2.Yt);
  }, t.prototype.e_ = function(t2, i2) {
    var n2, s2 = this;
    if (this.h_.has(i2))
      n2 = e(this.h_.get(i2));
    else {
      if (this.th.length >= 200) {
        var h2 = e(this.th.shift());
        this.h_.delete(h2);
      }
      var r2 = wn(t2.canvas), u2 = Math.ceil(this.R / 4.5), a2 = Math.round(this.R / 10), o2 = Math.ceil(this.rh.Qt(t2, i2)), l2 = St(Math.round(o2 + 2 * u2)), f2 = St(this.R + 2 * u2), c2 = bn(document, new dn(l2, f2));
      n2 = { Gt: i2, u_: Math.round(Math.max(1, o2)), Ht: Math.ceil(l2 * r2), Yt: Math.ceil(f2 * r2), a_: c2 }, 0 !== o2 && (this.th.push(n2.Gt), this.h_.set(n2.Gt, n2)), q(t2 = Mn(n2.a_), r2, function() {
        t2.font = s2.Yh, t2.fillStyle = s2.s_, t2.fillText(i2, 0, f2 - u2 - a2);
      });
    }
    return n2;
  }, t;
}();
var Fn = function() {
  function t(t2, i2, n2, s2) {
    var h2 = this;
    this._i = null, this.o_ = null, this.l_ = false, this.f_ = new Rt(50), this.c_ = new En(11, "#000"), this.s_ = null, this.Yh = null, this.v_ = 0, this.__ = false, this.d_ = function() {
      h2.w_(h2.cf.W()), h2.__ || h2.Di.M_().jt().Wr();
    }, this.b_ = function() {
      h2.__ || h2.Di.M_().jt().Wr();
    }, this.Di = t2, this.zi = i2, this.cf = n2, this.m_ = "left" === s2, this.p_ = document.createElement("div"), this.p_.style.height = "100%", this.p_.style.overflow = "hidden", this.p_.style.width = "25px", this.p_.style.left = "0", this.p_.style.position = "relative", this.g_ = mn(this.p_, new dn(16, 16)), this.g_.subscribeCanvasConfigured(this.d_);
    var r2 = this.g_.canvas;
    r2.style.position = "absolute", r2.style.zIndex = "1", r2.style.left = "0", r2.style.top = "0", this.y_ = mn(this.p_, new dn(16, 16)), this.y_.subscribeCanvasConfigured(this.b_);
    var e2 = this.y_.canvas;
    e2.style.position = "absolute", e2.style.zIndex = "2", e2.style.left = "0", e2.style.top = "0";
    var u2 = { Tv: this.k_.bind(this), Cv: this.k_.bind(this), bv: this.N_.bind(this), wv: this.N_.bind(this), Dv: this.x_.bind(this), yv: this.C_.bind(this), pv: this.C_.bind(this), nv: this.S_.bind(this), Gc: this.S_.bind(this), ov: this.T_.bind(this), Wv: this.D_.bind(this) };
    this.A_ = new Sn(this.y_.canvas, u2, { _v: function() {
      return false;
    }, dv: function() {
      return true;
    } });
  }
  return t.prototype.g = function() {
    this.A_.g(), this.y_.unsubscribeCanvasConfigured(this.b_), this.y_.destroy(), this.g_.unsubscribeCanvasConfigured(this.d_), this.g_.destroy(), null !== this._i && this._i._a().M(this), this._i = null, this.c_.g();
  }, t.prototype.B_ = function() {
    return this.p_;
  }, t.prototype.ht = function() {
    return u(this._i).W().borderColor;
  }, t.prototype.L_ = function() {
    return this.zi.textColor;
  }, t.prototype.S = function() {
    return this.zi.fontSize;
  }, t.prototype.E_ = function() {
    return L(this.S(), this.zi.fontFamily);
  }, t.prototype.F_ = function() {
    var t2 = this.cf.W(), i2 = this.s_ !== t2.A, n2 = this.Yh !== t2.T;
    return (i2 || n2) && (this.w_(t2), this.s_ = t2.A), n2 && (this.f_.ih(), this.Yh = t2.T), t2;
  }, t.prototype.O_ = function() {
    if (null === this._i)
      return 0;
    var t2 = 0, i2 = this.F_(), n2 = Mn(this.g_.canvas), s2 = this._i.au();
    n2.font = this.E_(), s2.length > 0 && (t2 = Math.max(this.f_.Qt(n2, s2[0].yu), this.f_.Qt(n2, s2[s2.length - 1].yu)));
    for (var h2 = this.V_(), r2 = h2.length; r2--; ) {
      var e2 = this.f_.Qt(n2, h2[r2].Gt());
      e2 > t2 && (t2 = e2);
    }
    var u2 = this._i.kt();
    if (null !== u2 && null !== this.o_) {
      var a2 = this._i.qi(1, u2), o2 = this._i.qi(this.o_.Ot - 2, u2);
      t2 = Math.max(t2, this.f_.Qt(n2, this._i.Mi(Math.floor(Math.min(a2, o2)) + 0.11111111111111, u2)), this.f_.Qt(n2, this._i.Mi(Math.ceil(Math.max(a2, o2)) - 0.11111111111111, u2)));
    }
    var l2 = t2 || 34, f2 = Math.ceil(i2.N + i2.C + i2.L + i2.F + l2);
    return f2 += f2 % 2;
  }, t.prototype.P_ = function(t2) {
    if (t2.Ft < 0 || t2.Ot < 0)
      throw new Error("Try to set invalid size to PriceAxisWidget " + JSON.stringify(t2));
    null !== this.o_ && this.o_.br(t2) || (this.o_ = t2, this.__ = true, this.g_.resizeCanvas({ width: t2.Ft, height: t2.Ot }), this.y_.resizeCanvas({ width: t2.Ft, height: t2.Ot }), this.__ = false, this.p_.style.width = t2.Ft + "px", this.p_.style.height = t2.Ot + "px", this.p_.style.minWidth = t2.Ft + "px");
  }, t.prototype.W_ = function() {
    return u(this.o_).Ft;
  }, t.prototype.Si = function(t2) {
    this._i !== t2 && (null !== this._i && this._i._a().M(this), this._i = t2, t2._a().u(this.Eu.bind(this), this));
  }, t.prototype.Ct = function() {
    return this._i;
  }, t.prototype.ih = function() {
    var t2 = this.Di.z_();
    this.Di.M_().jt().no(t2, u(this.Ct()));
  }, t.prototype.R_ = function(t2) {
    if (null !== this.o_) {
      if (1 !== t2) {
        var i2 = Mn(this.g_.canvas);
        this.I_(), this.j_(i2, this.g_.pixelRatio), this.Rs(i2, this.g_.pixelRatio), this.q_(i2, this.g_.pixelRatio), this.U_(i2, this.g_.pixelRatio);
      }
      var n2 = Mn(this.y_.canvas), s2 = this.o_.Ft, h2 = this.o_.Ot;
      q(n2, this.y_.pixelRatio, function() {
        n2.clearRect(0, 0, s2, h2);
      }), this.H_(n2, this.y_.pixelRatio);
    }
  }, t.prototype.Y_ = function() {
    return this.g_.canvas;
  }, t.prototype.vt = function() {
    var t2;
    null === (t2 = this._i) || void 0 === t2 || t2.au();
  }, t.prototype.k_ = function(t2) {
    if (null !== this._i && !this._i.wi() && this.Di.M_().W().handleScale.axisPressedMouseMove.price) {
      var i2 = this.Di.M_().jt(), n2 = this.Di.z_();
      this.l_ = true, i2.Ka(n2, this._i, t2.$v);
    }
  }, t.prototype.N_ = function(t2) {
    if (null !== this._i && this.Di.M_().W().handleScale.axisPressedMouseMove.price) {
      var i2 = this.Di.M_().jt(), n2 = this.Di.z_(), s2 = this._i;
      i2.Xa(n2, s2, t2.$v);
    }
  }, t.prototype.x_ = function() {
    if (null !== this._i && this.Di.M_().W().handleScale.axisPressedMouseMove.price) {
      var t2 = this.Di.M_().jt(), i2 = this.Di.z_(), n2 = this._i;
      this.l_ && (this.l_ = false, t2.Za(i2, n2));
    }
  }, t.prototype.C_ = function(t2) {
    if (null !== this._i && this.Di.M_().W().handleScale.axisPressedMouseMove.price) {
      var i2 = this.Di.M_().jt(), n2 = this.Di.z_();
      this.l_ = false, i2.Za(n2, this._i);
    }
  }, t.prototype.S_ = function(t2) {
    this.Di.M_().W().handleScale.axisDoubleClickReset && this.ih();
  }, t.prototype.T_ = function(t2) {
    null !== this._i && (!this.Di.M_().jt().W().handleScale.axisPressedMouseMove.price || this._i.vr() || this._i.Zu() || this.K_(1));
  }, t.prototype.D_ = function(t2) {
    this.K_(0);
  }, t.prototype.V_ = function() {
    var t2 = this, i2 = [], n2 = null === this._i ? void 0 : this._i;
    return function(s2) {
      for (var h2 = 0; h2 < s2.length; ++h2)
        for (var r2 = s2[h2].nn(t2.Di.z_(), n2), e2 = 0; e2 < r2.length; e2++)
          i2.push(r2[e2]);
    }(this.Di.z_().oa()), i2;
  }, t.prototype.j_ = function(t2, i2) {
    var n2 = this;
    if (null !== this.o_) {
      var s2 = this.o_.Ft, h2 = this.o_.Ot;
      q(t2, i2, function() {
        var i3 = n2.Di.z_().jt(), r2 = i3.Zf(), e2 = i3.Xf();
        r2 === e2 ? U(t2, 0, 0, s2, h2, r2) : H(t2, 0, 0, s2, h2, r2, e2);
      });
    }
  }, t.prototype.Rs = function(t2, i2) {
    if (null !== this.o_ && null !== this._i && this._i.W().borderVisible) {
      t2.save(), t2.fillStyle = this.ht();
      var n2, s2 = Math.max(1, Math.floor(this.F_().N * i2));
      n2 = this.m_ ? Math.floor(this.o_.Ft * i2) - s2 : 0, t2.fillRect(n2, 0, s2, Math.ceil(this.o_.Ot * i2)), t2.restore();
    }
  }, t.prototype.q_ = function(t2, i2) {
    if (null !== this.o_ && null !== this._i) {
      var n2 = this._i.au();
      t2.save(), t2.strokeStyle = this.ht(), t2.font = this.E_(), t2.fillStyle = this.ht();
      var s2 = this.F_(), h2 = this._i.W().borderVisible && this._i.W().drawTicks, r2 = this.m_ ? Math.floor((this.o_.Ft - s2.C) * i2 - s2.N * i2) : Math.floor(s2.N * i2), e2 = this.m_ ? Math.round(r2 - s2.L * i2) : Math.round(r2 + s2.C * i2 + s2.L * i2), u2 = this.m_ ? "right" : "left", a2 = Math.max(1, Math.floor(i2)), o2 = Math.floor(0.5 * i2);
      if (h2) {
        var l2 = Math.round(s2.C * i2);
        t2.beginPath();
        for (var f2 = 0, c2 = n2; f2 < c2.length; f2++) {
          var v2 = c2[f2];
          t2.rect(r2, Math.round(v2.su * i2) - o2, l2, a2);
        }
        t2.fill();
      }
      t2.fillStyle = this.L_();
      for (var _2 = 0, d2 = n2; _2 < d2.length; _2++) {
        v2 = d2[_2];
        this.c_.r_(t2, v2.yu, e2, Math.round(v2.su * i2), u2);
      }
      t2.restore();
    }
  }, t.prototype.I_ = function() {
    if (null !== this.o_ && null !== this._i) {
      var t2 = this.o_.Ot / 2, i2 = [], n2 = this._i.oa().slice(), s2 = this.Di.z_(), h2 = this.F_();
      this._i === s2.fh() && this.Di.z_().oa().forEach(function(t3) {
        s2.lh(t3) && n2.push(t3);
      });
      var r2 = this._i.Ge()[0], e2 = this._i;
      n2.forEach(function(n3) {
        var h3 = n3.nn(s2, e2);
        h3.forEach(function(t3) {
          t3.oi(null), t3.li() && i2.push(t3);
        }), r2 === n3 && h3.length > 0 && (t2 = h3[0].ti());
      });
      var u2 = i2.filter(function(i3) {
        return i3.ti() <= t2;
      }), a2 = i2.filter(function(i3) {
        return i3.ti() > t2;
      });
      if (u2.sort(function(t3, i3) {
        return i3.ti() - t3.ti();
      }), u2.length && a2.length && a2.push(u2[0]), a2.sort(function(t3, i3) {
        return t3.ti() - i3.ti();
      }), i2.forEach(function(t3) {
        return t3.oi(t3.ti());
      }), this._i.W().alignLabels) {
        for (var o2 = 1; o2 < u2.length; o2++) {
          var l2 = u2[o2], f2 = (v2 = u2[o2 - 1]).Yt(h2, false);
          l2.ti() > (_2 = v2.ai()) - f2 && l2.oi(_2 - f2);
        }
        for (var c2 = 1; c2 < a2.length; c2++) {
          var v2, _2;
          l2 = a2[c2], f2 = (v2 = a2[c2 - 1]).Yt(h2, true);
          l2.ti() < (_2 = v2.ai()) + f2 && l2.oi(_2 + f2);
        }
      }
    }
  }, t.prototype.U_ = function(t2, i2) {
    var n2 = this;
    if (null !== this.o_) {
      t2.save();
      var s2 = this.o_, h2 = this.V_(), r2 = this.F_(), e2 = this.m_ ? "right" : "left";
      h2.forEach(function(h3) {
        if (h3.fi()) {
          var a2 = h3.dt(u(n2._i));
          t2.save(), a2.H(t2, r2, n2.f_, s2.Ft, e2, i2), t2.restore();
        }
      }), t2.restore();
    }
  }, t.prototype.H_ = function(t2, i2) {
    var n2 = this;
    if (null !== this.o_ && null !== this._i) {
      t2.save();
      var s2 = this.o_, h2 = this.Di.M_().jt(), r2 = [], e2 = this.Di.z_(), a2 = h2.Tf().nn(e2, this._i);
      a2.length && r2.push(a2);
      var o2 = this.F_(), l2 = this.m_ ? "right" : "left";
      r2.forEach(function(h3) {
        h3.forEach(function(h4) {
          t2.save(), h4.dt(u(n2._i)).H(t2, o2, n2.f_, s2.Ft, l2, i2), t2.restore();
        });
      }), t2.restore();
    }
  }, t.prototype.K_ = function(t2) {
    this.p_.style.cursor = 1 === t2 ? "ns-resize" : "default";
  }, t.prototype.Eu = function() {
    var t2 = this.O_();
    this.v_ < t2 && this.Di.M_().jt().Ce(), this.v_ = t2;
  }, t.prototype.w_ = function(t2) {
    this.c_.g(), this.c_ = new En(t2.S, t2.A, t2.D);
  }, t;
}();
function On(t, i2, n2, s2, h2) {
  t.$ && t.$(i2, n2, s2, h2);
}
function Vn(t, i2, n2, s2, h2) {
  t.H(i2, n2, s2, h2);
}
function Pn(t, i2) {
  return t.tn(i2);
}
function Wn(t, i2) {
  return void 0 !== t.Pe ? t.Pe(i2) : [];
}
var zn = function() {
  function t(t2, i2) {
    var n2 = this;
    this.o_ = new dn(0, 0), this.X_ = null, this.Z_ = null, this.J_ = null, this.G_ = false, this.Q_ = new y(), this.td = 0, this.nd = false, this.sd = null, this.hd = false, this.rd = null, this.ed = null, this.__ = false, this.d_ = function() {
      n2.__ || null === n2.ud || n2.pi().Wr();
    }, this.b_ = function() {
      n2.__ || null === n2.ud || n2.pi().Wr();
    }, this.ad = t2, this.ud = i2, this.ud.ro().u(this.od.bind(this), this, true), this.ld = document.createElement("td"), this.ld.style.padding = "0", this.ld.style.position = "relative";
    var s2 = document.createElement("div");
    s2.style.width = "100%", s2.style.height = "100%", s2.style.position = "relative", s2.style.overflow = "hidden", this.fd = document.createElement("td"), this.fd.style.padding = "0", this.vd = document.createElement("td"), this.vd.style.padding = "0", this.ld.appendChild(s2), this.g_ = mn(s2, new dn(16, 16)), this.g_.subscribeCanvasConfigured(this.d_);
    var h2 = this.g_.canvas;
    h2.style.position = "absolute", h2.style.zIndex = "1", h2.style.left = "0", h2.style.top = "0", this.y_ = mn(s2, new dn(16, 16)), this.y_.subscribeCanvasConfigured(this.b_);
    var r2 = this.y_.canvas;
    r2.style.position = "absolute", r2.style.zIndex = "2", r2.style.left = "0", r2.style.top = "0", this._d = document.createElement("tr"), this._d.appendChild(this.fd), this._d.appendChild(this.ld), this._d.appendChild(this.vd), this.dd(), this.A_ = new Sn(this.y_.canvas, this, { _v: function() {
      return null === n2.sd && !n2.ad.W().handleScroll.vertTouchDrag;
    }, dv: function() {
      return null === n2.sd && !n2.ad.W().handleScroll.horzTouchDrag;
    } });
  }
  return t.prototype.g = function() {
    null !== this.X_ && this.X_.g(), null !== this.Z_ && this.Z_.g(), this.y_.unsubscribeCanvasConfigured(this.b_), this.y_.destroy(), this.g_.unsubscribeCanvasConfigured(this.d_), this.g_.destroy(), null !== this.ud && this.ud.ro().M(this), this.A_.g();
  }, t.prototype.z_ = function() {
    return u(this.ud);
  }, t.prototype.wd = function(i2) {
    null !== this.ud && this.ud.ro().M(this), this.ud = i2, null !== this.ud && this.ud.ro().u(t.prototype.od.bind(this), this, true), this.dd();
  }, t.prototype.M_ = function() {
    return this.ad;
  }, t.prototype.B_ = function() {
    return this._d;
  }, t.prototype.dd = function() {
    if (null !== this.ud && (this.Md(), 0 !== this.pi()._t().length)) {
      if (null !== this.X_) {
        var t2 = this.ud.Ya();
        this.X_.Si(u(t2));
      }
      if (null !== this.Z_) {
        var i2 = this.ud.$a();
        this.Z_.Si(u(i2));
      }
    }
  }, t.prototype.bd = function() {
    null !== this.X_ && this.X_.vt(), null !== this.Z_ && this.Z_.vt();
  }, t.prototype.Wa = function() {
    return null !== this.ud ? this.ud.Wa() : 0;
  }, t.prototype.za = function(t2) {
    this.ud && this.ud.za(t2);
  }, t.prototype.ov = function(t2) {
    if (this.ud) {
      this.md();
      var i2 = t2.Yv, n2 = t2.$v;
      this.pd(i2, n2);
    }
  }, t.prototype.Tv = function(t2) {
    this.md(), this.gd(), this.pd(t2.Yv, t2.$v);
  }, t.prototype.lv = function(t2) {
    if (this.ud) {
      this.md();
      var i2 = t2.Yv, n2 = t2.$v;
      this.pd(i2, n2);
      var s2 = this.$h(i2, n2);
      this.pi().yf(s2 && { kf: s2.kf, yd: s2.yd });
    }
  }, t.prototype.kv = function(t2) {
    if (null !== this.ud) {
      this.md();
      var i2 = t2.Yv, n2 = t2.$v;
      if (this.Q_.p()) {
        var s2 = this.pi().Tf().Mt();
        this.Q_.m(s2, { x: i2, y: n2 });
      }
    }
  }, t.prototype.bv = function(t2) {
    this.md(), this.kd(t2), this.pd(t2.Yv, t2.$v);
  }, t.prototype.yv = function(t2) {
    null !== this.ud && (this.md(), this.nd = false, this.Nd(t2));
  }, t.prototype.zv = function(t2) {
    if (this.nd = true, null === this.sd) {
      var i2 = { x: t2.Yv, y: t2.$v };
      this.xd(i2, i2);
    }
  }, t.prototype.Wv = function(t2) {
    null !== this.ud && (this.md(), this.ud.jt().yf(null), this.Cd());
  }, t.prototype.Sd = function() {
    return this.Q_;
  }, t.prototype.Lv = function() {
    this.td = 1, this.Td();
  }, t.prototype.Ev = function(t2, i2) {
    if (this.ad.W().handleScale.pinch) {
      var n2 = 5 * (i2 - this.td);
      this.td = i2, this.pi().Ef(t2.tt, n2);
    }
  }, t.prototype.Cv = function(t2) {
    if (this.nd = false, this.hd = null !== this.sd, this.gd(), null !== this.sd) {
      var i2 = this.pi().Tf();
      this.rd = { x: i2.$t(), y: i2.Kt() }, this.sd = { x: t2.Yv, y: t2.$v };
    }
  }, t.prototype.wv = function(t2) {
    if (null !== this.ud) {
      var i2 = t2.Yv, n2 = t2.$v;
      if (null === this.sd)
        this.kd(t2);
      else {
        this.hd = false;
        var s2 = u(this.rd), h2 = s2.x + (i2 - this.sd.x), r2 = s2.y + (n2 - this.sd.y);
        this.pd(h2, r2);
      }
    }
  }, t.prototype.pv = function(t2) {
    0 === this.M_().W().trackingMode.exitMode && (this.hd = true), this.Dd(), this.Nd(t2);
  }, t.prototype.$h = function(t2, i2) {
    var n2 = this.ud;
    if (null === n2)
      return null;
    for (var s2 = 0, h2 = n2.oa(); s2 < h2.length; s2++) {
      var r2 = h2[s2], e2 = this.Ad(r2.tn(n2), t2, i2);
      if (null !== e2)
        return { kf: r2, i_: e2.i_, yd: e2.yd };
    }
    return null;
  }, t.prototype.Bd = function(t2, i2) {
    u("left" === i2 ? this.X_ : this.Z_).P_(new dn(t2, this.o_.Ot));
  }, t.prototype.Ld = function() {
    return this.o_;
  }, t.prototype.P_ = function(t2) {
    if (t2.Ft < 0 || t2.Ot < 0)
      throw new Error("Try to set invalid size to PaneWidget " + JSON.stringify(t2));
    this.o_.br(t2) || (this.o_ = t2, this.__ = true, this.g_.resizeCanvas({ width: t2.Ft, height: t2.Ot }), this.y_.resizeCanvas({ width: t2.Ft, height: t2.Ot }), this.__ = false, this.ld.style.width = t2.Ft + "px", this.ld.style.height = t2.Ot + "px");
  }, t.prototype.Ed = function() {
    var t2 = u(this.ud);
    t2.Ha(t2.Ya()), t2.Ha(t2.$a());
    for (var i2 = 0, n2 = t2.Ge(); i2 < n2.length; i2++) {
      var s2 = n2[i2];
      if (t2.lh(s2)) {
        var h2 = s2.Ct();
        null !== h2 && t2.Ha(h2), s2.hn();
      }
    }
  }, t.prototype.Y_ = function() {
    return this.g_.canvas;
  }, t.prototype.R_ = function(t2) {
    if (0 !== t2 && null !== this.ud) {
      if (t2 > 1 && this.Ed(), null !== this.X_ && this.X_.R_(t2), null !== this.Z_ && this.Z_.R_(t2), 1 !== t2) {
        var i2 = Mn(this.g_.canvas);
        i2.save(), this.j_(i2, this.g_.pixelRatio), this.ud && (this.Fd(i2, this.g_.pixelRatio), this.Od(i2, this.g_.pixelRatio), this.Vd(i2, this.g_.pixelRatio, Pn)), i2.restore();
      }
      var n2 = Mn(this.y_.canvas);
      n2.clearRect(0, 0, Math.ceil(this.o_.Ft * this.y_.pixelRatio), Math.ceil(this.o_.Ot * this.y_.pixelRatio)), this.Vd(n2, this.g_.pixelRatio, Wn), this.Pd(n2, this.y_.pixelRatio);
    }
  }, t.prototype.Wd = function() {
    return this.X_;
  }, t.prototype.zd = function() {
    return this.Z_;
  }, t.prototype.od = function() {
    null !== this.ud && this.ud.ro().M(this), this.ud = null;
  }, t.prototype.j_ = function(t2, i2) {
    var n2 = this;
    q(t2, i2, function() {
      var i3 = n2.pi(), s2 = i3.Zf(), h2 = i3.Xf();
      s2 === h2 ? U(t2, 0, 0, n2.o_.Ft, n2.o_.Ot, h2) : H(t2, 0, 0, n2.o_.Ft, n2.o_.Ot, s2, h2);
    });
  }, t.prototype.Fd = function(t2, i2) {
    var n2 = u(this.ud), s2 = n2.eo().ou().dt(n2.Yt(), n2.Ht());
    null !== s2 && (t2.save(), s2.H(t2, i2, false), t2.restore());
  }, t.prototype.Od = function(t2, i2) {
    var n2 = this.pi().Sf();
    this.Rd(t2, i2, Pn, On, n2), this.Rd(t2, i2, Pn, Vn, n2);
  }, t.prototype.Pd = function(t2, i2) {
    this.Rd(t2, i2, Pn, Vn, this.pi().Tf());
  }, t.prototype.Vd = function(t2, i2, n2) {
    for (var s2 = u(this.ud).oa(), h2 = 0, r2 = s2; h2 < r2.length; h2++) {
      var e2 = r2[h2];
      this.Rd(t2, i2, n2, On, e2);
    }
    for (var a2 = 0, o2 = s2; a2 < o2.length; a2++) {
      e2 = o2[a2];
      this.Rd(t2, i2, n2, Vn, e2);
    }
  }, t.prototype.Rd = function(t2, i2, n2, s2, h2) {
    for (var r2 = u(this.ud), e2 = n2(h2, r2), a2 = r2.Yt(), o2 = r2.Ht(), l2 = r2.jt().gf(), f2 = null !== l2 && l2.kf === h2, c2 = null !== l2 && f2 && void 0 !== l2.yd ? l2.yd.Kh : void 0, v2 = 0, _2 = e2; v2 < _2.length; v2++) {
      var d2 = _2[v2].dt(a2, o2);
      null !== d2 && (t2.save(), s2(d2, t2, i2, f2, c2), t2.restore());
    }
  }, t.prototype.Ad = function(t2, i2, n2) {
    for (var s2 = 0, h2 = t2; s2 < h2.length; s2++) {
      var r2 = h2[s2], e2 = r2.dt(this.o_.Ot, this.o_.Ft);
      if (null !== e2 && e2.$h) {
        var u2 = e2.$h(i2, n2);
        if (null !== u2)
          return { i_: r2, yd: u2 };
      }
    }
    return null;
  }, t.prototype.Md = function() {
    if (null !== this.ud) {
      var t2 = this.ad, i2 = this.ud.Ya().W().visible, n2 = this.ud.$a().W().visible;
      i2 || null === this.X_ || (this.fd.removeChild(this.X_.B_()), this.X_.g(), this.X_ = null), n2 || null === this.Z_ || (this.vd.removeChild(this.Z_.B_()), this.Z_.g(), this.Z_ = null);
      var s2 = t2.jt().qf();
      i2 && null === this.X_ && (this.X_ = new Fn(this, t2.W().layout, s2, "left"), this.fd.appendChild(this.X_.B_())), n2 && null === this.Z_ && (this.Z_ = new Fn(this, t2.W().layout, s2, "right"), this.vd.appendChild(this.Z_.B_()));
    }
  }, t.prototype.Id = function(t2) {
    return t2.Gv && this.nd || null !== this.sd;
  }, t.prototype.jd = function(t2) {
    return Math.max(0, Math.min(t2, this.o_.Ft - 1));
  }, t.prototype.qd = function(t2) {
    return Math.max(0, Math.min(t2, this.o_.Ot - 1));
  }, t.prototype.pd = function(t2, i2) {
    this.pi().Rf(this.jd(t2), this.qd(i2), u(this.ud));
  }, t.prototype.Cd = function() {
    this.pi().If();
  }, t.prototype.Dd = function() {
    this.hd && (this.sd = null, this.Cd());
  }, t.prototype.xd = function(t2, i2) {
    this.sd = t2, this.hd = false, this.pd(i2.x, i2.y);
    var n2 = this.pi().Tf();
    this.rd = { x: n2.$t(), y: n2.Kt() };
  }, t.prototype.pi = function() {
    return this.ad.jt();
  }, t.prototype.Ud = function() {
    var t2 = this.pi(), i2 = this.z_(), n2 = i2.ji();
    t2.Qa(i2, n2), t2.Pf(), this.J_ = null, this.G_ = false;
  }, t.prototype.Nd = function(t2) {
    var i2 = this;
    if (this.G_) {
      var n2 = performance.now();
      if (null !== this.ed && this.ed.xh(t2.Yv, n2), null === this.ed || this.ed.cc(n2))
        this.Ud();
      else {
        var s2 = this.pi(), h2 = s2.bt(), r2 = this.ed, e2 = function() {
          if (!r2._c()) {
            var t3 = performance.now(), n3 = r2.cc(t3);
            if (!r2._c()) {
              var u2 = h2.Nl();
              s2.Vf(r2.fc(t3)), u2 === h2.Nl() && (n3 = true, i2.ed = null);
            }
            n3 ? i2.Ud() : requestAnimationFrame(e2);
          }
        };
        requestAnimationFrame(e2);
      }
    }
  }, t.prototype.md = function() {
    this.sd = null;
  }, t.prototype.gd = function() {
    if (this.ud) {
      if (this.Td(), document.activeElement !== document.body && document.activeElement !== document.documentElement)
        u(document.activeElement).blur();
      else {
        var t2 = document.getSelection();
        null !== t2 && t2.removeAllRanges();
      }
      !this.ud.ji().wi() && this.pi().bt().wi();
    }
  }, t.prototype.kd = function(t2) {
    if (null !== this.ud) {
      var i2 = this.pi();
      if (!i2.bt().wi()) {
        var n2 = this.ad.W(), s2 = n2.handleScroll, h2 = n2.kineticScroll;
        if (s2.pressedMouseMove && !t2.Gv || (s2.horzTouchDrag || s2.vertTouchDrag) && t2.Gv) {
          var r2 = this.ud.ji(), e2 = performance.now();
          null !== this.J_ || this.Id(t2) || (this.J_ = { x: t2.Rv, y: t2.Iv, So: e2, Yv: t2.Yv, $v: t2.$v }), null !== this.ed && this.ed.lc(t2.Yv, e2), null === this.J_ || this.G_ || this.J_.x === t2.Rv && this.J_.y === t2.Iv || (null === this.ed && (t2.Gv && h2.touch || !t2.Gv && h2.mouse) && (this.ed = new yn(0.2, 7, 0.997, 15), this.ed.lc(this.J_.Yv, this.J_.So), this.ed.lc(t2.Yv, e2)), r2.wi() || i2.Ja(this.ud, r2, t2.$v), i2.Of(t2.Yv), this.G_ = true), this.G_ && (r2.wi() || i2.Ga(this.ud, r2, t2.$v), i2.Vf(t2.Yv));
        }
      }
    }
  }, t.prototype.Td = function() {
    var t2 = performance.now(), i2 = null === this.ed || this.ed.cc(t2);
    null !== this.ed && (i2 || this.Ud()), null !== this.ed && (this.ed.dc(), this.ed = null);
  }, t;
}();
var Rn = function() {
  function t(t2, i2, n2, s2, h2) {
    var r2 = this;
    this.ft = true, this.o_ = new dn(0, 0), this.d_ = function() {
      return r2.R_(3);
    }, this.m_ = "left" === t2, this.cf = n2.qf, this.zi = i2, this.Hd = s2, this.Yd = h2, this.p_ = document.createElement("div"), this.p_.style.width = "25px", this.p_.style.height = "100%", this.p_.style.overflow = "hidden", this.g_ = mn(this.p_, new dn(16, 16)), this.g_.subscribeCanvasConfigured(this.d_);
  }
  return t.prototype.g = function() {
    this.g_.unsubscribeCanvasConfigured(this.d_), this.g_.destroy();
  }, t.prototype.B_ = function() {
    return this.p_;
  }, t.prototype.Ld = function() {
    return this.o_;
  }, t.prototype.P_ = function(t2) {
    if (t2.Ft < 0 || t2.Ot < 0)
      throw new Error("Try to set invalid size to PriceAxisStub " + JSON.stringify(t2));
    this.o_.br(t2) || (this.o_ = t2, this.g_.resizeCanvas({ width: t2.Ft, height: t2.Ot }), this.p_.style.width = "".concat(t2.Ft, "px"), this.p_.style.minWidth = "".concat(t2.Ft, "px"), this.p_.style.height = "".concat(t2.Ot, "px"), this.ft = true);
  }, t.prototype.R_ = function(t2) {
    if ((!(t2 < 3) || this.ft) && 0 !== this.o_.Ft && 0 !== this.o_.Ot) {
      this.ft = false;
      var i2 = Mn(this.g_.canvas);
      this.j_(i2, this.g_.pixelRatio), this.Rs(i2, this.g_.pixelRatio);
    }
  }, t.prototype.Y_ = function() {
    return this.g_.canvas;
  }, t.prototype.Rs = function(t2, i2) {
    if (this.Hd()) {
      var n2 = this.o_.Ft;
      t2.save(), t2.fillStyle = this.zi.timeScale.borderColor;
      var s2 = Math.floor(this.cf.W().N * i2), h2 = this.m_ ? Math.round(n2 * i2) - s2 : 0;
      t2.fillRect(h2, 0, s2, s2), t2.restore();
    }
  }, t.prototype.j_ = function(t2, i2) {
    var n2 = this;
    q(t2, i2, function() {
      U(t2, 0, 0, n2.o_.Ft, n2.o_.Ot, n2.Yd());
    });
  }, t;
}();
function In(t, i2) {
  return t.Po > i2.Po ? t : i2;
}
var jn = function() {
  function t(t2) {
    var i2 = this;
    this.$d = null, this.Kd = null, this.k = null, this.Xd = false, this.o_ = new dn(0, 0), this.Zd = new y(), this.f_ = new Rt(5), this.__ = false, this.d_ = function() {
      i2.__ || i2.ad.jt().Wr();
    }, this.b_ = function() {
      i2.__ || i2.ad.jt().Wr();
    }, this.ad = t2, this.zi = t2.W().layout, this.Jd = document.createElement("tr"), this.Gd = document.createElement("td"), this.Gd.style.padding = "0", this.Qd = document.createElement("td"), this.Qd.style.padding = "0", this.p_ = document.createElement("td"), this.p_.style.height = "25px", this.p_.style.padding = "0", this.tw = document.createElement("div"), this.tw.style.width = "100%", this.tw.style.height = "100%", this.tw.style.position = "relative", this.tw.style.overflow = "hidden", this.p_.appendChild(this.tw), this.g_ = mn(this.tw, new dn(16, 16)), this.g_.subscribeCanvasConfigured(this.d_);
    var n2 = this.g_.canvas;
    n2.style.position = "absolute", n2.style.zIndex = "1", n2.style.left = "0", n2.style.top = "0", this.y_ = mn(this.tw, new dn(16, 16)), this.y_.subscribeCanvasConfigured(this.b_);
    var s2 = this.y_.canvas;
    s2.style.position = "absolute", s2.style.zIndex = "2", s2.style.left = "0", s2.style.top = "0", this.Jd.appendChild(this.Gd), this.Jd.appendChild(this.p_), this.Jd.appendChild(this.Qd), this.iw(), this.ad.jt().Pa().u(this.iw.bind(this), this), this.A_ = new Sn(this.y_.canvas, this, { _v: function() {
      return true;
    }, dv: function() {
      return false;
    } });
  }
  return t.prototype.g = function() {
    this.A_.g(), null !== this.$d && this.$d.g(), null !== this.Kd && this.Kd.g(), this.y_.unsubscribeCanvasConfigured(this.b_), this.y_.destroy(), this.g_.unsubscribeCanvasConfigured(this.d_), this.g_.destroy();
  }, t.prototype.B_ = function() {
    return this.Jd;
  }, t.prototype.nw = function() {
    return this.$d;
  }, t.prototype.sw = function() {
    return this.Kd;
  }, t.prototype.Tv = function(t2) {
    if (!this.Xd) {
      this.Xd = true;
      var i2 = this.ad.jt();
      !i2.bt().wi() && this.ad.W().handleScale.axisPressedMouseMove.time && i2.Lf(t2.Yv);
    }
  }, t.prototype.Cv = function(t2) {
    this.Tv(t2);
  }, t.prototype.Dv = function() {
    var t2 = this.ad.jt();
    !t2.bt().wi() && this.Xd && (this.Xd = false, this.ad.W().handleScale.axisPressedMouseMove.time && t2.zf());
  }, t.prototype.bv = function(t2) {
    var i2 = this.ad.jt();
    !i2.bt().wi() && this.ad.W().handleScale.axisPressedMouseMove.time && i2.Wf(t2.Yv);
  }, t.prototype.wv = function(t2) {
    this.bv(t2);
  }, t.prototype.yv = function() {
    this.Xd = false;
    var t2 = this.ad.jt();
    t2.bt().wi() && !this.ad.W().handleScale.axisPressedMouseMove.time || t2.zf();
  }, t.prototype.pv = function() {
    this.yv();
  }, t.prototype.nv = function() {
    this.ad.W().handleScale.axisDoubleClickReset && this.ad.jt().pn();
  }, t.prototype.Gc = function() {
    this.nv();
  }, t.prototype.ov = function() {
    this.ad.jt().W().handleScale.axisPressedMouseMove.time && this.K_(1);
  }, t.prototype.Wv = function() {
    this.K_(0);
  }, t.prototype.Ld = function() {
    return this.o_;
  }, t.prototype.hw = function() {
    return this.Zd;
  }, t.prototype.rw = function(t2, i2, n2) {
    this.o_ && this.o_.br(t2) || (this.o_ = t2, this.__ = true, this.g_.resizeCanvas({ width: t2.Ft, height: t2.Ot }), this.y_.resizeCanvas({ width: t2.Ft, height: t2.Ot }), this.__ = false, this.p_.style.width = t2.Ft + "px", this.p_.style.height = t2.Ot + "px", this.Zd.m(t2)), null !== this.$d && this.$d.P_(new dn(i2, t2.Ot)), null !== this.Kd && this.Kd.P_(new dn(n2, t2.Ot));
  }, t.prototype.ew = function() {
    var t2 = this.uw();
    return Math.ceil(t2.N + t2.C + t2.S + t2.O + t2.B);
  }, t.prototype.vt = function() {
    this.ad.jt().bt().au();
  }, t.prototype.Y_ = function() {
    return this.g_.canvas;
  }, t.prototype.R_ = function(t2) {
    if (0 !== t2) {
      if (1 !== t2) {
        var i2 = Mn(this.g_.canvas);
        this.j_(i2, this.g_.pixelRatio), this.Rs(i2, this.g_.pixelRatio), this.q_(i2, this.g_.pixelRatio), null !== this.$d && this.$d.R_(t2), null !== this.Kd && this.Kd.R_(t2);
      }
      var n2 = Mn(this.y_.canvas), s2 = this.y_.pixelRatio;
      n2.clearRect(0, 0, Math.ceil(this.o_.Ft * s2), Math.ceil(this.o_.Ot * s2)), this.aw([this.ad.jt().Tf()], n2, s2);
    }
  }, t.prototype.j_ = function(t2, i2) {
    var n2 = this;
    q(t2, i2, function() {
      U(t2, 0, 0, n2.o_.Ft, n2.o_.Ot, n2.ad.jt().Xf());
    });
  }, t.prototype.Rs = function(t2, i2) {
    if (this.ad.W().timeScale.borderVisible) {
      t2.save(), t2.fillStyle = this.ow();
      var n2 = Math.max(1, Math.floor(this.uw().N * i2));
      t2.fillRect(0, 0, Math.ceil(this.o_.Ft * i2), n2), t2.restore();
    }
  }, t.prototype.q_ = function(t2, i2) {
    var n2 = this, s2 = this.ad.jt().bt().au();
    if (s2 && 0 !== s2.length) {
      var h2 = s2.reduce(In, s2[0]).Po;
      h2 > 30 && h2 < 50 && (h2 = 30), t2.save(), t2.strokeStyle = this.ow();
      var r2 = this.uw(), e2 = r2.N + r2.C + r2.O + r2.S - r2.V;
      t2.textAlign = "center", t2.fillStyle = this.ow();
      var u2 = Math.floor(this.uw().N * i2), a2 = Math.max(1, Math.floor(i2)), o2 = Math.floor(0.5 * i2);
      if (this.ad.jt().bt().W().borderVisible) {
        t2.beginPath();
        for (var l2 = Math.round(r2.C * i2), f2 = s2.length; f2--; ) {
          var c2 = Math.round(s2[f2].su * i2);
          t2.rect(c2 - o2, u2, a2, l2);
        }
        t2.fill();
      }
      t2.fillStyle = this.j(), q(t2, i2, function() {
        t2.font = n2.lw();
        for (var i3 = 0, r3 = s2; i3 < r3.length; i3++) {
          if ((l3 = r3[i3]).Po < h2) {
            var u3 = l3.Sl ? n2.fw(t2, l3.su, l3.yu) : l3.su;
            t2.fillText(l3.yu, u3, e2);
          }
        }
        t2.font = n2.cw();
        for (var a3 = 0, o3 = s2; a3 < o3.length; a3++) {
          var l3;
          if ((l3 = o3[a3]).Po >= h2) {
            u3 = l3.Sl ? n2.fw(t2, l3.su, l3.yu) : l3.su;
            t2.fillText(l3.yu, u3, e2);
          }
        }
      }), t2.restore();
    }
  }, t.prototype.fw = function(t2, i2, n2) {
    var s2 = this.f_.Qt(t2, n2), h2 = s2 / 2, r2 = Math.floor(i2 - h2) + 0.5;
    return r2 < 0 ? i2 += Math.abs(0 - r2) : r2 + s2 > this.o_.Ft && (i2 -= Math.abs(this.o_.Ft - (r2 + s2))), i2;
  }, t.prototype.aw = function(t2, i2, n2) {
    for (var s2 = this.uw(), h2 = 0, r2 = t2; h2 < r2.length; h2++)
      for (var e2 = 0, u2 = r2[h2].Ti(); e2 < u2.length; e2++) {
        var a2 = u2[e2];
        i2.save(), a2.dt().H(i2, s2, n2), i2.restore();
      }
  }, t.prototype.ow = function() {
    return this.ad.W().timeScale.borderColor;
  }, t.prototype.j = function() {
    return this.zi.textColor;
  }, t.prototype.R = function() {
    return this.zi.fontSize;
  }, t.prototype.lw = function() {
    return L(this.R(), this.zi.fontFamily);
  }, t.prototype.cw = function() {
    return L(this.R(), this.zi.fontFamily, "bold");
  }, t.prototype.uw = function() {
    null === this.k && (this.k = { N: 1, V: NaN, O: NaN, B: NaN, mi: NaN, C: 3, S: NaN, T: "", bi: new Rt() });
    var t2 = this.k, i2 = this.lw();
    if (t2.T !== i2) {
      var n2 = this.R();
      t2.S = n2, t2.T = i2, t2.O = Math.ceil(n2 / 2.5), t2.B = t2.O, t2.mi = Math.ceil(n2 / 2), t2.V = Math.round(this.R() / 5), t2.bi.ih();
    }
    return this.k;
  }, t.prototype.K_ = function(t2) {
    this.p_.style.cursor = 1 === t2 ? "ew-resize" : "default";
  }, t.prototype.iw = function() {
    var t2 = this.ad.jt(), i2 = t2.W();
    i2.leftPriceScale.visible || null === this.$d || (this.Gd.removeChild(this.$d.B_()), this.$d.g(), this.$d = null), i2.rightPriceScale.visible || null === this.Kd || (this.Qd.removeChild(this.Kd.B_()), this.Kd.g(), this.Kd = null);
    var n2 = { qf: this.ad.jt().qf() }, s2 = function() {
      return i2.leftPriceScale.borderVisible && t2.bt().W().borderVisible;
    }, h2 = function() {
      return t2.Xf();
    };
    i2.leftPriceScale.visible && null === this.$d && (this.$d = new Rn("left", i2, n2, s2, h2), this.Gd.appendChild(this.$d.B_())), i2.rightPriceScale.visible && null === this.Kd && (this.Kd = new Rn("right", i2, n2, s2, h2), this.Qd.appendChild(this.Kd.B_()));
  }, t;
}();
var qn = function() {
  function t(t2, i2) {
    var n2;
    this._w = [], this.dw = 0, this.xu = 0, this.hh = 0, this.ww = 0, this.Mw = 0, this.bw = null, this.mw = false, this.Q_ = new y(), this.af = new y(), this.zi = i2, this.Jd = document.createElement("div"), this.Jd.classList.add("tv-lightweight-charts"), this.Jd.style.overflow = "hidden", this.Jd.style.width = "100%", this.Jd.style.height = "100%", (n2 = this.Jd).style.userSelect = "none", n2.style.webkitUserSelect = "none", n2.style.msUserSelect = "none", n2.style.MozUserSelect = "none", n2.style.webkitTapHighlightColor = "transparent", this.pw = document.createElement("table"), this.pw.setAttribute("cellspacing", "0"), this.Jd.appendChild(this.pw), this.gw = this.yw.bind(this), this.Jd.addEventListener("wheel", this.gw, { passive: false }), this.pi = new fn(this.ff.bind(this), this.zi), this.jt().Df().u(this.kw.bind(this), this), this.Nw = new jn(this), this.pw.appendChild(this.Nw.B_());
    var s2 = this.zi.width, h2 = this.zi.height;
    if (0 === s2 || 0 === h2) {
      var r2 = t2.getBoundingClientRect();
      0 === s2 && (s2 = Math.floor(r2.width), s2 -= s2 % 2), 0 === h2 && (h2 = Math.floor(r2.height), h2 -= h2 % 2);
    }
    this.xw(s2, h2), this.Cw(), t2.appendChild(this.Jd), this.Sw(), this.pi.bt().Pl().u(this.pi.Ce.bind(this.pi), this), this.pi.Pa().u(this.pi.Ce.bind(this.pi), this);
  }
  return t.prototype.jt = function() {
    return this.pi;
  }, t.prototype.W = function() {
    return this.zi;
  }, t.prototype.Tw = function() {
    return this._w;
  }, t.prototype.Dw = function() {
    return this.Nw;
  }, t.prototype.g = function() {
    this.Jd.removeEventListener("wheel", this.gw), 0 !== this.dw && window.cancelAnimationFrame(this.dw), this.pi.Df().M(this), this.pi.bt().Pl().M(this), this.pi.Pa().M(this), this.pi.g();
    for (var t2 = 0, i2 = this._w; t2 < i2.length; t2++) {
      var n2 = i2[t2];
      this.pw.removeChild(n2.B_()), n2.Sd().M(this), n2.g();
    }
    this._w = [], u(this.Nw).g(), null !== this.Jd.parentElement && this.Jd.parentElement.removeChild(this.Jd), this.af.g(), this.Q_.g();
  }, t.prototype.xw = function(t2, i2, n2) {
    if (void 0 === n2 && (n2 = false), this.xu !== i2 || this.hh !== t2) {
      this.xu = i2, this.hh = t2;
      var s2 = i2 + "px", h2 = t2 + "px";
      u(this.Jd).style.height = s2, u(this.Jd).style.width = h2, this.pw.style.height = s2, this.pw.style.width = h2, n2 ? this.Aw(new nt(3)) : this.pi.Ce();
    }
  }, t.prototype.R_ = function(t2) {
    void 0 === t2 && (t2 = new nt(3));
    for (var i2 = 0; i2 < this._w.length; i2++)
      this._w[i2].R_(t2.wn(i2).vn);
    this.zi.timeScale.visible && this.Nw.R_(t2.dn());
  }, t.prototype.Pr = function(t2) {
    this.pi.Pr(t2), this.Sw();
    var i2 = t2.width || this.hh, n2 = t2.height || this.xu;
    this.xw(i2, n2);
  }, t.prototype.Sd = function() {
    return this.Q_;
  }, t.prototype.Df = function() {
    return this.af;
  }, t.prototype.Bw = function() {
    var t2 = this;
    null !== this.bw && (this.Aw(this.bw), this.bw = null);
    var i2 = this._w[0], n2 = bn(document, new dn(this.hh, this.xu)), s2 = Mn(n2), h2 = wn(n2);
    return q(s2, h2, function() {
      var n3 = 0, h3 = 0, r2 = function(i3) {
        for (var r3 = 0; r3 < t2._w.length; r3++) {
          var e3 = t2._w[r3], a3 = e3.Ld().Ot, o3 = u("left" === i3 ? e3.Wd() : e3.zd()), l3 = o3.Y_();
          s2.drawImage(l3, n3, h3, o3.W_(), a3), h3 += a3;
        }
      };
      t2.Lw() && (r2("left"), n3 = u(i2.Wd()).W_()), h3 = 0;
      for (var e2 = 0; e2 < t2._w.length; e2++) {
        var a2 = t2._w[e2], o2 = a2.Ld(), l2 = a2.Y_();
        s2.drawImage(l2, n3, h3, o2.Ft, o2.Ot), h3 += o2.Ot;
      }
      n3 += i2.Ld().Ft, t2.Ew() && (h3 = 0, r2("right"));
      var f2 = function(i3) {
        var r3 = u("left" === i3 ? t2.Nw.nw() : t2.Nw.sw()), e3 = r3.Ld(), a3 = r3.Y_();
        s2.drawImage(a3, n3, h3, e3.Ft, e3.Ot);
      };
      if (t2.zi.timeScale.visible) {
        n3 = 0, t2.Lw() && (f2("left"), n3 = u(i2.Wd()).W_());
        var c2 = t2.Nw.Ld();
        l2 = t2.Nw.Y_();
        s2.drawImage(l2, n3, h3, c2.Ft, c2.Ot), t2.Ew() && (n3 += i2.Ld().Ft, f2("right"), s2.restore());
      }
    }), n2;
  }, t.prototype.Fw = function(t2) {
    return "none" === t2 ? 0 : ("left" !== t2 || this.Lw()) && ("right" !== t2 || this.Ew()) ? 0 === this._w.length ? 0 : u("left" === t2 ? this._w[0].Wd() : this._w[0].zd()).W_() : 0;
  }, t.prototype.Ow = function() {
    for (var t2 = 0, i2 = 0, n2 = 0, s2 = 0, h2 = this._w; s2 < h2.length; s2++) {
      var r2 = h2[s2];
      this.Lw() && (i2 = Math.max(i2, u(r2.Wd()).O_())), this.Ew() && (n2 = Math.max(n2, u(r2.zd()).O_())), t2 += r2.Wa();
    }
    var e2 = this.hh, a2 = this.xu, o2 = Math.max(e2 - i2 - n2, 0), l2 = this.zi.timeScale.visible, f2 = l2 ? this.Nw.ew() : 0;
    f2 % 2 && (f2 += 1);
    for (var c2 = 0 + f2, v2 = a2 < c2 ? 0 : a2 - c2, _2 = v2 / t2, d2 = 0, w2 = 0; w2 < this._w.length; ++w2) {
      (r2 = this._w[w2]).wd(this.pi.Cf()[w2]);
      var M2, b2 = 0;
      b2 = w2 === this._w.length - 1 ? v2 - d2 : Math.round(r2.Wa() * _2), d2 += M2 = Math.max(b2, 2), r2.P_(new dn(o2, M2)), this.Lw() && r2.Bd(i2, "left"), this.Ew() && r2.Bd(n2, "right"), r2.z_() && this.pi.Af(r2.z_(), M2);
    }
    this.Nw.rw(new dn(l2 ? o2 : 0, f2), l2 ? i2 : 0, l2 ? n2 : 0), this.pi.Ra(o2), this.ww !== i2 && (this.ww = i2), this.Mw !== n2 && (this.Mw = n2);
  }, t.prototype.yw = function(t2) {
    var i2 = t2.deltaX / 100, n2 = -t2.deltaY / 100;
    if (0 !== i2 && this.zi.handleScroll.mouseWheel || 0 !== n2 && this.zi.handleScale.mouseWheel) {
      switch (t2.cancelable && t2.preventDefault(), t2.deltaMode) {
        case t2.DOM_DELTA_PAGE:
          i2 *= 120, n2 *= 120;
          break;
        case t2.DOM_DELTA_LINE:
          i2 *= 32, n2 *= 32;
      }
      if (0 !== n2 && this.zi.handleScale.mouseWheel) {
        var s2 = Math.sign(n2) * Math.min(1, Math.abs(n2)), h2 = t2.clientX - this.Jd.getBoundingClientRect().left;
        this.jt().Ef(h2, s2);
      }
      0 !== i2 && this.zi.handleScroll.mouseWheel && this.jt().Ff(-80 * i2);
    }
  }, t.prototype.Aw = function(t2) {
    var i2, n2 = t2.dn();
    3 === n2 && this.Vw(), 3 !== n2 && 2 !== n2 || (this.Pw(t2), this.Ww(t2), this.Nw.vt(), this._w.forEach(function(t3) {
      t3.bd();
    }), 3 === (null === (i2 = this.bw) || void 0 === i2 ? void 0 : i2.dn()) && (this.bw.Nn(t2), this.Vw(), this.Pw(this.bw), this.Ww(this.bw), t2 = this.bw, this.bw = null)), this.R_(t2);
  }, t.prototype.Ww = function(t2) {
    for (var i2 = 0, n2 = t2.kn(); i2 < n2.length; i2++) {
      var s2 = n2[i2];
      this.xn(s2);
    }
  }, t.prototype.Pw = function(t2) {
    for (var i2 = this.pi.Cf(), n2 = 0; n2 < i2.length; n2++)
      t2.wn(n2)._n && i2[n2].so();
  }, t.prototype.xn = function(t2) {
    var i2 = this.pi.bt();
    switch (t2.bn) {
      case 0:
        i2.zl();
        break;
      case 1:
        i2.Rl(t2.St);
        break;
      case 2:
        i2.gn(t2.St);
        break;
      case 3:
        i2.yn(t2.St);
        break;
      case 4:
        i2.Tl();
    }
  }, t.prototype.ff = function(t2) {
    var i2 = this;
    null !== this.bw ? this.bw.Nn(t2) : this.bw = t2, this.mw || (this.mw = true, this.dw = window.requestAnimationFrame(function() {
      if (i2.mw = false, i2.dw = 0, null !== i2.bw) {
        var t3 = i2.bw;
        i2.bw = null, i2.Aw(t3);
      }
    }));
  }, t.prototype.Vw = function() {
    this.Cw();
  }, t.prototype.Cw = function() {
    for (var t2 = this.pi.Cf(), i2 = t2.length, n2 = this._w.length, s2 = i2; s2 < n2; s2++) {
      var h2 = e(this._w.pop());
      this.pw.removeChild(h2.B_()), h2.Sd().M(this), h2.g();
    }
    for (s2 = n2; s2 < i2; s2++) {
      (h2 = new zn(this, t2[s2])).Sd().u(this.zw.bind(this), this), this._w.push(h2), this.pw.insertBefore(h2.B_(), this.Nw.B_());
    }
    for (s2 = 0; s2 < i2; s2++) {
      var r2 = t2[s2];
      (h2 = this._w[s2]).z_() !== r2 ? h2.wd(r2) : h2.dd();
    }
    this.Sw(), this.Ow();
  }, t.prototype.Rw = function(t2, i2) {
    var n2, s2 = /* @__PURE__ */ new Map();
    null !== t2 && this.pi._t().forEach(function(i3) {
      var n3 = i3.er(t2);
      null !== n3 && s2.set(i3, n3);
    });
    if (null !== t2) {
      var h2 = this.pi.bt().gi(t2);
      null !== h2 && (n2 = h2);
    }
    var r2 = this.jt().gf(), e2 = null !== r2 && r2.kf instanceof gi ? r2.kf : void 0, u2 = null !== r2 && void 0 !== r2.yd ? r2.yd.Zh : void 0;
    return { rt: n2, Iw: i2 || void 0, jw: e2, qw: s2, Uw: u2 };
  }, t.prototype.zw = function(t2, i2) {
    var n2 = this;
    this.Q_.m(function() {
      return n2.Rw(t2, i2);
    });
  }, t.prototype.kw = function(t2, i2) {
    var n2 = this;
    this.af.m(function() {
      return n2.Rw(t2, i2);
    });
  }, t.prototype.Sw = function() {
    var t2 = this.zi.timeScale.visible ? "" : "none";
    this.Nw.B_().style.display = t2;
  }, t.prototype.Lw = function() {
    return this._w[0].z_().Ya().W().visible;
  }, t.prototype.Ew = function() {
    return this._w[0].z_().$a().W().visible;
  }, t;
}();
function Un(t, i2, n2) {
  var s2 = n2.value;
  return { vs: i2, rt: t, St: [s2, s2, s2, s2] };
}
function Hn(t, i2, n2) {
  var s2 = n2.value, h2 = { vs: i2, rt: t, St: [s2, s2, s2, s2] };
  return "color" in n2 && void 0 !== n2.color && (h2.A = n2.color), h2;
}
function Yn(t) {
  return void 0 !== t.St;
}
function $n(t) {
  return function(i2, n2, s2) {
    return void 0 === (h2 = s2).open && void 0 === h2.value ? { rt: i2, vs: n2 } : t(i2, n2, s2);
    var h2;
  };
}
var Kn = { Candlestick: $n(function(t, i2, n2) {
  var s2 = { vs: i2, rt: t, St: [n2.open, n2.high, n2.low, n2.close] };
  return "color" in n2 && void 0 !== n2.color && (s2.A = n2.color), "borderColor" in n2 && void 0 !== n2.borderColor && (s2.Tt = n2.borderColor), "wickColor" in n2 && void 0 !== n2.wickColor && (s2.qs = n2.wickColor), s2;
}), Bar: $n(function(t, i2, n2) {
  var s2 = { vs: i2, rt: t, St: [n2.open, n2.high, n2.low, n2.close] };
  return "color" in n2 && void 0 !== n2.color && (s2.A = n2.color), s2;
}), Area: $n(Un), Baseline: $n(Un), Histogram: $n(Hn), Line: $n(Hn) };
function Xn(t) {
  return Kn[t];
}
function Zn(t) {
  return 60 * t * 60 * 1e3;
}
function Jn(t) {
  return 60 * t * 1e3;
}
var Gn;
var Qn = [{ Hw: (Gn = 1, 1e3 * Gn), Po: 10 }, { Hw: Jn(1), Po: 20 }, { Hw: Jn(5), Po: 21 }, { Hw: Jn(30), Po: 22 }, { Hw: Zn(1), Po: 30 }, { Hw: Zn(3), Po: 31 }, { Hw: Zn(6), Po: 32 }, { Hw: Zn(12), Po: 33 }];
function ts(t, i2) {
  if (t.getUTCFullYear() !== i2.getUTCFullYear())
    return 70;
  if (t.getUTCMonth() !== i2.getUTCMonth())
    return 60;
  if (t.getUTCDate() !== i2.getUTCDate())
    return 50;
  for (var n2 = Qn.length - 1; n2 >= 0; --n2)
    if (Math.floor(i2.getTime() / Qn[n2].Hw) !== Math.floor(t.getTime() / Qn[n2].Hw))
      return Qn[n2].Po;
  return 0;
}
function is(t, i2) {
  if (void 0 === i2 && (i2 = 0), 0 !== t.length) {
    for (var n2 = 0 === i2 ? null : t[i2 - 1].rt.So, s2 = null !== n2 ? new Date(1e3 * n2) : null, h2 = 0, r2 = i2; r2 < t.length; ++r2) {
      var e2 = t[r2], u2 = new Date(1e3 * e2.rt.So);
      null !== s2 && (e2.Vo = ts(u2, s2)), h2 += e2.rt.So - (n2 || e2.rt.So), n2 = e2.rt.So, s2 = u2;
    }
    if (0 === i2 && t.length > 1) {
      var a2 = Math.ceil(h2 / (t.length - 1)), o2 = new Date(1e3 * (t[0].rt.So - a2));
      t[0].Vo = ts(new Date(1e3 * t[0].rt.So), o2);
    }
  }
}
function ns(t) {
  if (!vn(t))
    throw new Error("time must be of type BusinessDay");
  var i2 = new Date(Date.UTC(t.year, t.month - 1, t.day, 0, 0, 0, 0));
  return { So: Math.round(i2.getTime() / 1e3), Co: t };
}
function ss(t) {
  if (!_n(t))
    throw new Error("time must be of type isUTCTimestamp");
  return { So: t };
}
function hs(t) {
  return 0 === t.length ? null : vn(t[0].time) ? ns : ss;
}
function rs(t) {
  return _n(t) ? ss(t) : vn(t) ? ns(t) : ns(es(t));
}
function es(t) {
  var i2 = new Date(t);
  if (isNaN(i2.getTime()))
    throw new Error("Invalid date string=".concat(t, ", expected format=yyyy-mm-dd"));
  return { day: i2.getUTCDate(), month: i2.getUTCMonth() + 1, year: i2.getUTCFullYear() };
}
function us(t) {
  C(t.time) && (t.time = es(t.time));
}
function as(t) {
  return { vs: 0, Yw: /* @__PURE__ */ new Map(), Ve: t };
}
function os(t) {
  if (void 0 !== t && 0 !== t.length)
    return { $w: t[0].rt.So, Kw: t[t.length - 1].rt.So };
}
var ls = function() {
  function t() {
    this.Xw = /* @__PURE__ */ new Map(), this.Zw = /* @__PURE__ */ new Map(), this.Jw = /* @__PURE__ */ new Map(), this.Gw = [];
  }
  return t.prototype.g = function() {
    this.Xw.clear(), this.Zw.clear(), this.Jw.clear(), this.Gw = [];
  }, t.prototype.Qw = function(t2, i2) {
    var n2 = this, s2 = 0 !== this.Xw.size, h2 = false, r2 = this.Zw.get(t2);
    if (void 0 !== r2)
      if (1 === this.Zw.size)
        s2 = false, h2 = true, this.Xw.clear();
      else
        for (var e2 = 0, a2 = this.Gw; e2 < a2.length; e2++) {
          a2[e2].pointData.Yw.delete(t2) && (h2 = true);
        }
    var o2 = [];
    if (0 !== i2.length) {
      !function(t3) {
        t3.forEach(us);
      }(i2);
      var l2 = u(hs(i2)), f2 = Xn(t2.Rr());
      o2 = i2.map(function(i3) {
        var s3 = l2(i3.time), r3 = n2.Xw.get(s3.So);
        void 0 === r3 && (r3 = as(s3), n2.Xw.set(s3.So, r3), h2 = true);
        var e3 = f2(s3, r3.vs, i3);
        return r3.Yw.set(t2, e3), e3;
      });
    }
    s2 && this.tM(), this.iM(t2, o2);
    var c2 = -1;
    if (h2) {
      var v2 = [];
      this.Xw.forEach(function(t3) {
        v2.push({ Vo: 0, rt: t3.Ve, pointData: t3 });
      }), v2.sort(function(t3, i3) {
        return t3.rt.So - i3.rt.So;
      }), c2 = this.nM(v2);
    }
    return this.sM(t2, c2, function(t3, i3) {
      var n3 = os(t3), s3 = os(i3);
      if (void 0 !== n3 && void 0 !== s3)
        return { Ae: n3.Kw >= s3.Kw && n3.$w >= s3.$w };
    }(this.Zw.get(t2), r2));
  }, t.prototype.Yf = function(t2) {
    return this.Qw(t2, []);
  }, t.prototype.hM = function(t2, i2) {
    us(i2);
    var n2 = u(hs([i2]))(i2.time), s2 = this.Jw.get(t2);
    if (void 0 !== s2 && n2.So < s2.So)
      throw new Error("Cannot update oldest data, last time=".concat(s2.So, ", new time=").concat(n2.So));
    var h2 = this.Xw.get(n2.So), r2 = void 0 === h2;
    void 0 === h2 && (h2 = as(n2), this.Xw.set(n2.So, h2));
    var e2 = Xn(t2.Rr())(n2, h2.vs, i2);
    h2.Yw.set(t2, e2), this.rM(t2, e2);
    var a2 = { Ae: Yn(e2) };
    if (!r2)
      return this.sM(t2, -1, a2);
    var o2 = { Vo: 0, rt: h2.Ve, pointData: h2 }, l2 = vt(this.Gw, o2.rt.So, function(t3, i3) {
      return t3.rt.So < i3;
    });
    this.Gw.splice(l2, 0, o2);
    for (var f2 = l2; f2 < this.Gw.length; ++f2)
      fs(this.Gw[f2].pointData, f2);
    return is(this.Gw, l2), this.sM(t2, l2, a2);
  }, t.prototype.rM = function(t2, i2) {
    var n2 = this.Zw.get(t2);
    void 0 === n2 && (n2 = [], this.Zw.set(t2, n2));
    var s2 = 0 !== n2.length ? n2[n2.length - 1] : null;
    null === s2 || i2.rt.So > s2.rt.So ? Yn(i2) && n2.push(i2) : Yn(i2) ? n2[n2.length - 1] = i2 : n2.splice(-1, 1), this.Jw.set(t2, i2.rt);
  }, t.prototype.iM = function(t2, i2) {
    0 !== i2.length ? (this.Zw.set(t2, i2.filter(Yn)), this.Jw.set(t2, i2[i2.length - 1].rt)) : (this.Zw.delete(t2), this.Jw.delete(t2));
  }, t.prototype.tM = function() {
    for (var t2 = 0, i2 = this.Gw; t2 < i2.length; t2++) {
      var n2 = i2[t2];
      0 === n2.pointData.Yw.size && this.Xw.delete(n2.rt.So);
    }
  }, t.prototype.nM = function(t2) {
    for (var i2 = -1, n2 = 0; n2 < this.Gw.length && n2 < t2.length; ++n2) {
      var s2 = this.Gw[n2], h2 = t2[n2];
      if (s2.rt.So !== h2.rt.So) {
        i2 = n2;
        break;
      }
      h2.Vo = s2.Vo, fs(h2.pointData, n2);
    }
    if (-1 === i2 && this.Gw.length !== t2.length && (i2 = Math.min(this.Gw.length, t2.length)), -1 === i2)
      return -1;
    for (n2 = i2; n2 < t2.length; ++n2)
      fs(t2[n2].pointData, n2);
    return is(t2, i2), this.Gw = t2, i2;
  }, t.prototype.eM = function() {
    if (0 === this.Zw.size)
      return null;
    var t2 = 0;
    return this.Zw.forEach(function(i2) {
      0 !== i2.length && (t2 = Math.max(t2, i2[i2.length - 1].vs));
    }), t2;
  }, t.prototype.sM = function(t2, i2, n2) {
    var s2 = { uM: /* @__PURE__ */ new Map(), bt: { ml: this.eM() } };
    if (-1 !== i2)
      this.Zw.forEach(function(i3, h3) {
        s2.uM.set(h3, { ph: i3, aM: h3 === t2 ? n2 : void 0 });
      }), this.Zw.has(t2) || s2.uM.set(t2, { ph: [], aM: n2 }), s2.bt.oM = this.Gw, s2.bt.lM = i2;
    else {
      var h2 = this.Zw.get(t2);
      s2.uM.set(t2, { ph: h2 || [], aM: n2 });
    }
    return s2;
  }, t;
}();
function fs(t, i2) {
  t.vs = i2, t.Yw.forEach(function(t2) {
    t2.vs = i2;
  });
}
var cs = { color: "#FF0000", price: 0, lineStyle: 2, lineWidth: 1, lineVisible: true, axisLabelVisible: true, title: "" };
var vs = function() {
  function t(t2) {
    this.Lr = t2;
  }
  return t.prototype.applyOptions = function(t2) {
    this.Lr.Pr(t2);
  }, t.prototype.options = function() {
    return this.Lr.W();
  }, t.prototype.fM = function() {
    return this.Lr;
  }, t;
}();
function _s(t) {
  var i2 = t.overlay, n2 = function(t2, i3) {
    var n3 = {};
    for (var s2 in t2)
      Object.prototype.hasOwnProperty.call(t2, s2) && i3.indexOf(s2) < 0 && (n3[s2] = t2[s2]);
    if (null != t2 && "function" == typeof Object.getOwnPropertySymbols) {
      var h2 = 0;
      for (s2 = Object.getOwnPropertySymbols(t2); h2 < s2.length; h2++)
        i3.indexOf(s2[h2]) < 0 && Object.prototype.propertyIsEnumerable.call(t2, s2[h2]) && (n3[s2[h2]] = t2[s2[h2]]);
    }
    return n3;
  }(t, ["overlay"]);
  return i2 && (n2.priceScaleId = ""), n2;
}
var ds = function() {
  function t(t2, i2, n2) {
    this.Kn = t2, this.cM = i2, this.vM = n2;
  }
  return t.prototype.priceFormatter = function() {
    return this.Kn.qe();
  }, t.prototype.priceToCoordinate = function(t2) {
    var i2 = this.Kn.kt();
    return null === i2 ? null : this.Kn.Ct().xt(t2, i2.St);
  }, t.prototype.coordinateToPrice = function(t2) {
    var i2 = this.Kn.kt();
    return null === i2 ? null : this.Kn.Ct().qi(t2, i2.St);
  }, t.prototype.barsInLogicalRange = function(t2) {
    if (null === t2)
      return null;
    var i2 = new nn(new Ji(t2.from, t2.to)).jo(), n2 = this.Kn.an();
    if (n2.wi())
      return null;
    var s2 = n2.ne(i2.In(), 1), h2 = n2.ne(i2.jn(), -1), r2 = u(n2.Qr()), e2 = u(n2.un());
    if (null !== s2 && null !== h2 && s2.vs > h2.vs)
      return { barsBefore: t2.from - r2, barsAfter: e2 - t2.to };
    var a2 = { barsBefore: null === s2 || s2.vs === r2 ? t2.from - r2 : s2.vs - r2, barsAfter: null === h2 || h2.vs === e2 ? e2 - t2.to : e2 - h2.vs };
    return null !== s2 && null !== h2 && (a2.from = s2.rt.Co || s2.rt.So, a2.to = h2.rt.Co || h2.rt.So), a2;
  }, t.prototype.setData = function(t2) {
    this.Kn.Rr(), this.cM._M(this.Kn, t2);
  }, t.prototype.update = function(t2) {
    this.Kn.Rr(), this.cM.dM(this.Kn, t2);
  }, t.prototype.setMarkers = function(t2) {
    var i2 = t2.map(function(t3) {
      return p(p({}, t3), { time: rs(t3.time) });
    });
    this.Kn.Le(i2);
  }, t.prototype.applyOptions = function(t2) {
    var i2 = _s(t2);
    this.Kn.Pr(i2);
  }, t.prototype.options = function() {
    return T(this.Kn.W());
  }, t.prototype.priceScale = function() {
    return this.vM.priceScale(this.Kn.Ct().Ke());
  }, t.prototype.createPriceLine = function(t2) {
    var i2 = k(T(cs), t2), n2 = this.Kn.Ee(i2);
    return new vs(n2);
  }, t.prototype.removePriceLine = function(t2) {
    this.Kn.Fe(t2.fM());
  }, t.prototype.seriesType = function() {
    return this.Kn.Rr();
  }, t;
}();
var ws = function(t) {
  function i2() {
    return null !== t && t.apply(this, arguments) || this;
  }
  return m(i2, t), i2.prototype.applyOptions = function(i3) {
    cn(i3), t.prototype.applyOptions.call(this, i3);
  }, i2;
}(ds);
var Ms = { autoScale: true, mode: 0, invertScale: false, alignLabels: true, borderVisible: true, borderColor: "#2B2B43", entireTextOnly: false, visible: false, drawTicks: true, scaleMargins: { bottom: 0.1, top: 0.2 } };
var bs = { color: "rgba(0, 0, 0, 0)", visible: false, fontSize: 48, fontFamily: B, fontStyle: "", text: "", horzAlign: "center", vertAlign: "center" };
var ms = { width: 0, height: 0, layout: { background: { type: "solid", color: "#FFFFFF" }, textColor: "#191919", fontSize: 11, fontFamily: B }, crosshair: { vertLine: { color: "#758696", width: 1, style: 3, visible: true, labelVisible: true, labelBackgroundColor: "#4c525e" }, horzLine: { color: "#758696", width: 1, style: 3, visible: true, labelVisible: true, labelBackgroundColor: "#4c525e" }, mode: 1 }, grid: { vertLines: { color: "#D6DCDE", style: 0, visible: true }, horzLines: { color: "#D6DCDE", style: 0, visible: true } }, overlayPriceScales: p({}, Ms), leftPriceScale: p(p({}, Ms), { visible: false }), rightPriceScale: p(p({}, Ms), { visible: true }), timeScale: { rightOffset: 0, barSpacing: 6, minBarSpacing: 0.5, fixLeftEdge: false, fixRightEdge: false, lockVisibleTimeRangeOnResize: false, rightBarStaysOnScroll: false, borderVisible: true, borderColor: "#2B2B43", visible: true, timeVisible: false, secondsVisible: true, shiftVisibleRangeOnNewBar: true }, watermark: bs, localization: { locale: kn ? navigator.language : "", dateFormat: "dd MMM 'yy" }, handleScroll: { mouseWheel: true, pressedMouseMove: true, horzTouchDrag: true, vertTouchDrag: true }, handleScale: { axisPressedMouseMove: { time: true, price: true }, axisDoubleClickReset: true, mouseWheel: true, pinch: true }, kineticScroll: { mouse: false, touch: true }, trackingMode: { exitMode: 1 } };
var ps = { upColor: "#26a69a", downColor: "#ef5350", wickVisible: true, borderVisible: true, borderColor: "#378658", borderUpColor: "#26a69a", borderDownColor: "#ef5350", wickColor: "#737375", wickUpColor: "#26a69a", wickDownColor: "#ef5350" };
var gs = { upColor: "#26a69a", downColor: "#ef5350", openVisible: true, thinBars: true };
var ys = { color: "#2196f3", lineStyle: 0, lineWidth: 3, lineType: 0, crosshairMarkerVisible: true, crosshairMarkerRadius: 4, crosshairMarkerBorderColor: "", crosshairMarkerBackgroundColor: "", lastPriceAnimation: 0 };
var ks = { topColor: "rgba( 46, 220, 135, 0.4)", bottomColor: "rgba( 40, 221, 100, 0)", lineColor: "#33D778", lineStyle: 0, lineWidth: 3, lineType: 0, crosshairMarkerVisible: true, crosshairMarkerRadius: 4, crosshairMarkerBorderColor: "", crosshairMarkerBackgroundColor: "", lastPriceAnimation: 0 };
var Ns = { baseValue: { type: "price", price: 0 }, topFillColor1: "rgba(38, 166, 154, 0.28)", topFillColor2: "rgba(38, 166, 154, 0.05)", topLineColor: "rgba(38, 166, 154, 1)", bottomFillColor1: "rgba(239, 83, 80, 0.05)", bottomFillColor2: "rgba(239, 83, 80, 0.28)", bottomLineColor: "rgba(239, 83, 80, 1)", lineWidth: 3, lineStyle: 0, crosshairMarkerVisible: true, crosshairMarkerRadius: 4, crosshairMarkerBorderColor: "", crosshairMarkerBackgroundColor: "", lastPriceAnimation: 0 };
var xs = { color: "#26a69a", base: 0 };
var Cs = { title: "", visible: true, lastValueVisible: true, priceLineVisible: true, priceLineSource: 0, priceLineWidth: 1, priceLineColor: "", priceLineStyle: 2, baseLineVisible: true, baseLineWidth: 1, baseLineColor: "#B2B5BE", baseLineStyle: 0, priceFormat: { type: "price", precision: 2, minMove: 0.01 } };
var Ss = function() {
  function t(t2, i2) {
    this.wM = t2, this.MM = i2;
  }
  return t.prototype.applyOptions = function(t2) {
    this.wM.jt().Nf(this.MM, t2);
  }, t.prototype.options = function() {
    return this._i().W();
  }, t.prototype.width = function() {
    return it(this.MM) ? this.wM.Fw("left" === this.MM ? "left" : "right") : 0;
  }, t.prototype._i = function() {
    return u(this.wM.jt().xf(this.MM)).Ct;
  }, t;
}();
var Ts = function() {
  function t(t2, i2) {
    this.bM = new y(), this.Go = new y(), this.Zd = new y(), this.pi = t2, this.Da = t2.bt(), this.Nw = i2, this.Da.Ol().u(this.mM.bind(this)), this.Da.Vl().u(this.pM.bind(this)), this.Nw.hw().u(this.gM.bind(this));
  }
  return t.prototype.g = function() {
    this.Da.Ol().M(this), this.Da.Vl().M(this), this.Nw.hw().M(this), this.bM.g(), this.Go.g(), this.Zd.g();
  }, t.prototype.scrollPosition = function() {
    return this.Da.Nl();
  }, t.prototype.scrollToPosition = function(t2, i2) {
    i2 ? this.Da.Fl(t2, 1e3) : this.pi.yn(t2);
  }, t.prototype.scrollToRealTime = function() {
    this.Da.El();
  }, t.prototype.getVisibleRange = function() {
    var t2, i2, n2 = this.Da.cl();
    return null === n2 ? null : { from: null !== (t2 = n2.from.Co) && void 0 !== t2 ? t2 : n2.from.So, to: null !== (i2 = n2.to.Co) && void 0 !== i2 ? i2 : n2.to.So };
  }, t.prototype.setVisibleRange = function(t2) {
    var i2 = { from: rs(t2.from), to: rs(t2.to) }, n2 = this.Da.wl(i2);
    this.pi.$f(n2);
  }, t.prototype.getVisibleLogicalRange = function() {
    var t2 = this.Da.fl();
    return null === t2 ? null : { from: t2.In(), to: t2.jn() };
  }, t.prototype.setVisibleLogicalRange = function(t2) {
    r(t2.from <= t2.to, "The from index cannot be after the to index."), this.pi.$f(t2);
  }, t.prototype.resetTimeScale = function() {
    this.pi.pn();
  }, t.prototype.fitContent = function() {
    this.pi.zl();
  }, t.prototype.logicalToCoordinate = function(t2) {
    var i2 = this.pi.bt();
    return i2.wi() ? null : i2.At(t2);
  }, t.prototype.coordinateToLogical = function(t2) {
    return this.Da.wi() ? null : this.Da.pl(t2);
  }, t.prototype.timeToCoordinate = function(t2) {
    var i2 = rs(t2), n2 = this.Da.Ze(i2, false);
    return null === n2 ? null : this.Da.At(n2);
  }, t.prototype.coordinateToTime = function(t2) {
    var i2, n2 = this.pi.bt(), s2 = n2.pl(t2), h2 = n2.gi(s2);
    return null === h2 ? null : null !== (i2 = h2.Co) && void 0 !== i2 ? i2 : h2.So;
  }, t.prototype.width = function() {
    return this.Nw.Ld().Ft;
  }, t.prototype.height = function() {
    return this.Nw.Ld().Ot;
  }, t.prototype.subscribeVisibleTimeRangeChange = function(t2) {
    this.bM.u(t2);
  }, t.prototype.unsubscribeVisibleTimeRangeChange = function(t2) {
    this.bM._(t2);
  }, t.prototype.subscribeVisibleLogicalRangeChange = function(t2) {
    this.Go.u(t2);
  }, t.prototype.unsubscribeVisibleLogicalRangeChange = function(t2) {
    this.Go._(t2);
  }, t.prototype.subscribeSizeChange = function(t2) {
    this.Zd.u(t2);
  }, t.prototype.unsubscribeSizeChange = function(t2) {
    this.Zd._(t2);
  }, t.prototype.applyOptions = function(t2) {
    this.Da.Pr(t2);
  }, t.prototype.options = function() {
    return T(this.Da.W());
  }, t.prototype.mM = function() {
    this.bM.p() && this.bM.m(this.getVisibleRange());
  }, t.prototype.pM = function() {
    this.Go.p() && this.Go.m(this.getVisibleLogicalRange());
  }, t.prototype.gM = function(t2) {
    this.Zd.m(t2.Ft, t2.Ot);
  }, t;
}();
function Ds(t) {
  if (void 0 !== t && "custom" !== t.type) {
    var i2 = t;
    void 0 !== i2.minMove && void 0 === i2.precision && (i2.precision = function(t2) {
      if (t2 >= 1)
        return 0;
      for (var i3 = 0; i3 < 8; i3++) {
        var n2 = Math.round(t2);
        if (Math.abs(n2 - t2) < 1e-8)
          return i3;
        t2 *= 10;
      }
      return i3;
    }(i2.minMove));
  }
}
function As(t) {
  return function(t2) {
    if (S(t2.handleScale)) {
      var i2 = t2.handleScale;
      t2.handleScale = { axisDoubleClickReset: i2, axisPressedMouseMove: { time: i2, price: i2 }, mouseWheel: i2, pinch: i2 };
    } else if (void 0 !== t2.handleScale && S(t2.handleScale.axisPressedMouseMove)) {
      var n2 = t2.handleScale.axisPressedMouseMove;
      t2.handleScale.axisPressedMouseMove = { time: n2, price: n2 };
    }
    var s2 = t2.handleScroll;
    S(s2) && (t2.handleScroll = { horzTouchDrag: s2, vertTouchDrag: s2, mouseWheel: s2, pressedMouseMove: s2 });
  }(t), function(t2) {
    if (t2.priceScale) {
      t2.leftPriceScale = t2.leftPriceScale || {}, t2.rightPriceScale = t2.rightPriceScale || {};
      var i2 = t2.priceScale.position;
      delete t2.priceScale.position, t2.leftPriceScale = k(t2.leftPriceScale, t2.priceScale), t2.rightPriceScale = k(t2.rightPriceScale, t2.priceScale), "left" === i2 && (t2.leftPriceScale.visible = true, t2.rightPriceScale.visible = false), "right" === i2 && (t2.leftPriceScale.visible = false, t2.rightPriceScale.visible = true), "none" === i2 && (t2.leftPriceScale.visible = false, t2.rightPriceScale.visible = false), t2.overlayPriceScales = t2.overlayPriceScales || {}, void 0 !== t2.priceScale.invertScale && (t2.overlayPriceScales.invertScale = t2.priceScale.invertScale), void 0 !== t2.priceScale.scaleMargins && (t2.overlayPriceScales.scaleMargins = t2.priceScale.scaleMargins);
    }
  }(t), function(t2) {
    t2.layout && t2.layout.backgroundColor && !t2.layout.background && (t2.layout.background = { type: "solid", color: t2.layout.backgroundColor });
  }(t), t;
}
var Bs = function() {
  function t(t2, i2) {
    var n2 = this;
    this.yM = new ls(), this.kM = /* @__PURE__ */ new Map(), this.NM = /* @__PURE__ */ new Map(), this.xM = new y(), this.CM = new y();
    var s2 = void 0 === i2 ? T(ms) : k(T(ms), As(i2));
    this.wM = new qn(t2, s2), this.wM.Sd().u(function(t3) {
      n2.xM.p() && n2.xM.m(n2.SM(t3()));
    }, this), this.wM.Df().u(function(t3) {
      n2.CM.p() && n2.CM.m(n2.SM(t3()));
    }, this);
    var h2 = this.wM.jt();
    this.TM = new Ts(h2, this.wM.Dw());
  }
  return t.prototype.remove = function() {
    this.wM.Sd().M(this), this.wM.Df().M(this), this.TM.g(), this.wM.g(), this.kM.clear(), this.NM.clear(), this.xM.g(), this.CM.g(), this.yM.g();
  }, t.prototype.resize = function(t2, i2, n2) {
    this.wM.xw(t2, i2, n2);
  }, t.prototype.addAreaSeries = function(t2) {
    void 0 === t2 && (t2 = {}), Ds((t2 = _s(t2)).priceFormat);
    var i2 = k(T(Cs), ks, t2), n2 = this.wM.jt().Uf("Area", i2), s2 = new ds(n2, this, this);
    return this.kM.set(s2, n2), this.NM.set(n2, s2), s2;
  }, t.prototype.addBaselineSeries = function(t2) {
    void 0 === t2 && (t2 = {}), Ds((t2 = _s(t2)).priceFormat);
    var i2 = k(T(Cs), T(Ns), t2), n2 = this.wM.jt().Uf("Baseline", i2), s2 = new ds(n2, this, this);
    return this.kM.set(s2, n2), this.NM.set(n2, s2), s2;
  }, t.prototype.addBarSeries = function(t2) {
    void 0 === t2 && (t2 = {}), Ds((t2 = _s(t2)).priceFormat);
    var i2 = k(T(Cs), gs, t2), n2 = this.wM.jt().Uf("Bar", i2), s2 = new ds(n2, this, this);
    return this.kM.set(s2, n2), this.NM.set(n2, s2), s2;
  }, t.prototype.addCandlestickSeries = function(t2) {
    void 0 === t2 && (t2 = {}), cn(t2 = _s(t2)), Ds(t2.priceFormat);
    var i2 = k(T(Cs), ps, t2), n2 = this.wM.jt().Uf("Candlestick", i2), s2 = new ws(n2, this, this);
    return this.kM.set(s2, n2), this.NM.set(n2, s2), s2;
  }, t.prototype.addHistogramSeries = function(t2) {
    void 0 === t2 && (t2 = {}), Ds((t2 = _s(t2)).priceFormat);
    var i2 = k(T(Cs), xs, t2), n2 = this.wM.jt().Uf("Histogram", i2), s2 = new ds(n2, this, this);
    return this.kM.set(s2, n2), this.NM.set(n2, s2), s2;
  }, t.prototype.addLineSeries = function(t2) {
    void 0 === t2 && (t2 = {}), Ds((t2 = _s(t2)).priceFormat);
    var i2 = k(T(Cs), ys, t2), n2 = this.wM.jt().Uf("Line", i2), s2 = new ds(n2, this, this);
    return this.kM.set(s2, n2), this.NM.set(n2, s2), s2;
  }, t.prototype.removeSeries = function(t2) {
    var i2 = e(this.kM.get(t2)), n2 = this.yM.Yf(i2);
    this.wM.jt().Yf(i2), this.DM(n2), this.kM.delete(t2), this.NM.delete(i2);
  }, t.prototype._M = function(t2, i2) {
    this.DM(this.yM.Qw(t2, i2));
  }, t.prototype.dM = function(t2, i2) {
    this.DM(this.yM.hM(t2, i2));
  }, t.prototype.subscribeClick = function(t2) {
    this.xM.u(t2);
  }, t.prototype.unsubscribeClick = function(t2) {
    this.xM._(t2);
  }, t.prototype.subscribeCrosshairMove = function(t2) {
    this.CM.u(t2);
  }, t.prototype.unsubscribeCrosshairMove = function(t2) {
    this.CM._(t2);
  }, t.prototype.priceScale = function(t2) {
    return void 0 === t2 && (t2 = this.wM.jt().Kf()), new Ss(this.wM, t2);
  }, t.prototype.timeScale = function() {
    return this.TM;
  }, t.prototype.applyOptions = function(t2) {
    this.wM.Pr(As(t2));
  }, t.prototype.options = function() {
    return this.wM.W();
  }, t.prototype.takeScreenshot = function() {
    return this.wM.Bw();
  }, t.prototype.DM = function(t2) {
    var i2 = this.wM.jt();
    i2.jf(t2.bt.ml, t2.bt.oM, t2.bt.lM), t2.uM.forEach(function(t3, i3) {
      return i3.Z(t3.ph, t3.aM);
    }), i2.yl();
  }, t.prototype.AM = function(t2) {
    return e(this.NM.get(t2));
  }, t.prototype.SM = function(t2) {
    var i2 = this, n2 = /* @__PURE__ */ new Map();
    t2.qw.forEach(function(t3, s3) {
      n2.set(i2.AM(s3), t3);
    });
    var s2 = void 0 === t2.jw ? void 0 : this.AM(t2.jw);
    return { time: t2.rt && (t2.rt.Co || t2.rt.So), point: t2.Iw, hoveredSeries: s2, hoveredMarkerId: t2.Uw, seriesPrices: n2 };
  }, t;
}();
function Ls(t, i2) {
  var n2;
  if (C(t)) {
    var s2 = document.getElementById(t);
    r(null !== s2, "Cannot find element in DOM with id=".concat(t)), n2 = s2;
  } else
    n2 = t;
  return new Bs(n2, i2);
}
function Es() {
  return "3.8.0";
}
export {
  ln as ColorType,
  Y as CrosshairMode,
  an as LasPriceAnimationMode,
  an as LastPriceAnimationMode,
  n as LineStyle,
  i as LineType,
  on as PriceLineSource,
  Vi as PriceScaleMode,
  Qi as TickMarkType,
  hn as TrackingModeExitMode,
  Ls as createChart,
  vn as isBusinessDay,
  _n as isUTCTimestamp,
  Es as version
};
/*! Bundled license information:

lightweight-charts/dist/lightweight-charts.esm.production.js:
  (*!
   * @license
   * TradingView Lightweight Charts v3.8.0
   * Copyright (c) 2020 TradingView, Inc.
   * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
   *)
*/
//# sourceMappingURL=lightweight-charts.js.map
